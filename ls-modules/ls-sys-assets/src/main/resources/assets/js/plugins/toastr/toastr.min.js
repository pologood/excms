("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)})(["jquery"],function(x){return function(){var b,t,D,H=0,o={error:"error",info:"info",success:"success",warning:"warning"},e={clear:function(e,t){var n=I();b||O(n),s(e,n,t)||function(e){for(var t=b.children(),n=t.length-1;0<=n;n--)s(x(t[n]),e)}(n)},remove:function(e){var t=I();b||O(t),e&&0===x(":focus",e).length?B(e):b.children().length&&b.remove()},error:function(e,t,n){return i({type:o.error,iconClass:I().iconClasses.error,message:e,optionsOverride:n,title:t})},getContainer:O,info:function(e,t,n){return i({type:o.info,iconClass:I().iconClasses.info,message:e,optionsOverride:n,title:t})},options:{},subscribe:function(e){t=e},success:function(e,t,n){return i({type:o.success,iconClass:I().iconClasses.success,message:e,optionsOverride:n,title:t})},version:"2.1.3",warning:function(e,t,n){return i({type:o.warning,iconClass:I().iconClasses.warning,message:e,optionsOverride:n,title:t})},show:function(e){var t=e.messageSystemEO.messageStatus;return i({type:o[t],iconClass:I().iconClasses[t],message:e.messageSystemEO.content,optionsOverride:!1,title:e.messageSystemEO.title})}};return e;function O(e,t){return e||(e=I()),(b=x("#"+e.containerId)).length||t&&(n=e,(b=x("<div/>").attr("id",n.containerId).addClass(n.positionClass)).appendTo(x(n.target)),b=b),b;var n}function s(e,t,n){var o=!(!n||!n.force)&&n.force;return!(!e||!o&&0!==x(":focus",e).length||(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){B(e)}}),0))}function E(e){t&&t(e)}function i(t){var a=I(),e=t.iconClass||a.iconClass;if(void 0!==t.optionsOverride&&(a=x.extend(a,t.optionsOverride),e=t.optionsOverride.iconClass||e),!function(e,t){if(e.preventDuplicates){if(t.message===D)return!0;D=t.message}return!1}(a,t)){H++,b=O(a,!0);var s=null,i=x("<div/>"),n=x("<div/>"),o=x("<div/>"),r=x("<div/>"),l=x(a.closeHtml),d=x(a.closeContainerHtml),c=x(a.moreHtml),u={intervalId:null,hideEta:null,maxHideTime:null},p={toastId:H,state:"visible",startTime:new Date,options:a,map:t};return a.closeContainer&&b.find("."+a.closeContainerClass).length<1&&(b.prepend(c),d.addClass(a.closeContainerClass).attr("role","button"),b.prepend(d),a.closeContainer&&d&&(d.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),a.onCloseContainerClick&&a.onCloseContainerClick(e),h()}),c.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),a.onCloseContainerClick&&a.onCloseContainerClick(e),h(),Ls.openWin("/message/index",{width:"1000px",height:"600px",lock:!0,title:"消息中心"})}))),t.iconClass&&i.addClass(a.toastClass).addClass(e),function(){if(t.title){var e=t.title;a.escapeHtml&&(e=g(t.title)),n.append(e).addClass(a.titleClass),i.append(n)}}(),function(){if(t.message){var e=t.message;a.escapeHtml&&(e=g(t.message)),o.append(e).addClass(a.messageClass),i.append(o)}}(),a.closeButton&&(l.addClass(a.closeClass).attr("role","button"),i.prepend(l)),a.progressBar&&(r.addClass(a.progressClass),i.prepend(r)),a.rtl&&i.addClass("rtl"),a.newestOnTop?a.closeContainer?i.insertAfter("#"+a.containerId+" ."+a.closeContainerClass):b.prepend(i):b.append(i),function(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}i.attr("aria-live",e)}(),i.hide(),i[a.showMethod]({duration:a.showDuration,easing:a.showEasing,complete:a.onShown}),0<a.timeOut&&(a.closeContainer?(s=setTimeout(f,a.timeOut),u.maxHideTime=parseFloat(a.timeOut),u.hideEta=(new Date).getTime()+u.maxHideTime,a.progressBar&&(u.intervalId=setInterval(T,10)),r.data("progressBar",u),i.data("intervalId",s)):(s=setTimeout(m,a.timeOut),u.maxHideTime=parseFloat(a.timeOut),u.hideEta=(new Date).getTime()+u.maxHideTime,a.progressBar&&(u.intervalId=setInterval(w,10)))),a.closeOnHover&&i.hover(C,v),a.onclick||!a.tapToDismiss||a.closeContainer||i.click(m),a.closeButton&&l&&l.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),a.onCloseClick&&a.onCloseClick(e),m(!0)}),a.onclick&&i.click(function(e){a.onclick(e),m()}),!a.onclick&&a.tapToDismiss&&a.closeContainer&&i.click(function(){i.attr("data-close","true"),f()}),a.closeContainer&&a.stopOnHover&&i.hover(function(){clearTimeout(i.data("intervalId"));var e=i.find(".toast-progress").data("progressBar");clearInterval(e.intervalId),i.find(".toast-progress").data("pBar"),i.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})},function(){if(!i.attr("data-close")){var e=Math.ceil(i.find(".toast-progress").get(0).style.width.split("%")[0]),t=e*a.timeOut/100;s=setTimeout(function(){var e=a.hideMethod,t=a.hideDuration,n=a.hideEasing,o=i.find(".toast-progress").data("progressBar");if(!x(":focus",i).length)return o&&clearTimeout(o.intervalId),i[e]({duration:t,easing:n,complete:function(){if(B(i),a.closeContainer){var e=b.find(".toast").length;0==e&&b.remove()}i&&clearTimeout(i.data("intervalId")),a.onHidden&&"hidden"!==p.state&&a.onHidden(),p.state="hidden",p.endTime=new Date,E(p)}})},t);var n=i.find(".toast-progress").data("progressBar");n.maxHideTime=parseFloat(t),n.hideEta=(new Date).getTime()+n.maxHideTime,n.percent=e/100,n.intervalId=setInterval(function(){var e=i.find(".toast-progress").data("progressBar"),t=(e.hideEta-(new Date).getTime())/e.maxHideTime*100;i.find(".toast-progress").width(t*e.percent+"%")},10),i.find(".toast-progress").data("progressBar",n),i.data("intervalId",s)}}),E(p),a.debug&&console&&console.log(p),i}function g(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(e){var t=e&&!1!==a.closeMethod?a.closeMethod:a.hideMethod,n=e&&!1!==a.closeDuration?a.closeDuration:a.hideDuration,o=e&&!1!==a.closeEasing?a.closeEasing:a.hideEasing;if(!x(":focus",i).length||e)return clearTimeout(u.intervalId),i[t]({duration:n,easing:o,complete:function(){B(i),clearTimeout(s),a.onHidden&&"hidden"!==p.state&&a.onHidden(),p.state="hidden",p.endTime=new Date,E(p)}})}function f(e){var t=e&&!1!==a.closeMethod?a.closeMethod:a.hideMethod,n=e&&!1!==a.closeDuration?a.closeDuration:a.hideDuration,o=e&&!1!==a.closeEasing?a.closeEasing:a.hideEasing;if(!x(":focus",i).length||e){var s=r.data("progressBar");return clearInterval(s.intervalId),i[t]({duration:n,easing:o,complete:function(){B(i),a.closeContainer&&0==b.find(".toast").length&&b.remove(),clearTimeout(i.data("intervalId")),a.onHidden&&"hidden"!==p.state&&a.onHidden(),p.state="hidden",p.endTime=new Date,E(p)}})}}function h(){var e=b.find(".toast");d.remove(),c.remove(),x.each(e,function(e,t){!function(e,t){var n=t&&!1!==a.closeMethod?a.closeMethod:a.hideMethod,o=t&&!1!==a.closeDuration?a.closeDuration:a.hideDuration,s=t&&!1!==a.closeEasing?a.closeEasing:a.hideEasing;if(!x(":focus",e).length||t){var i=e.find(".toast-progress").data("progressBar");clearInterval(i.intervalId),e[n]({duration:o,easing:s,complete:function(){clearTimeout(e.data("intervalId")),B(e),a.onHidden&&"hidden"!==p.state&&a.onHidden(),p.state="hidden",p.endTime=new Date,E(p)}})}}(x(t),!0)})}function v(){(0<a.timeOut||0<a.extendedTimeOut)&&(s=setTimeout(m,a.extendedTimeOut),u.maxHideTime=parseFloat(a.extendedTimeOut),u.hideEta=(new Date).getTime()+u.maxHideTime)}function C(){clearTimeout(s),u.hideEta=0,i.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})}function w(){var e=(u.hideEta-(new Date).getTime())/u.maxHideTime*100;r.width(e+"%")}function T(){var e=r.data("progressBar"),t=(e.hideEta-(new Date).getTime())/e.maxHideTime*100;r.width(t+"%")}}function I(){return x.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,stopOnHover:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeContainerHtml:'<div class="head-top"><button type="button" class="toast-close-button">&times;</button></div>',moreHtml:'<div class="more">查看更多</div>',closeClass:"toast-close-button",closeContainerClass:"container-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},e.options)}function B(e){b||(b=O()),e.is(":visible")||(e.remove(),e=null,0===b.children().length&&(b.remove(),D=void 0))}}()});