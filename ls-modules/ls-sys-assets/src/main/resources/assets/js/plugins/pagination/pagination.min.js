jQuery.fn.pagination=function(u,x){return x=$.extend({total:0,isTotal:!1,items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},x||{}),this.each(function(){function p(){return Math.ceil(u/x.items_per_page)}function l(e,t){o=e,a();var n=x.callback(e,c);return n||(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0),n}function a(){c.empty();var e,t,n,a=(e=Math.ceil(x.num_display_entries/2),t=p(),n=t-x.num_display_entries,[e<o?Math.max(Math.min(o-e,n),0):0,e<o?Math.min(o+e,t):Math.min(x.num_display_entries,t)]),s=p(),i=function(e,t){if(e=e<0?0:e<s?e:s-1,t=$.extend({text:e+1,classes:""},t||{}),e==o)var n=$("<span class='current'>"+t.text+"</span>");else n=$("<a>"+t.text+"</a>").bind("click",(a=e,function(e){return l(a,e)})).attr("href",x.link_to.replace(/__id__/,e));var a;t.classes&&n.addClass(t.classes),c.append(n)};if(u=!u||u<0?1:u,x.prev_text&&(0<o||x.prev_show_always)&&i(o-1,{text:x.prev_text,classes:"prev"}),0<a[0]&&0<x.num_edge_entries){for(var r=Math.min(x.num_edge_entries,a[0]),_=0;_<r;_++)i(_);x.num_edge_entries<a[0]&&x.ellipse_text&&$("<span>"+x.ellipse_text+"</span>").appendTo(c)}for(_=a[0];_<a[1];_++)i(_);if(a[1]<s&&0<x.num_edge_entries){s-x.num_edge_entries>a[1]&&x.ellipse_text&&$("<span>"+x.ellipse_text+"</span>").appendTo(c);for(_=Math.max(s-x.num_edge_entries,a[1]);_<s;_++)i(_)}x.next_text&&(o<s-1||x.next_show_always)&&i(o+1,{text:x.next_text,classes:"next"}),x.isTotal&&$("<span class='total'>共 "+x.total+" 条</span>").appendTo(c)}var o=x.current_page;x.items_per_page=!x.items_per_page||x.items_per_page<0?1:x.items_per_page;var c=$(this);this.selectPage=function(e){l(e)},this.prevPage=function(){return 0<o&&(l(o-1),!0)},this.nextPage=function(){return o<p()-1&&(l(o+1),!0)},a()})};