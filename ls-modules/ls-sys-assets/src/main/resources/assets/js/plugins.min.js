!function(e){"object"==typeof module&&module.exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(p,g){"use strict";var t,l="validator",f="."+l,h=".field",o="nice-"+l,u="msg-box",d="aria-required",c="aria-invalid",m="data-rule",a="data-msg",v="data-tip",_="data-timely",y="data-target",b="novalidate",k=":verifiable",i=/(&)?(!)?\b(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?\s*(;|\|)?/g,w=/(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?/,n=/(?:([^:;\(\[]*):)?(.*)/,s=/[^\x00-\xff]/g,x=/top|right|bottom|left/,V=/(?:(cors|jsonp):)?(?:(post|get):)?(.+)/i,r=/[<>'"`\\]|&#x?\d+[A-F]?;?|%3[A-F]/gim,M=p.noop,O=p.proxy,$=p.trim,F=p.isFunction,E=function(e){return"string"==typeof e},C=function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},A=document.documentMode||+(navigator.userAgent.match(/MSIE (\d+)/)&&RegExp.$1),T=function(e,t,i){return e&&e.tagName?i===g?e.getAttribute(t):void(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):null},j={},N={debug:0,theme:"default",ignore:"",focusInvalid:!0,focusCleanup:!1,stopOnError:!1,beforeSubmit:null,valid:null,invalid:null,validation:null,formClass:"n-default",validClass:"n-valid",invalidClass:"n-invalid",bindClassTo:null},S={timely:1,display:null,target:null,ignoreBlank:!1,showOk:!0,dataFilter:function(e){if(E(e)||C(e)&&("error"in e||"ok"in e))return e},msgMaker:function(i){var n;return n='<span role="alert" class="msg-wrap n-'+i.type+'">'+i.arrow,i.result?p.each(i.result,function(e,t){n+='<span class="n-'+t.type+'">'+i.icon+'<span class="n-msg">'+t.msg+"</span></span>"}):n+=i.icon+'<span class="n-msg">'+i.msg+"</span>",n+="</span>"},msgWrapper:"span",msgArrow:"",msgIcon:'<span class="n-icon"></span>',msgClass:"n-right",msgStyle:"",msgShow:null,msgHide:null},R={};function q(e,t){var i=this;if(!(i instanceof q))return new q(e,t);function n(){i._init(i.$el[0],t,!!arguments[0])}i.$el=p(e),i.$el.length?(n(),q.pending&&p(window).on("validatorready",n)):E(e)&&(j[e]=t)}function D(e,t){if(C(e)){var i,n=t?!0===t?this:t:D.prototype;for(i in e)W(i)&&(n[i]=H(e[i]))}}function I(e,t){if(C(e)){var i,n=t?!0===t?this:t:I.prototype;for(i in e)n[i]=e[i]}}function H(e){switch(p.type(e)){case"function":return e;case"array":var t=function(){return e[0].test(this.value)||e[1]||!1};return t.msg=e[1],t;case"regexp":return function(){return e.test(this.value)}}}function L(e){var t,i,n;if(e&&e.tagName){switch(e.tagName){case"INPUT":case"SELECT":case"TEXTAREA":case"BUTTON":case"FIELDSET":t=e.form||p(e).closest("."+o);break;case"FORM":t=e;break;default:t=p(e).closest("."+o)}for(i in j)if(p(t).is(i)){n=j[i];break}return p(t).data(l)||p(t)[l](n).data(l)}}function B(e,t,i){var n=t.msg,s=t._r;return C(n)&&(n=n[s]),E(n)||(n=T(e,a+"-"+s)||T(e,a)||(i?E(i)?i:i[s]:"")),n}function P(e){return"INPUT"===e.tagName&&"checkbox"===e.type||"radio"===e.type}function U(e){return Date.parse(e.replace(/\.|\-/g,"/"))}function W(e){return/^\w+$/.test(e)}function J(e){var t="#"===e.charAt(0);return e=e.replace(/([:.{(|)}/\[\]])/g,"\\$1"),t?e:'[name="'+e+'"]:first'}return p.fn.validator=function(t){var e=this,i=arguments;return e.is(k)?e:(e.is("form")||(e=this.find("form")),e.length||(e=this),e.each(function(){var e=p(this).data(l);if(e)if(E(t)){if("_"===t.charAt(0))return;e[t].apply(e,[].slice.call(i,1))}else t&&(e._reset(!0),e._init(this,t));else new q(this,t)}),this)},p.fn.isValid=function(t,e){var i,n,s=L(this[0]),a=F(t);return!s||(a||e!==g||(e=t),s.checkOnly=!!e,n=s.options,i=s._multiValidate(this.is(k)?this:this.find(k),function(e){e||!n.focusInvalid||s.checkOnly||s.$el.find("["+c+"]:first").focus(),a&&(t.length?t(e):e&&t()),s.checkOnly=!1}),a?this:i)},p.expr.pseudos.verifiable=function(e){var t=e.nodeName.toLowerCase();return("input"===t&&!{submit:1,button:1,reset:1,image:1}[e.type]||"select"===t||"textarea"===t||"true"===e.contentEditable)&&!e.disabled},p.expr.pseudos.filled=function(e){return!!$(p(e).val())},q.prototype={_init:function(e,t,i){var n,s,a,r=this;F(t)&&(t={valid:t}),t=r._opt=t||{},a=T(e,"data-"+l+"-option"),a=r._dataOpt=a&&"{"===a.charAt(0)?new Function("return "+a)():{},s=r._themeOpt=R[t.theme||a.theme||N.theme],n=r.options=p.extend({},N,S,s,r.options,t,a),i||(r.rules=new D(n.rules,!0),r.messages=new I(n.messages,!0),r.Field=function(n){function e(){var e=this.options;for(var t in e)t in S&&(this[t]=e[t]);p.extend(this,{_valHook:function(){return"true"===this.element.contentEditable?"text":"val"},getValue:function(){var e=this.element;return"number"===e.type&&e.validity&&e.validity.badInput?"NaN":p(e)[this._valHook()]()},setValue:function(e){p(this.element)[this._valHook()](this.value=e)},getRangeMsg:function(e,t,i){if(t){var n,s=this,a=s.messages[s._r]||"",r=t[0].split("~"),l="false"===t[1],o=r[0],u=r[1],d="rg",c=[""],f=$(e)&&+e==+e;return 2===r.length?o&&u?(f&&g(e,+o)&&g(+u,e)&&(n=!0),c=c.concat(r),d=l?"gtlt":"rg"):o&&!u?(f&&g(e,+o)&&(n=!0),c.push(o),d=l?"gt":"gte"):!o&&u&&(f&&g(+u,e)&&(n=!0),c.push(u),d=l?"lt":"lte"):(e===+o&&(n=!0),c.push(o),d="eq"),a&&(i&&a[d+i]&&(d+=i),c[0]=a[d]),n||s._rules&&(s._rules[s._i].msg=s.renderMsg.apply(null,c))}function g(e,t){return l?t<e:t<=e}},renderMsg:function(){var e=arguments,t=e[0],i=e.length;if(t){for(;--i;)t=t.replace("{"+i+"}",e[i]);return t}}})}function t(e,t,i){this.key=e,this.validator=n,p.extend(this,i,t)}return e.prototype=n,t.prototype=new e,t}(r),r.elements=r.elements||{},r.deferred={},r.errors={},r.fields={},r._initFields(n.fields)),r.$el.data(l)||(r.$el.data(l,r).addClass(o+" "+n.formClass).on("form-submit-validate",function(e,t,i,n,s){r.vetoed=s.veto=!r.isValid,r.ajaxFormOptions=n}).on("submit"+f+" validate"+f,O(r,"_submit")).on("reset"+f,O(r,"_reset")).on("showmsg"+f,O(r,"_showmsg")).on("hidemsg"+f,O(r,"_hidemsg")).on("focusin"+f+" click"+f,k,O(r,"_focusin")).on("focusout"+f+" validate"+f,k,O(r,"_focusout")).on("keyup"+f+" input"+f+" compositionstart compositionend",k,O(r,"_focusout")).on("click"+f,":radio,:checkbox","click",O(r,"_focusout")).on("change"+f,'select,input[type="file"]',"change",O(r,"_focusout")),r._NOVALIDATE=T(e,b),T(e,b,b)),E(n.target)&&r.$el.find(n.target).addClass("msg-container")},_guessAjax:function(e){if(!(this.isAjaxSubmit=!!this.options.valid)){var t=(p._data||p.data)(e,"events");this.isAjaxSubmit=i(t,"valid","form")||i(t,"submit","form-plugin")}function i(e,t,i){return!!(e&&e[t]&&p.map(e[t],function(e){return~e.namespace.indexOf(i)?1:null}).length)}},_initFields:function(e){var t,i,n,s=this,a=null===e;if(a&&(e=s.fields),C(e))for(t in e)if(~t.indexOf(","))for(n=(i=t.split(",")).length;n--;)r($(i[n]),e[t]);else r(t,e[t]);function r(e,t){if(null===t||a){var i=s.elements[e];i&&s._resetElement(i,!0),delete s.fields[e]}else s.fields[e]=new s.Field(e,E(t)?{rule:t}:t,s.fields[e])}s.$el.find(k).each(function(){s._parse(this)})},_parse:function(e){var t,i,n,s=this,a=e.name,r=T(e,m);if(r&&T(e,m,null),e.id&&("#"+e.id in s.fields||!a||null!==r&&(t=s.fields[a])&&r!==t.rule&&e.id!==t.key)&&(a="#"+e.id),a)return(t=s.getField(a,!0)).rule=r||t.rule,(i=T(e,"data-display"))&&(t.display=i),t.rule&&((null!==T(e,"data-must")||/\b(?:match|checked)\b/.test(t.rule))&&(t.must=!0),/\brequired\b/.test(t.rule)&&(t.required=!0,T(e,d,!0)),(n=T(e,_))?t.timely=+n:3<t.timely&&T(e,_,t.timely),s._parseRule(t),t.old={}),E(t.target)&&T(e,y,t.target),E(t.tip)&&T(e,v,t.tip),s.fields[a]=t},_parseRule:function(t){var e=n.exec(t.rule);e&&(t._i=0,e[1]&&(t.display=e[1]),e[2]&&(t._rules=[],e[2].replace(i,function(){var e=arguments;e[4]=e[4]||e[5],t._rules.push({and:"&"===e[1],not:"!"===e[2],or:"|"===e[6],method:e[3],params:e[4]?p.map(e[4].split(", "),$):g})})))},_multiValidate:function(e,t){var i=this,n=i.options;return i.hasError=!1,n.ignore&&(e=e.not(n.ignore)),e.each(function(){if(i._validate(this),i.hasError&&n.stopOnError)return!1}),t&&(i.validating=!0,p.when.apply(null,p.map(i.deferred,function(e){return e})).done(function(){t.call(i,!i.hasError),i.validating=!1})),p.isEmptyObject(i.deferred)?!i.hasError:g},_submit:function(e){var n=this,s=n.options,a=e.target,r="submit"===e.type&&!e.isDefaultPrevented();e.preventDefault(),t&&~(t=!1)||n.submiting||"validate"===e.type&&n.$el[0]!==a||F(s.beforeSubmit)&&!1===s.beforeSubmit.call(n,a)||(n.isAjaxSubmit===g&&n._guessAjax(a),n._debug("log","\n<<< event: "+e.type),n._reset(),n.submiting=!0,n._multiValidate(n.$el.find(k),function(e){var t,i=e||2===s.debug?"valid":"invalid";e||(s.focusInvalid&&n.$el.find("["+c+"]:first").focus(),t=p.map(n.errors,function(e){return e})),n.submiting=!1,n.isValid=e,F(s[i])&&s[i].call(n,a,t),n.$el.trigger(i+".form",[a,t]),n._debug("log",">>> "+i),e&&(n.vetoed?p(a).ajaxSubmit(n.ajaxFormOptions):r&&!n.isAjaxSubmit&&document.createElement("form").submit.call(a))}))},_reset:function(e){var t=this;t.errors={},e&&(t.reseting=!0,t.$el.find(k).each(function(){t._resetElement(this)}),delete t.reseting)},_resetElement:function(e,t){this._setClass(e,null),this.hideMsg(e),t&&T(e,d,null)},_focusin:function(e){var t,i,n=this,s=n.options,a=e.target;n.validating||"click"===e.type&&document.activeElement===a||(s.focusCleanup&&"true"===T(a,c)&&(n._setClass(a,null),n.hideMsg(a)),(i=T(a,v))?n.showMsg(a,{type:"tip",msg:i}):(T(a,m)&&n._parse(a),(t=T(a,_))&&(8!==t&&9!==t||n._focusout(e))))},_focusout:function(e){var t,i,n,s,a,r,l,o,u=this,d=u.options,c=e.target,f=e.type,g="focusin"===f,h="validate"===f,m=0;if("compositionstart"===f&&(u.pauseValidate=!0),"compositionend"===f&&(u.pauseValidate=!1),!u.pauseValidate&&(i=c.name&&P(c)?u.$el.find('input[name="'+c.name+'"]').get(0):c,n=u.getField(i))){if(t=n._e,n._e=f,o=n.timely,!h){if(!o||P(c)&&"click"!==f)return;if(a=n.getValue(),n.ignoreBlank&&!a&&!g)return void u.hideMsg(c);if("focusout"===f){if("change"===t)return;if(2===o||8===o){if(!a)return;s=n.old,n.isValid&&!s.showOk?u.hideMsg(c):u._makeMsg(c,n,s)}}else{if(o<2&&!e.data)return;if((r=+new Date)-(c._ts||0)<100)return;if(c._ts=r,"keyup"===f){if("input"===t)return;if(9===(l=e.keyCode)&&!a)return;if(l<48&&!{8:1,9:1,16:1,32:1,46:1}[l])return}g||(m=o<100?"click"===f||"SELECT"===c.tagName?0:400:o)}}d.ignore&&p(c).is(d.ignore)||(clearTimeout(n._t),m?n._t=setTimeout(function(){u._validate(c,n)},m):(h&&(n.old={}),u._validate(c,n)))}},_setClass:function(e,t){var i=p(e),n=this.options;n.bindClassTo&&(i=i.closest(n.bindClassTo)),i.removeClass(n.invalidClass+" "+n.validClass),null!==t&&i.addClass(t?n.validClass:n.invalidClass)},_showmsg:function(e,t,i){var n=this,s=e.target;n.$el.is(s)?C(t)?n.showMsg(t):"tip"===t&&n.$el.find(k+"["+v+"]",s).each(function(){n.showMsg(this,{type:t,msg:i})}):n.showMsg(s,{type:t,msg:i})},_hidemsg:function(e){var t=p(e.target);t.is(k)&&this.hideMsg(t)},_validatedField:function(e,t,i){var n=this,s=n.options,a=t.isValid=i.isValid=!!i.isValid,r=a?"valid":"invalid";i.key=t.key,i.ruleName=t._r,i.id=e.id,i.value=t.value,n.elements[t.key]=i.element=e,n.isValid=n.$el[0].isValid=a?n.isFormValid():a,a?i.type="ok":(n.submiting&&(n.errors[t.key]=i.msg),n.hasError=!0),t.old=i,F(t[r])&&t[r].call(n,e,i),F(s.validation)&&s.validation.call(n,e,i),p(e).attr(c,!a||null).trigger(r+h,[i,n]),n.$el.triggerHandler("validation",[i,n]),n.checkOnly||(n._setClass(e,i.skip||"tip"===i.type?null:a),n._makeMsg.apply(n,arguments))},_makeMsg:function(e,t,i){t.msgMaker&&(i=p.extend({},i),"focusin"===t._e&&(i.type="tip"),this[i.showOk||i.msg||"tip"===i.type?"showMsg":"hideMsg"](e,i,t))},_validatedRule:function(i,n,e,t){n=n||o.getField(i),t=t||{};var s,a,r,l,o=this,u=n._r,d=n.timely,c=9===d||8===d,f=!1;if(null===e)return o._validatedField(i,n,{isValid:!0,skip:!0}),void(n._i=0);if(e===g?r=!0:!0===e||""===e?f=!0:E(e)?s=e:C(e)&&(e.error?s=e.error:(s=e.ok,f=!0)),(a=n._rules[n._i]).not&&(s=g,f="required"===u||!f),a.or)if(f)for(;n._i<n._rules.length&&n._rules[n._i].or;)n._i++;else r=!0;else a.and&&(n.isValid||(r=!0));r?f=!0:(f&&!1!==n.showOk&&(s=null===(l=T(i,"data-ok"))?E(n.ok)?n.ok:s:l,!E(s)&&E(n.showOk)&&(s=n.showOk),E(s)&&(t.showOk=f)),f&&!c||(s=(B(i,n,s||a.msg||o.messages[u])||o.messages.fallback).replace(/\{0\|?([^\}]*)\}/,function(e,t){return o._getDisplay(i,n.display)||t||o.messages[0]})),f||(n.isValid=f),t.msg=s,p(i).trigger((f?"valid":"invalid")+".rule",[u,s])),!c||r&&!a.and||(f||n._m||(n._m=s),n._v=n._v||[],n._v.push({type:f?r?"tip":"ok":"error",msg:s||a.msg})),o._debug("log","   "+n._i+": "+u+" => "+(f||s)),(f||c)&&n._i<n._rules.length-1?(n._i++,o._checkRule(i,n)):(n._i=0,c?(t.isValid=n.isValid,t.result=n._v,t.msg=n._m||"",n.value||"focusin"!==n._e||(t.type="tip")):t.isValid=f,o._validatedField(i,n,t),delete n._m,delete n._v)},_checkRule:function(r,l){var e,t,i,o=this,n=l.key,u=l._rules[l._i],s=u.method,a=u.params;o.submiting&&o.deferred[n]||(i=l.old,l._r=s,i&&!l.must&&!u.must&&u.result!==g&&i.ruleName===s&&i.id===r.id&&l.value&&i.value===l.value?e=u.result:(e=(t=function(e,t){var i=$(T(e,m+"-"+t));if(i&&(i=new Function("return "+i)()))return H(i)}(r,s)||o.rules[s]||M).call(l,r,a,l),t.msg&&(u.msg=t.msg)),C(e)&&F(e.then)?(o.deferred[n]=e,l.isValid=g,!o.checkOnly&&o.showMsg(r,{type:"loading",msg:o.messages.loading},l),e.then(function(e,t,i){var n,s=$(i.responseText),a=l.dataFilter;/jsonp?/.test(this.dataType)?s=e:"{"===s.charAt(0)&&(s=p.parseJSON(s)),(n=a.call(this,s,l))===g&&(n=a.call(this,s.data,l)),u.data=this.data,u.result=l.old?n:g,o._validatedRule(r,l,n)},function(e,t){o._validatedRule(r,l,o.messages[t]||t)}).always(function(){delete o.deferred[n]})):o._validatedRule(r,l,e))},_validate:function(e,t){var i=this;if(!e.disabled&&null===T(e,b)&&(t=t||i.getField(e))&&(t._rules||i._parse(e),t._rules))return i._debug("info",t.key),t.isValid=!0,t.element=e,t.value=t.getValue(),t.required||t.must||t.value||P(e)?(i._checkRule(e,t),t.isValid):(i._validatedField(e,t,{isValid:!0}),!0)},_debug:function(e,t){window.console&&this.options.debug&&console[e](t)},test:function(e,t){var i,n,s,a,r=w.exec(t);return r&&(s=r[1])in this.rules&&(a=(a=r[2]||r[3])?a.split(", "):g,(n=this.getField(e,!0))._r=s,n.value=n.getValue(),i=this.rules[s].call(n,e,a)),!0===i||i===g||null===i},_getDisplay:function(e,t){return E(t)?t:F(t)?t.call(this,e):""},_getMsgOpt:function(e,t){var i=t||this.options;return p.extend({type:"error",pos:function(e){var t;e&&(t=x.exec(e));return t&&t[0]}(i.msgClass),target:i.target,wrapper:i.msgWrapper,style:i.msgStyle,cls:i.msgClass,arrow:i.msgArrow,icon:i.msgIcon},E(e)?{msg:e}:e)},_getMsgDOM:function(e,t){var i,n,s,a,r=p(e);if(r.is(k)?((s=t.target||T(e,y))&&(s=F(s)?s.call(this,e):this.$el.find(s)).length&&(s.is(k)?e=s.get(0):s.hasClass(u)?i=s:a=s),i||(n=P(e)&&e.name||!e.id?e.name:e.id,i=this.$el.find(t.wrapper+"."+u+'[for="'+n+'"]'))):i=r,!t.hide&&!i.length)if(r=this.$el.find(s||e),i=p("<"+t.wrapper+">").attr({class:u+(t.cls?" "+t.cls:""),style:t.style||g,for:n}),P(e)){var l=r.parent();i.appendTo(l.is("label")?l.parent():l)}else a?i.appendTo(a):i[t.pos&&"right"!==t.pos?"insertBefore":"insertAfter"](r);return i},showMsg:function(e,t,i){if(e){var n,s,a,r,l=this,o=l.options;!C(e)||e.jquery||t?(p(e).is(k)&&(i=i||l.getField(e)),(s=(i||o).msgMaker)&&(t=l._getMsgOpt(t,i),e=p(e).get(0),t.msg||"error"===t.type||null!==(a=T(e,"data-"+t.type))&&(t.msg=a),E(t.msg)&&(r=l._getMsgDOM(e,t),!x.test(r[0].className)&&r.addClass(t.cls),6===A&&"bottom"===t.pos&&(r[0].style.marginTop=p(e).outerHeight()+"px"),r.html(s.call(l,t))[0].style.display="",F(n=i&&i.msgShow||o.msgShow)&&n.call(l,r,t.type)))):p.each(e,function(e,t){var i=l.elements[e]||l.$el.find(J(e))[0];l.showMsg(i,t)})}},hideMsg:function(e,t,i){var n,s,a=this,r=a.options;e=p(e).get(0),p(e).is(k)&&(i=i||a.getField(e))&&(i.isValid||a.reseting)&&T(e,c,null),(t=a._getMsgOpt(t,i)).hide=!0,(s=a._getMsgDOM(e,t)).length&&(F(n=i&&i.msgHide||r.msgHide)?n.call(a,s,t.type):(s[0].style.display="none",s[0].innerHTML=null))},getField:function(e,t){var i,n;if(E(e))i=e,e=g;else{if(T(e,m))return this._parse(e);i=e.id&&"#"+e.id in this.fields||!e.name?"#"+e.id:e.name}return((n=this.fields[i])||t&&(n=new this.Field(i)))&&(n.element=e),n},setField:function(e,t){var i={};e&&(E(e)?i[e]=t:i=e,this._initFields(i))},isFormValid:function(){var e,t,i=this.fields;for(e in i)if((t=i[e])._rules&&(t.required||t.must||t.value)&&!t.isValid)return!1;return!0},holdSubmit:function(e){this.submiting=e===g||e},cleanUp:function(){this._reset(1)},destroy:function(){this._reset(1),this.$el.off(f).removeData(l),T(this.$el[0],b,this._NOVALIDATE)}},p(window).on("beforeunload",function(){this.focus()}),p(document).on("click",":submit",function(){var e;this.form&&((e=this.getAttributeNode("formnovalidate"))&&null!==e.nodeValue||null!==T(this,b))&&(t=!0)}).on("focusin submit validate","form,."+o,function(e){if(null===T(this,b)){var t,i=p(this);!i.data(l)&&(t=L(this))&&(p.isEmptyObject(t.fields)?(T(this,b,b),i.off(f).removeData(l)):"focusin"===e.type?t._focusin(e):t._submit(e))}}),new I({fallback:"This field is not valid.",loading:"Validating..."}),new D({required:function(e,t){var i=this,n=$(i.value),s=!0;if(t)if(1===t.length){if(W(t[0])){if(i.rules[t[0]]){if(!n&&!i.test(e,t[0]))return T(e,d,null),null;T(e,d,!0)}}else if(!n&&!p(t[0],i.$el).length)return null}else if("not"===t[0])p.each(t.slice(1),function(){return s=n!==$(this)});else if("from"===t[0]){var a,r=i.$el.find(t[1]),l="_validated_";return(s=r.filter(function(){var e=i.getField(this);return e&&!!$(e.getValue())}).length>=(t[2]||1))?n||(a=null):a=B(r[0],i)||!1,p(e).data(l)||r.data(l,1).each(function(){e!==this&&i._validate(this)}).removeData(l),a}return s&&!!n},integer:function(e,t){var i,n="[1-9]\\d*",s=t?t[0]:"*";switch(s){case"+":i=n;break;case"-":i="-"+n;break;case"+0":i="0|"+n;break;case"-0":i="0|-"+n;break;default:i="0|-?"+n}return i="^(?:"+i+")$",new RegExp(i).test(this.value)||this.messages.integer[s]},match:function(e,t){if(t){var i,n,s,a,r,l,o,u,d=this,c="eq";if(1===t.length?s=t[0]:(c=t[0],s=t[1]),l=J(s),o=d.$el.find(l)[0]){if(u=d.getField(o),i=d.value,n=u.getValue(),d._match||(d.$el.on("valid"+h+f,l,function(){p(e).trigger("validate")}),d._match=u._match=1),!d.required&&""===i&&""===n)return null;if((r=t[2])&&(/^date(time)?$/i.test(r)?(i=U(i),n=U(n)):"time"===r&&(i=+i.replace(/:/g,""),n=+n.replace(/:/g,""))),"eq"!==c&&!isNaN(+i)&&isNaN(+n))return!0;switch(a=d.messages.match[c].replace("{1}",d._getDisplay(e,u.display||s)),c){case"lt":return+i<+n||a;case"lte":return+i<=+n||a;case"gte":return+n<=+i||a;case"gt":return+n<+i||a;case"neq":return i!==n||a;default:return i===n||a}}}},range:function(e,t){return this.getRangeMsg(this.value,t)},checked:function(e,t){if(P(e)){var i,n;return n=e.name?this.$el.find('input[name="'+e.name+'"]').filter(function(){return!i&&P(this)&&(i=this),!this.disabled&&this.checked}).length:(i=e).checked,t?this.getRangeMsg(n,t):!!n||B(i,this,"")||this.messages.required}},length:function(e,t){var i=this.value,n=("true"===t[1]?i.replace(s,"xx"):i).length;return this.getRangeMsg(n,t,t[1]?"_2":"")},remote:function(e,t){if(t){var i,n=this,s=V.exec(t[0]),a=n._rules[n._i],r={},l="",o=s[3],u=s[2]||"POST",d=(s[1]||"").toLowerCase();return a.must=!0,r[e.name]=n.value,t[1]&&p.map(t.slice(1),function(e){var t,i;~e.indexOf("=")?l+="&"+e:(t=e.split(":"),e=$(t[0]),i=$(t[1])||e,r[e]=n.$el.find(J(i)).val())}),r=p.param(r)+l,!n.must&&a.data&&a.data===r?a.result:("cors"!==d&&/^https?:/.test(o)&&!~o.indexOf(location.host)&&(i="jsonp"),p.ajax({url:o,type:u,data:r,dataType:i}))}},filter:function(e,t){var i=this.value,n=i.replace(t?new RegExp("["+t[0]+"]","gm"):r,"");n!==i&&this.setValue(n)}}),q.config=function(e,t){function i(e,t){"rules"===e?new D(t):"messages"===e?new I(t):e in S?S[e]=t:N[e]=t}C(e)?p.each(e,i):E(e)&&i(e,t)},q.setTheme=function(e,t){C(e)?p.extend(!0,R,e):E(e)&&C(t)&&(R[e]=p.extend(R[e],t))},q.load=function(e){if(e){var t,i,n,s=document,a={},r=s.scripts[0];e.replace(/([^?=&]+)=([^&#]*)/g,function(e,t,i){a[t]=i}),t=a.dir||q.dir,q.css||""===a.css||((i=s.createElement("link")).rel="stylesheet",i.href=q.css=t+"validator.min.css",r.parentNode.insertBefore(i,r)),!q.local&&~e.indexOf("local")&&""!==a.local&&(q.local=(a.local||s.documentElement.lang||"en").replace("_","-"),q.pending=1,(i=s.createElement("script")).src=t+"local/"+q.local+".min.js",i[n="onload"in i?"onload":"onreadystatechange"]=function(){i.readyState&&!/loaded|complete/.test(i.readyState)||(i=i[n]=null,delete q.pending,p(window).triggerHandler("validatorready"))},r.parentNode.insertBefore(i,r))}},p[l]=q});
!function(e){"object"==typeof module&&module.exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(a){a.validator.config({stopOnError:!0,focusCleanup:!0,theme:"yellow_top",timely:0,msgClass:"n-bottom",rules:{digits:[/^\d+$/,"请填写数字"],letters:[/^[a-z]+$/i,"请填写字母"],date:[/^\d{4}-\d{2}-\d{2}$/,"请填写有效的日期，格式:yyyy-mm-dd"],time:[/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/,"请填写有效的时间，00:00到23:59之间"],email:[/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,"请填写有效的邮箱"],url:[/^(https?|s?ftp):\/\/\S+$/i,"请填写有效的网址"],qq:[/^[1-9]\d{4,}$/,"请填写有效的QQ号"],tel:[/^(?:(?:0\d{2,3}[\-]?[1-9]\d{6,8})|(?:[48]00[\-]?[1-9]\d{6}))$/,"请填写有效的电话号码"],tel_1:[/^(?:(?:0\d{2,3}[1-9]\d{6,8})|(?:[48]00[1-9]\d{6}))$/,"请填写有效的电话号码"],shortTel:[/^\d{7,8}$/,"请填写有效的电话号码"],mobile:[/^1(3[0-9]|4[57]|5[0-35-9]|6[0-9]|7[0-7]|8[0-9]|9[89])\d{8}$/,"请填写有效的手机号"],zipcode:[/^\d{6}$/,"请检查邮政编码格式"],chinese:[/^[\u0391-\uFFE5]+$/,"请填写中文字符"],username:[/^\w{3,12}$/,"请填写3-12位数字、字母、下划线"],password:[/^[\S]{6,16}$/,"请填写6-16位字符，不能包含空格"],password2:[/^(?![a-zA-z]+$)(?!\d+$)(?![!_#%&@\*\.\?\+\$\^\[\]\(\)\{\}\|\/\\]+$).{8,16}/,"请填写8-16位[数字、字母、英文符号]任意两种组合"],money:[/^(?!0\.00)(?:0|[1-9]\d*)(?:\.\d{1,2})?$/,"请填写有效的金额"],ip:[/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,"请填写有效的 IP 地址"],accept:function(e,t){if(!t)return!0;var r=t[0],s=a(e).val();return"*"===r||new RegExp(".(?:"+r+")$","i").test(s)||this.renderMsg("只接受{1}后缀的文件",r.replace(/\|/g,","))},IDcard:function(e){var t=e.value,r=!0;if(/^\d{6}(18|19|20)\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$|^\d{6}\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}$/.test(t)&&{11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "}[t.substr(0,2)]){if(18===t.length){for(var s=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],a=0,l=0;l<17;l++)a+=t.charAt(l)*s[l];"10X98765432".charAt(a%11)!==t.charAt(17)&&(r=!1)}}else r=!1;return r||"请填写正确的身份证号码"},bankcard:function(e){var t=e.value.replace(/\s/g,""),r=!0;if(/^[\d]{12,19}$/.test(t)){for(var s,a=t.split("").reverse(),l=a.length,n=0;l--;)l%2==0?n+=+a[l]:(n+=(s=2*+a[l])%10,9<s&&(n+=1));n%10!=0&&(r=!1)}else r=!1;return r||"请填写有效的银行卡号"},creditcard:function(e,t){var r=e.value,s=0,a={mastercard:1,visa:2,amex:4,dinersclub:8,enroute:16,discover:32,jcb:64,unknown:128};if(/[^0-9\-]+/.test(r))return!1;if(r=r.replace(/\D/g,""),t)for(var l=0;l<parmas.length;l++)s|=a[t[l]];else s=255;return 1&s&&/^(5[12345])/.test(r)?16===r.length:2&s&&/^(4)/.test(r)?16===r.length:4&s&&/^(3[47])/.test(r)?15===r.length:8&s&&/^(3(0[012345]|[68]))/.test(r)?14===r.length:16&s&&/^(2(014|149))/.test(r)?15===r.length:32&s&&/^(6011)/.test(r)?16===r.length:64&s&&/^(3)/.test(r)?16===r.length:64&s&&/^(2131|1800)/.test(r)?15===r.length:!!(128&s)||"请填写有效的信用卡号"},orgcode:function(e){var t=e.value,r=!0;if(/^[A-Z\d]{8}-[X\d]/.test(t)){for(var s=[3,7,9,10,5,8,4,2],a=0,l=0;l<8;l++)a+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(t.charAt(l))*s[l];var n=11-a%11;10===n?n="X":11===n&&(n=0),(n=""+n)!==t.charAt(9)&&(r=!1)}else r=!1;return r||"请填写正确的组织机构代码"},bizcode:function(e){var t=e.value,r=!0;if(/^[1-6]\d{14}$/.test(t)){for(var s=[],a=[10],l=0;l<15;l++)s[l]=a[l]%11+ +t.charAt(l),a[l+1]=2*(s[l]%10||10);1!=s[14]%10&&(r=!1)}else r=!1;return r||"请填写正确的营业执照号"},unicode:function(e){var t=e.value.replace(/^\s*|\s*$/g,""),r=!0;if(/^[1-9A-GV][1239][1-9]\d{5}[A-Z\d]{8}[X\d][Y\d]/.test(t)){var s,a,l,n,i,o;s=t.slice(9,17),a=[3,7,9,10,5,8,4,2],l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var d=n=0;d<a.length;d++)n+=l.indexOf(s.charAt(d))*a[d];if(10===(i=11-n%11)?i="X":11===i&&(i=0),(i=""+i)!==s.charAt(9)&&(r=!1),r){s=t.slice(0,17),a=[1,3,9,27,19,26,16,17,20,29,25,13,8,24,10,30,28],l="0123456789ABCDEFGHJKLMNPQRTUWXY";for(d=n=0;d<a.length;d++)n+=l.indexOf(s.charAt(d))*a[d];30===(o=31-n%31)?o="Y":31===o&&(o=0),(o=""+o)!==s.charAt(18)&&(r=!1)}}else r=!1;return r||"请填写正确的统一社会信用代码"}},messages:{0:"此处",fallback:"{0}格式不正确",loading:"正在验证...",error:"网络异常",timeout:"请求超时",required:"{0}不能为空",remote:"{0}已被使用",integer:{"*":"请填写整数","+":"请填写正整数","+0":"请填写正整数或0","-":"请填写负整数","-0":"请填写负整数或0"},match:{eq:"{0}与{1}不一致",neq:"{0}与{1}不能相同",lt:"{0}必须小于{1}",gt:"{0}必须大于{1}",lte:"{0}不能大于{1}",gte:"{0}不能小于{1}"},range:{rg:"请填写{1}到{2}的数",gte:"请填写不小于{1}的数",lte:"请填写最大{1}的数",gtlt:"请填写{1}到{2}之间的数",gt:"请填写大于{1}的数",lt:"请填写小于{1}的数"},checked:{eq:"请选择{1}项",rg:"请选择{1}到{2}项",gte:"请至少选择{1}项",lte:"请最多选择{1}项"},length:{eq:"请填写{1}个字符",rg:"请填写{1}到{2}个字符",gte:"请至少填写{1}个字符",lte:"请最多填写{1}个字符",eq_2:"",rg_2:"",gte_2:"",lte_2:""}}});var e='<span class="n-arrow"><b>◆</b><i>◆</i></span>';a.validator.setTheme({simple_right:{formClass:"n-simple",msgClass:"n-right"},simple_bottom:{formClass:"n-simple",msgClass:"n-bottom"},yellow_top:{formClass:"n-yellow",msgClass:"n-top",msgArrow:e},yellow_right:{formClass:"n-yellow",msgClass:"n-right",msgArrow:e},yellow_right_effect:{formClass:"n-yellow",msgClass:"n-right",msgArrow:e,msgShow:function(e,t){var r=e.children();r.is(":animated")||("error"===t?r.css({left:"20px",opacity:0}).delay(100).show().stop().animate({left:"-4px",opacity:1},150).animate({left:"3px"},80).animate({left:0},80):r.css({left:0,opacity:1}).fadeIn(200))},msgHide:function(e,t){e.children().stop().delay(100).show().animate({left:"20px",opacity:0},300,function(){e.hide()})}}})});
!function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{isParent:"isParent",children:"children",name:"name",title:"tips",url:"url",icon:"icon"},simpleData:{enable:!0,idKey:"id",pIdKey:"pid",rootPId:0},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"get",dataType:"json",headers:{},xhrFields:{},url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(e){var t=data.getRoot(e);t||(t={},data.setRoot(e,t)),data.nodeChildren(e,t,[]),t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()},_initCache=function(e){var t=data.getCache(e);t||(t={},data.setCache(e,t)),t.nodes=[],t.doms=[]},_bindEvent=function(d){var e=d.treeObj,t=consts.event;e.bind(t.NODECREATED,function(e,t,n){tools.apply(d.callback.onNodeCreated,[e,t,n])}),e.bind(t.CLICK,function(e,t,n,o,a){tools.apply(d.callback.onClick,[t,n,o,a])}),e.bind(t.EXPAND,function(e,t,n){tools.apply(d.callback.onExpand,[e,t,n])}),e.bind(t.COLLAPSE,function(e,t,n){tools.apply(d.callback.onCollapse,[e,t,n])}),e.bind(t.ASYNC_SUCCESS,function(e,t,n,o){tools.apply(d.callback.onAsyncSuccess,[e,t,n,o])}),e.bind(t.ASYNC_ERROR,function(e,t,n,o,a,r){tools.apply(d.callback.onAsyncError,[e,t,n,o,a,r])}),e.bind(t.REMOVE,function(e,t,n){tools.apply(d.callback.onRemove,[e,t,n])}),e.bind(t.SELECTED,function(e,t,n){tools.apply(d.callback.onSelected,[t,n])}),e.bind(t.UNSELECTED,function(e,t,n){tools.apply(d.callback.onUnSelected,[t,n])})},_unbindEvent=function(e){var t=e.treeObj,n=consts.event;t.unbind(n.NODECREATED).unbind(n.CLICK).unbind(n.EXPAND).unbind(n.COLLAPSE).unbind(n.ASYNC_SUCCESS).unbind(n.ASYNC_ERROR).unbind(n.REMOVE).unbind(n.SELECTED).unbind(n.UNSELECTED)},_eventProxy=function(e){var t=e.target,n=data.getSetting(e.data.treeId),o="",a=null,r="",d="",i=null,s=null,l=null;if(tools.eqs(e.type,"mousedown")?d="mousedown":tools.eqs(e.type,"mouseup")?d="mouseup":tools.eqs(e.type,"contextmenu")?d="contextmenu":tools.eqs(e.type,"click")?tools.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+consts.id.SWITCH)?(o=tools.getNodeMainDom(t).id,r="switchNode"):(l=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(o=tools.getNodeMainDom(l).id,r="clickNode"):tools.eqs(e.type,"dblclick")&&(d="dblclick",(l=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(o=tools.getNodeMainDom(l).id,r="switchNode")),0<d.length&&0==o.length&&(l=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(o=tools.getNodeMainDom(l).id),0<o.length)switch(a=data.getNodeCache(n,o),r){case"switchNode":data.nodeIsParent(n,a)&&(tools.eqs(e.type,"click")||tools.eqs(e.type,"dblclick")&&tools.apply(n.view.dblClickExpand,[n.treeId,a],n.view.dblClickExpand))?i=handler.onSwitchNode:r="";break;case"clickNode":i=handler.onClickNode}switch(d){case"mousedown":s=handler.onZTreeMousedown;break;case"mouseup":s=handler.onZTreeMouseup;break;case"dblclick":s=handler.onZTreeDblclick;break;case"contextmenu":s=handler.onZTreeContextmenu}return{stop:!1,node:a,nodeEventType:r,nodeEventCallback:i,treeEventType:d,treeEventCallback:s}},_initNode=function(e,t,n,o,a,r,d){if(n){var i=data.getRoot(e),s=data.nodeChildren(e,n);n.level=t,n.tId=e.treeId+"_"+ ++i.zId,n.parentTId=o?o.tId:null,n.open="string"==typeof n.open?tools.eqs(n.open,"true"):!!n.open;var l=data.nodeIsParent(e,n);tools.isArray(s)&&!(!1===l||"string"==typeof l&&tools.eqs(l,"false"))?(data.nodeIsParent(e,n,!0),n.zAsync=!0):(l=data.nodeIsParent(e,n,l),n.open=!(!l||e.async.enable)&&n.open,n.zAsync=!l),n.isFirstNode=a,n.isLastNode=r,n.getParentNode=function(){return data.getNodeCache(e,n.parentTId)},n.getPreNode=function(){return data.getPreNode(e,n)},n.getNextNode=function(){return data.getNextNode(e,n)},n.getIndex=function(){return data.getNodeIndex(e,n)},n.getPath=function(){return data.getNodePath(e,n)},n.isAjaxing=!1,data.fixPIdKeyValue(e,n)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(e,t){data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){_init.afterA.push(e)},addBeforeA:function(e){_init.beforeA.push(e)},addInnerAfterA:function(e){_init.innerAfterA.push(e)},addInnerBeforeA:function(e){_init.innerBeforeA.push(e)},addInitBind:function(e){_init.bind.push(e)},addInitUnBind:function(e){_init.unbind.push(e)},addInitCache:function(e){_init.caches.push(e)},addInitNode:function(e){_init.nodes.push(e)},addInitProxy:function(e,t){t?_init.proxys.splice(0,0,e):_init.proxys.push(e)},addInitRoot:function(e){_init.roots.push(e)},addNodesData:function(e,t,n,o){var a,r=data.nodeChildren(e,t);r?n>=r.length&&(n=-1):(r=data.nodeChildren(e,t,[]),n=-1),0<r.length&&0===n?(r[0].isFirstNode=!1,view.setNodeLineIcos(e,r[0])):0<r.length&&n<0&&(r[r.length-1].isLastNode=!1,view.setNodeLineIcos(e,r[r.length-1])),data.nodeIsParent(e,t,!0),n<0?data.nodeChildren(e,t,r.concat(o)):(a=[n,0].concat(o),r.splice.apply(r,a))},addSelectedNode:function(e,t){var n=data.getRoot(e);data.isSelectedNode(e,t)||n.curSelectedList.push(t)},addCreatedNode:function(e,t){(e.callback.onNodeCreated||e.view.addDiyDom)&&data.getRoot(e).createdNodes.push(t)},addZTreeTools:function(e){_init.zTreeTools.push(e)},exSetting:function(e){$.extend(!0,_setting,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,n){for(var o=0,a=_init.afterA.length;o<a;o++)_init.afterA[o].apply(this,arguments)},getBeforeA:function(e,t,n){for(var o=0,a=_init.beforeA.length;o<a;o++)_init.beforeA[o].apply(this,arguments)},getInnerAfterA:function(e,t,n){for(var o=0,a=_init.innerAfterA.length;o<a;o++)_init.innerAfterA[o].apply(this,arguments)},getInnerBeforeA:function(e,t,n){for(var o=0,a=_init.innerBeforeA.length;o<a;o++)_init.innerBeforeA[o].apply(this,arguments)},getCache:function(e){return caches[e.treeId]},getNodeIndex:function(e,t){if(!t)return null;for(var n=t.parentTId?t.getParentNode():data.getRoot(e),o=data.nodeChildren(e,n),a=0,r=o.length-1;a<=r;a++)if(o[a]===t)return a;return-1},getNextNode:function(e,t){if(!t)return null;for(var n=t.parentTId?t.getParentNode():data.getRoot(e),o=data.nodeChildren(e,n),a=0,r=o.length-1;a<=r;a++)if(o[a]===t)return a==r?null:o[a+1];return null},getNodeByParam:function(e,t,n,o){if(!t||!n)return null;for(var a=0,r=t.length;a<r;a++){var d=t[a];if(d[n]==o)return t[a];var i=data.nodeChildren(e,d),s=data.getNodeByParam(e,i,n,o);if(s)return s}return null},getNodeCache:function(e,t){if(!t)return null;var n=caches[e.treeId].nodes[data.getNodeCacheId(t)];return n||null},getNodePath:function(e,t){return t?((n=t.parentTId?t.getParentNode().getPath():[])&&n.push(t),n):null;var n},getNodes:function(e){return data.nodeChildren(e,data.getRoot(e))},getNodesByParam:function(e,t,n,o){if(!t||!n)return[];for(var a=[],r=0,d=t.length;r<d;r++){var i=t[r];i[n]==o&&a.push(i);var s=data.nodeChildren(e,i);a=a.concat(data.getNodesByParam(e,s,n,o))}return a},getNodesByParamFuzzy:function(e,t,n,o){if(!t||!n)return[];var a=[];o=o.toLowerCase();for(var r=0,d=t.length;r<d;r++){var i=t[r];"string"==typeof i[n]&&-1<t[r][n].toLowerCase().indexOf(o)&&a.push(i);var s=data.nodeChildren(e,i);a=a.concat(data.getNodesByParamFuzzy(e,s,n,o))}return a},getNodesByFilter:function(e,t,n,o,a){if(!t)return o?null:[];for(var r=o?null:[],d=0,i=t.length;d<i;d++){var s=t[d];if(tools.apply(n,[s,a],!1)){if(o)return s;r.push(s)}var l=data.nodeChildren(e,s),c=data.getNodesByFilter(e,l,n,o,a);if(o&&c)return c;r=o?c:r.concat(c)}return r},getPreNode:function(e,t){if(!t)return null;for(var n=t.parentTId?t.getParentNode():data.getRoot(e),o=data.nodeChildren(e,n),a=0,r=o.length;a<r;a++)if(o[a]===t)return 0==a?null:o[a-1];return null},getRoot:function(e){return e?roots[e.treeId]:null},getRoots:function(){return roots},getSetting:function(e){return settings[e]},getSettings:function(){return settings},getZTreeTools:function(e){var t=this.getRoot(this.getSetting(e));return t?t.treeTools:null},initCache:function(e){for(var t=0,n=_init.caches.length;t<n;t++)_init.caches[t].apply(this,arguments)},initNode:function(e,t,n,o,a,r){for(var d=0,i=_init.nodes.length;d<i;d++)_init.nodes[d].apply(this,arguments)},initRoot:function(e){for(var t=0,n=_init.roots.length;t<n;t++)_init.roots[t].apply(this,arguments)},isSelectedNode:function(e,t){for(var n=data.getRoot(e),o=0,a=n.curSelectedList.length;o<a;o++)if(t===n.curSelectedList[o])return!0;return!1},nodeChildren:function(e,t,n){if(!t)return null;var o=e.data.key.children;return void 0!==n&&(t[o]=n),t[o]},nodeIsParent:function(e,t,n){if(!t)return!1;var o=e.data.key.isParent;return void 0!==n&&("string"==typeof n&&(n=tools.eqs(n,"true")),n=!!n,t[o]=n),t[o]},nodeName:function(e,t,n){var o=e.data.key.name;return void 0!==n&&(t[o]=n),""+t[o]},nodeTitle:function(e,t){return""+t[""===e.data.key.title?e.data.key.name:e.data.key.title]},removeNodeCache:function(e,t){var n=data.nodeChildren(e,t);if(n)for(var o=0,a=n.length;o<a;o++)data.removeNodeCache(e,n[o]);data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){for(var n=data.getRoot(e),o=0,a=n.curSelectedList.length;o<a;o++)t!==n.curSelectedList[o]&&data.getNodeCache(e,n.curSelectedList[o].tId)||(n.curSelectedList.splice(o,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,t]),o--,a--)},setCache:function(e,t){caches[e.treeId]=t},setRoot:function(e,t){roots[e.treeId]=t},setZTreeTools:function(e,t){for(var n=0,o=_init.zTreeTools.length;n<o;n++)_init.zTreeTools[n].apply(this,arguments)},transformToArrayFormat:function(n,e){if(!e)return[];var o=[];if(tools.isArray(e))for(var t=0,a=e.length;t<a;t++){r(e[t])}else r(e);return o;function r(e){o.push(e);var t=data.nodeChildren(n,e);t&&(o=o.concat(data.transformToArrayFormat(n,t)))}},transformTozTreeFormat:function(e,t){var n,o,a=e.data.simpleData.idKey,r=e.data.simpleData.pIdKey;if(!a||""==a||!t)return[];if(tools.isArray(t)){var d=[],i={};for(n=0,o=t.length;n<o;n++)i[t[n][a]]=t[n];for(n=0,o=t.length;n<o;n++){var s=i[t[n][r]];if(s&&t[n][a]!=t[n][r]){var l=data.nodeChildren(e,s);l||(l=data.nodeChildren(e,s,[])),l.push(t[n])}else d.push(t[n])}return d}return[t]}},event={bindEvent:function(e){for(var t=0,n=_init.bind.length;t<n;t++)_init.bind[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,n=_init.unbind.length;t<n;t++)_init.unbind[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},n=e.treeObj;e.view.txtSelectedEnable||n.bind("selectstart",handler.onSelectStart).css({"-moz-user-select":"-moz-none"}),n.bind("click",t,event.proxy),n.bind("dblclick",t,event.proxy),n.bind("mouseover",t,event.proxy),n.bind("mouseout",t,event.proxy),n.bind("mousedown",t,event.proxy),n.bind("mouseup",t,event.proxy),n.bind("contextmenu",t,event.proxy)},unbindTree:function(e){e.treeObj.unbind("selectstart",handler.onSelectStart).unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(e){for(var t=[],n=0,o=_init.proxys.length;n<o;n++){var a=_init.proxys[n].apply(this,arguments);if(t.push(a),a.stop)break}return t},proxy:function(e){var t=data.getSetting(e.data.treeId);if(!tools.uCanDo(t,e))return!0;for(var n=event.doProxy(e),o=!0,a=0,r=n.length;a<r;a++){var d=n[a];d.nodeEventCallback&&(!0,o=d.nodeEventCallback.apply(d,[e,d.node])&&o),d.treeEventCallback&&(!0,o=d.treeEventCallback.apply(d,[e,d.node])&&o)}return o}},handler={onSwitchNode:function(e,t){var n=data.getSetting(e.data.treeId);if(t.open){if(0==tools.apply(n.callback.beforeCollapse,[n.treeId,t],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}else{if(0==tools.apply(n.callback.beforeExpand,[n.treeId,t],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}return!0},onClickNode:function(e,t){var n=data.getSetting(e.data.treeId),o=n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&data.isSelectedNode(n,t)?0:n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&n.view.selectedMulti?2:1;return 0==tools.apply(n.callback.beforeClick,[n.treeId,t,o],!0)||(0===o?view.cancelPreSelectedNode(n,t):view.selectNode(n,t,2===o),n.treeObj.trigger(consts.event.CLICK,[e,n.treeId,t,o])),!0},onZTreeMousedown:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseDown,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseDown,[e,n.treeId,t]),!0},onZTreeMouseup:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseUp,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseUp,[e,n.treeId,t]),!0},onZTreeDblclick:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeDblClick,[n.treeId,t],!0)&&tools.apply(n.callback.onDblClick,[e,n.treeId,t]),!0},onZTreeContextmenu:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeRightClick,[n.treeId,t],!0)&&tools.apply(n.callback.onRightClick,[e,n.treeId,t]),"function"!=typeof n.callback.onRightClick},onSelectStart:function(e){var t=e.originalEvent.srcElement.nodeName.toLowerCase();return"input"===t||"textarea"===t}},tools={apply:function(e,t,n){return"function"==typeof e?e.apply(zt,t||[]):n},canAsync:function(e,t){var n=data.nodeChildren(e,t),o=data.nodeIsParent(e,t);return e.async.enable&&t&&o&&!(t.zAsync||n&&0<n.length)},clone:function(e){if(null===e)return null;var t=tools.isArray(e)?[]:{};for(var n in e)t[n]=e[n]instanceof Date?new Date(e[n].getTime()):"object"==typeof e[n]?tools.clone(e[n]):e[n];return t},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},$:function(e,t,n){return t&&"string"!=typeof t&&(n=t,t=""),"string"==typeof e?$(e,n?n.treeObj.get(0).ownerDocument:null):$("#"+e.tId+t,n?n.treeObj:null)},getMDom:function(e,t,n){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var o=0,a=n.length;t.tagName&&o<a;o++)if(tools.eqs(t.tagName,n[o].tagName)&&null!==t.getAttribute(n[o].attrName))return t;t=t.parentNode}return null},getNodeMainDom:function(e){return $(e).parent("li").get(0)||$(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return 0<$(e).closest("#"+t).length},uCanDo:function(e,t){return!0}},view={addNodes:function(e,t,n,o,a){var r=data.nodeIsParent(e,t);if(!e.data.keep.leaf||!t||r)if(tools.isArray(o)||(o=[o]),e.data.simpleData.enable&&(o=data.transformTozTreeFormat(e,o)),t){var d=$$(t,consts.id.SWITCH,e),i=$$(t,consts.id.ICON,e),s=$$(t,consts.id.UL,e);t.open||(view.replaceSwitchClass(t,d,consts.folder.CLOSE),view.replaceIcoClass(t,i,consts.folder.CLOSE),t.open=!1,s.css({display:"none"})),data.addNodesData(e,t,n,o),view.createNodes(e,t.level+1,o,t,n),a||view.expandCollapseParentNode(e,t,!0)}else data.addNodesData(e,data.getRoot(e),n,o),view.createNodes(e,0,o,null,n)},appendNodes:function(e,t,n,o,a,r,d){if(!n)return[];var i,s,l=[],c=o||data.getRoot(e),u=data.nodeChildren(e,c);(!u||a>=u.length-n.length)&&(a=-1);for(var h=0,f=n.length;h<f;h++){var p=n[h];r&&(i=(0===a||u.length==n.length)&&0==h,s=a<0&&h==n.length-1,data.initNode(e,t,p,o,i,s,d),data.addNodeCache(e,p));var g=data.nodeIsParent(e,p),N=[],v=data.nodeChildren(e,p);v&&0<v.length&&(N=view.appendNodes(e,t+1,v,p,-1,r,d&&p.open)),d&&(view.makeDOMNodeMainBefore(l,e,p),view.makeDOMNodeLine(l,e,p),data.getBeforeA(e,p,l),view.makeDOMNodeNameBefore(l,e,p),data.getInnerBeforeA(e,p,l),view.makeDOMNodeIcon(l,e,p),data.getInnerAfterA(e,p,l),view.makeDOMNodeNameAfter(l,e,p),data.getAfterA(e,p,l),g&&p.open&&view.makeUlHtml(e,p,l,N.join("")),view.makeDOMNodeMainAfter(l,e,p),data.addCreatedNode(e,p))}return l},appendParentULDom:function(e,t){var n=[],o=$$(t,e);!o.get(0)&&t.parentTId&&(view.appendParentULDom(e,t.getParentNode()),o=$$(t,e));var a=$$(t,consts.id.UL,e);a.get(0)&&a.remove();var r=data.nodeChildren(e,t),d=view.appendNodes(e,t.level+1,r,t,-1,!1,!0);view.makeUlHtml(e,t,n,d.join("")),o.append(n.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l,isParent=data.nodeIsParent(setting,node);if(node&&!isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"",class:consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={},autoParam={},otherParam={};for(i=0,l=setting.async.autoParam.length;node&&i<l;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;1<pKey.length&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;i<l;i+=2)otherParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)otherParam[p]=setting.async.otherParam[p];tmpParam=$.extend(!0,otherParam,tmpParam);var _tmpV=data.getRoot(setting)._ver;return Ls.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:-1<setting.async.contentType.indexOf("application/json")?JSON.stringify(tmpParam):tmpParam,dataType:setting.async.dataType,headers:setting.async.headers,xhrFields:setting.async.xhrFields,success:function(msg){if(msg.data&&msg.data.list)var msg=msg.data.list;if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(e){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,-1,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,-1,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(e,t,n){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,e,t,n]))}}),!0},cancelPreSelectedNode:function(e,t,n){var o,a,r=data.getRoot(e).curSelectedList;for(o=r.length-1;0<=o;o--)if(t===(a=r[o])||!t&&(!n||n!==a)){if($$(a,consts.id.A,e).removeClass(consts.node.CURSELECTED),t){data.removeSelectedNode(e,t);break}r.splice(o,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,a])}},createNodeCallback:function(e){if(e.callback.onNodeCreated||e.view.addDiyDom)for(var t=data.getRoot(e);0<t.createdNodes.length;){var n=t.createdNodes.shift();tools.apply(e.view.addDiyDom,[e.treeId,n]),e.callback.onNodeCreated&&e.treeObj.trigger(consts.event.NODECREATED,[e.treeId,n])}},createNodes:function(e,t,n,o,a){if(n&&0!=n.length){var r=data.getRoot(e),d=!o||o.open||!!$$(data.nodeChildren(e,o)[0],e).get(0);r.createdNodes=[];var i,s,l=view.appendNodes(e,t,n,o,a,!0,d);if(o){var c=$$(o,consts.id.UL,e);c.get(0)&&(i=c)}else i=e.treeObj;i&&(0<=a&&(s=i.children()[a]),0<=a&&s?$(s).before(l.join("")):i.append(l.join(""))),view.createNodeCallback(e)}},destroy:function(e){e&&(data.initCache(e),data.initRoot(e),event.unbindTree(e),event.unbindEvent(e),e.treeObj.empty(),delete settings[e.treeId])},expandCollapseNode:function(e,t,n,o,a){var r,d=data.getRoot(e);if(t){var i=data.nodeChildren(e,t),s=data.nodeIsParent(e,t);if(d.expandTriggerFlag&&(r=a,a=function(){r&&r(),t.open?e.treeObj.trigger(consts.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(consts.event.COLLAPSE,[e.treeId,t])},d.expandTriggerFlag=!1),!t.open&&s&&(!$$(t,consts.id.UL,e).get(0)||i&&0<i.length&&!$$(i[0],e).get(0))&&(view.appendParentULDom(e,t),view.createNodeCallback(e)),t.open!=n){var l=$$(t,consts.id.UL,e),c=$$(t,consts.id.SWITCH,e),u=$$(t,consts.id.ICON,e);s?(t.open=!t.open,t.iconOpen&&t.iconClose&&u.attr("style",view.makeNodeIcoStyle(e,t)),t.open?(view.replaceSwitchClass(t,c,consts.folder.OPEN),view.replaceIcoClass(t,u,consts.folder.OPEN),0==o||""==e.view.expandSpeed?(l.show(),tools.apply(a,[])):i&&0<i.length?l.slideDown(e.view.expandSpeed,a):(l.show(),tools.apply(a,[]))):(view.replaceSwitchClass(t,c,consts.folder.CLOSE),view.replaceIcoClass(t,u,consts.folder.CLOSE),0!=o&&""!=e.view.expandSpeed&&i&&0<i.length?l.slideUp(e.view.expandSpeed,a):(l.hide(),tools.apply(a,[])))):tools.apply(a,[])}else tools.apply(a,[])}else tools.apply(a,[])},expandCollapseParentNode:function(e,t,n,o,a){t&&(t.parentTId?(view.expandCollapseNode(e,t,n,o),t.parentTId&&view.expandCollapseParentNode(e,t.getParentNode(),n,o,a)):view.expandCollapseNode(e,t,n,o,a))},expandCollapseSonNode:function(e,t,n,o,a){var r=data.getRoot(e),d=t?data.nodeChildren(e,t):data.nodeChildren(e,r),i=!t&&o,s=data.getRoot(e).expandTriggerFlag;if(data.getRoot(e).expandTriggerFlag=!1,d)for(var l=0,c=d.length;l<c;l++)d[l]&&view.expandCollapseSonNode(e,d[l],n,i);data.getRoot(e).expandTriggerFlag=s,view.expandCollapseNode(e,t,n,o,a)},isSelectedNode:function(e,t){if(!t)return!1;var n,o=data.getRoot(e).curSelectedList;for(n=o.length-1;0<=n;n--)if(t===o[n])return!0;return!1},makeDOMNodeIcon:function(e,t,n){var o=data.nodeName(t,n),a=t.view.nameIsHTML?o:o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e.push("<span id='",n.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(t,n),"' style='",view.makeNodeIcoStyle(t,n),"'></span><span id='",n.tId,consts.id.SPAN,"' class='",consts.className.NAME,"'>",a,"</span>")},makeDOMNodeLine:function(e,t,n){e.push("<span id='",n.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(t,n),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e,t,n){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,n){e.push("<li id='",n.tId,"' class='",consts.className.LEVEL,n.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e,t,n){e.push("</a>")},makeDOMNodeNameBefore:function(e,t,n){var o=data.nodeTitle(t,n),a=view.makeNodeUrl(t,n),r=view.makeNodeFontCss(t,n),d=[];for(var i in r)d.push(i,":",r[i],";");e.push("<a id='",n.tId,consts.id.A,"' class='",consts.className.LEVEL,n.level,"' treeNode",consts.id.A,' onclick="',n.click||"",'" ',null!=a&&0<a.length?"href='"+a+"'":""," target='",view.makeNodeTarget(n),"' style='",d.join(""),"'"),tools.apply(t.view.showTitle,[t.treeId,n],t.view.showTitle)&&o&&e.push("title='",o.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),e.push(">")},makeNodeFontCss:function(e,t){var n=tools.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return n&&"function"!=typeof n?n:{}},makeNodeIcoClass:function(e,t){var n=["ico"];if(!t.isAjaxing){var o=data.nodeIsParent(e,t);n[0]=(t.iconSkin?t.iconSkin+"_":"")+n[0],o?n.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU)}return consts.className.BUTTON+" "+n.join("_")},makeNodeIcoStyle:function(e,t){var n=[];if(!t.isAjaxing){var o=data.nodeIsParent(e,t)&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t[e.data.key.icon];o&&n.push("background:url(",o,") 0 0 no-repeat;"),0!=e.view.showIcon&&tools.apply(e.view.showIcon,[e.treeId,t],!0)||n.push("width:0px;height:0px;")}return n.join("")},makeNodeLineClass:function(e,t){var n=[];return e.view.showLine?0==t.level&&t.isFirstNode&&t.isLastNode?n.push(consts.line.ROOT):0==t.level&&t.isFirstNode?n.push(consts.line.ROOTS):t.isLastNode?n.push(consts.line.BOTTOM):n.push(consts.line.CENTER):n.push(consts.line.NOLINE),data.nodeIsParent(e,t)?n.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU),view.makeNodeLineClassEx(t)+n.join("_")},makeNodeLineClassEx:function(e){return consts.className.BUTTON+" "+consts.className.LEVEL+e.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var n=e.data.key.url;return t[n]?t[n]:null},makeUlHtml:function(e,t,n,o){n.push("<ul id='",t.tId,consts.id.UL,"' class='",consts.className.LEVEL,t.level," ",view.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),n.push(o),n.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?consts.line.LINE:""},removeChildNodes:function(e,t){if(t){var n=data.nodeChildren(e,t);if(n){for(var o=0,a=n.length;o<a;o++)data.removeNodeCache(e,n[o]);if(data.removeSelectedNode(e),delete t[e.data.key.children],e.data.keep.parent)$$(t,consts.id.UL,e).empty();else{data.nodeIsParent(e,t,!1),t.open=!1;var r=$$(t,consts.id.SWITCH,e),d=$$(t,consts.id.ICON,e);view.replaceSwitchClass(t,r,consts.folder.DOCU),view.replaceIcoClass(t,d,consts.folder.DOCU),$$(t,consts.id.UL,e).remove()}}}},scrollIntoView:function(e,t){if(t)if("undefined"!=typeof Element)Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(a){function e(e,t,n,o){return!1===a||n<=e+o&&e<=t+o?Math.min(n,Math.max(t,e)):(t+n)/2}for(var t,n=this,l=function a(r,d,i,s){return{left:r,top:d,width:i,height:s,right:r+i,bottom:d+s,translate:function(e,t){return a(e+r,t+d,i,s)},relativeFromTo:function(e,t){var n=r,o=d;if((e=e.offsetParent)===(t=t.offsetParent))return l;for(;e;e=e.offsetParent)n+=e.offsetLeft+e.clientLeft,o+=e.offsetTop+e.clientTop;for(;t;t=t.offsetParent)n-=t.offsetLeft+t.clientLeft,o-=t.offsetTop+t.clientTop;return a(n,o,i,s)}}}(this.offsetLeft,this.offsetTop,this.offsetWidth,this.offsetHeight);tools.isElement(t=n.parentNode);){var o=t.offsetLeft+t.clientLeft,r=t.offsetTop+t.clientTop;l=l.relativeFromTo(n,t).translate(-o,-r),t.scrollLeft=e(t.scrollLeft,l.right-t.clientWidth,l.left,t.clientWidth),t.scrollTop=e(t.scrollTop,l.bottom-t.clientHeight,l.top,t.clientHeight),l=l.translate(o-t.scrollLeft,r-t.scrollTop),n=t}}),t.scrollIntoViewIfNeeded();else{var n=e.treeObj.get(0).getBoundingClientRect(),o=t.getBoundingClientRect();(o.top<n.top||o.bottom>n.bottom||o.right>n.right||o.left<n.left)&&t.scrollIntoView()}},setFirstNode:function(e,t){var n=data.nodeChildren(e,t);0<n.length&&(n[0].isFirstNode=!0)},setLastNode:function(e,t){var n=data.nodeChildren(e,t);0<n.length&&(n[n.length-1].isLastNode=!0)},removeNode:function(e,t){var n=data.getRoot(e),o=t.parentTId?t.getParentNode():n;if(t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null},data.getNodeCache(e,t.tId)){$$(t,e).remove(),data.removeNodeCache(e,t),data.removeSelectedNode(e,t);for(var a=data.nodeChildren(e,o),r=0,d=a.length;r<d;r++)if(a[r].tId==t.tId){a.splice(r,1);break}view.setFirstNode(e,o),view.setLastNode(e,o);var i,s,l,c=a.length;if(e.data.keep.parent||0!=c){if(e.view.showLine&&0<c){var u=a[c-1];if(i=$$(u,consts.id.UL,e),s=$$(u,consts.id.SWITCH,e),l=$$(u,consts.id.ICON,e),o==n)if(1==a.length)view.replaceSwitchClass(u,s,consts.line.ROOT);else{var h=$$(a[0],consts.id.SWITCH,e);view.replaceSwitchClass(a[0],h,consts.line.ROOTS),view.replaceSwitchClass(u,s,consts.line.BOTTOM)}else view.replaceSwitchClass(u,s,consts.line.BOTTOM);i.removeClass(consts.line.LINE)}}else data.nodeIsParent(e,o,!1),o.open=!1,delete o[e.data.key.children],i=$$(o,consts.id.UL,e),s=$$(o,consts.id.SWITCH,e),l=$$(o,consts.id.ICON,e),view.replaceSwitchClass(o,s,consts.folder.DOCU),view.replaceIcoClass(o,l,consts.folder.DOCU),i.css("display","none")}},replaceIcoClass:function(e,t,n){if(t&&!e.isAjaxing){var o=t.attr("class");if(null!=o){var a=o.split("_");switch(n){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:a[a.length-1]=n}t.attr("class",a.join("_"))}}},replaceSwitchClass:function(e,t,n){if(t){var o=t.attr("class");if(null!=o){var a=o.split("_");switch(n){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:a[0]=view.makeNodeLineClassEx(e)+n;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:a[1]=n}t.attr("class",a.join("_")),n!==consts.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(e,t,n){n||view.cancelPreSelectedNode(e,null,t),$$(t,consts.id.A,e).addClass(consts.node.CURSELECTED),data.addSelectedNode(e,t),e.treeObj.trigger(consts.event.SELECTED,[e.treeId,t])},setNodeFontCss:function(e,t){var n=$$(t,consts.id.A,e),o=view.makeNodeFontCss(e,t);o&&n.css(o)},setNodeLineIcos:function(e,t){if(t){var n=$$(t,consts.id.SWITCH,e),o=$$(t,consts.id.UL,e),a=$$(t,consts.id.ICON,e),r=view.makeUlLineClass(e,t);0==r.length?o.removeClass(consts.line.LINE):o.addClass(r),n.attr("class",view.makeNodeLineClass(e,t)),data.nodeIsParent(e,t)?n.removeAttr("disabled"):n.attr("disabled","disabled"),a.removeAttr("style"),a.attr("style",view.makeNodeIcoStyle(e,t)),a.attr("class",view.makeNodeIcoClass(e,t))}},setNodeName:function(e,t){var n=data.nodeTitle(e,t),o=$$(t,consts.id.SPAN,e);(o.empty(),e.view.nameIsHTML?o.html(data.nodeName(e,t)):o.text(data.nodeName(e,t)),tools.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle))&&$$(t,consts.id.A,e).attr("title",n||"")},setNodeTarget:function(e,t){$$(t,consts.id.A,e).attr("target",view.makeNodeTarget(t))},setNodeUrl:function(e,t){var n=$$(t,consts.id.A,e),o=view.makeNodeUrl(e,t);null==o||0==o.length?n.removeAttr("href"):n.attr("href",o)},switchNode:function(e,t){if(t.open||!tools.canAsync(e,t))view.expandCollapseNode(e,t,!t.open);else if(e.async.enable){if(!view.asyncNode(e,t))return void view.expandCollapseNode(e,t,!t.open)}else t&&view.expandCollapseNode(e,t,!t.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(e){var t=data.getZTreeTools(e);return t||null},destroy:function(e){if(e&&0<e.length)view.destroy(data.getSetting(e));else for(var t in settings)view.destroy(settings[t])},init:function(e,t,n){var s=tools.clone(_setting);$.extend(!0,s,t),s.treeId=e.attr("id"),s.treeObj=e,s.treeObj.empty(),settings[s.treeId]=s,void 0===document.body.style.maxHeight&&(s.view.expandSpeed=""),data.initRoot(s);var o=data.getRoot(s);n=n?tools.clone(tools.isArray(n)?n:[n]):[],s.data.simpleData.enable?data.nodeChildren(s,o,data.transformTozTreeFormat(s,n)):data.nodeChildren(s,o,n),data.initCache(s),event.unbindTree(s),event.bindTree(s),event.unbindEvent(s),event.bindEvent(s);var r={setting:s,addNodes:function(e,t,n,o){e||(e=null);var a=data.nodeIsParent(s,e);if(e&&!a&&s.data.keep.leaf)return null;var r=parseInt(t,10);if(isNaN(r)?(o=!!n,n=t,t=-1):t=r,!n)return null;var d=tools.clone(tools.isArray(n)?n:[n]);function i(){view.addNodes(s,e,t,d,1==o)}return tools.canAsync(s,e)?view.asyncNode(s,e,o,i):i(),d},cancelSelectedNode:function(e){view.cancelPreSelectedNode(s,e)},destroy:function(){view.destroy(s)},expandAll:function(e){return e=!!e,view.expandCollapseSonNode(s,null,e,!0),e},expandNode:function(t,e,n,o,a){return t&&data.nodeIsParent(s,t)?(!0!==e&&!1!==e&&(e=!t.open),(a=!!a)&&e&&0==tools.apply(s.callback.beforeExpand,[s.treeId,t],!0)?null:a&&!e&&0==tools.apply(s.callback.beforeCollapse,[s.treeId,t],!0)?null:(e&&t.parentTId&&view.expandCollapseParentNode(s,t.getParentNode(),e,!1),e!==t.open||n?(data.getRoot(s).expandTriggerFlag=a,!tools.canAsync(s,t)&&n?view.expandCollapseSonNode(s,t,e,!0,r):(t.open=!e,view.switchNode(this.setting,t),r()),e):null)):null;function r(){var e=$$(t,s).get(0);e&&!1!==o&&view.scrollIntoView(s,e)}},getNodes:function(){return data.getNodes(s)},getNodeByParam:function(e,t,n){return e?data.getNodeByParam(s,n?data.nodeChildren(s,n):data.getNodes(s),e,t):null},getNodeByTId:function(e){return data.getNodeCache(s,e)},getNodesByParam:function(e,t,n){return e?data.getNodesByParam(s,n?data.nodeChildren(s,n):data.getNodes(s),e,t):null},getNodesByParamFuzzy:function(e,t,n){return e?data.getNodesByParamFuzzy(s,n?data.nodeChildren(s,n):data.getNodes(s),e,t):null},getNodesByFilter:function(e,t,n,o){return t=!!t,e&&"function"==typeof e?data.getNodesByFilter(s,n?data.nodeChildren(s,n):data.getNodes(s),e,t,o):t?null:[]},getNodeIndex:function(e){if(!e)return null;for(var t=e.parentTId?e.getParentNode():data.getRoot(s),n=data.nodeChildren(s,t),o=0,a=n.length;o<a;o++)if(n[o]==e)return o;return-1},getSelectedNodes:function(){for(var e=[],t=data.getRoot(s).curSelectedList,n=0,o=t.length;n<o;n++)e.push(t[n]);return e},isSelectedNode:function(e){return data.isSelectedNode(s,e)},reAsyncChildNodesPromise:function(n,o,a){return new Promise(function(e,t){try{r.reAsyncChildNodes(n,o,a,function(){e(n)})}catch(e){t(e)}})},reAsyncChildNodes:function(e,t,n,o){if(this.setting.async.enable){var a=!e;if(a&&(e=data.getRoot(s)),"refresh"==t){for(var r=data.nodeChildren(s,e),d=0,i=r?r.length:0;d<i;d++)data.removeNodeCache(s,r[d]);if(data.removeSelectedNode(s),data.nodeChildren(s,e,[]),a)this.setting.treeObj.empty();else $$(e,consts.id.UL,s).empty()}view.asyncNode(this.setting,a?null:e,!!n,o)}},refresh:function(){this.setting.treeObj.empty();var e=data.getRoot(s),t=data.nodeChildren(s,e);data.initRoot(s),data.nodeChildren(s,e,t),data.initCache(s),view.createNodes(s,0,data.nodeChildren(s,e),null,-1)},removeChildNodes:function(e){if(!e)return null;var t=data.nodeChildren(s,e);return view.removeChildNodes(s,e),t||null},removeNode:function(e,t){e&&((t=!!t)&&0==tools.apply(s.callback.beforeRemove,[s.treeId,e],!0)||(view.removeNode(s,e),t&&this.setting.treeObj.trigger(consts.event.REMOVE,[s.treeId,e])))},selectNode:function(t,e,n){if(t&&tools.uCanDo(s)){if(e=s.view.selectedMulti&&e,t.parentTId)view.expandCollapseParentNode(s,t.getParentNode(),!0,!1,function(){if(n)return;var e=$$(t,s).get(0);view.scrollIntoView(s,e)});else if(!n)try{$$(t,s).focus().blur()}catch(e){}view.selectNode(s,t,e)}},transformTozTreeNodes:function(e){return data.transformTozTreeFormat(s,e)},transformToArray:function(e){return data.transformToArrayFormat(s,e)},updateNode:function(e,t){e&&($$(e,s).get(0)&&tools.uCanDo(s)&&(view.setNodeName(s,e),view.setNodeTarget(s,e),view.setNodeUrl(s,e),view.setNodeLineIcos(s,e),view.setNodeFontCss(s,e)))}};o.treeTools=r,data.setZTreeTools(s,r);var a=data.nodeChildren(s,o);return a&&0<a.length?view.createNodes(s,0,a,null,-1):s.async.enable&&s.async.url&&""!==s.async.url&&view.asyncNode(s),r}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery),function(e){var t={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},n={check:{enable:!1,autoCheckTrigger:!1,chkStyle:t.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:t.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},i={onCheckNode:function(e,t){if(!0===t.chkDisabled)return!1;var n=f.getSetting(e.data.treeId);if(0==s.apply(n.callback.beforeCheck,[n.treeId,t],!0))return!0;var o=f.nodeChecked(n,t);f.nodeChecked(n,t,!o),h.checkNodeRelation(n,t);var a=p(t,u.id.CHECK,n);return h.setChkClass(n,a,t),h.repairParentChkClassWithSelf(n,t),n.treeObj.trigger(u.event.CHECK,[e,n.treeId,t]),!0},onMouseoverCheck:function(e,t){if(!0===t.chkDisabled)return!1;var n=f.getSetting(e.data.treeId),o=p(t,u.id.CHECK,n);return t.check_Focus=!0,h.setChkClass(n,o,t),!0},onMouseoutCheck:function(e,t){if(!0===t.chkDisabled)return!1;var n=f.getSetting(e.data.treeId),o=p(t,u.id.CHECK,n);return t.check_Focus=!1,h.setChkClass(n,o,t),!0}},o={tools:{},view:{checkNodeRelation:function(e,t){var n,o,a,r=u.radio,d=f.nodeChecked(e,t);if(e.check.chkStyle==r.STYLE){var i=f.getRadioCheckedList(e);if(d)if(e.check.radioType==r.TYPE_ALL){for(o=i.length-1;0<=o;o--){n=i[o],f.nodeChecked(e,n)&&n!=t&&(f.nodeChecked(e,n,!1),i.splice(o,1),h.setChkClass(e,p(n,u.id.CHECK,e),n),n.parentTId!=t.parentTId&&h.repairParentChkClassWithSelf(e,n))}i.push(t)}else{var s=t.parentTId?t.getParentNode():f.getRoot(e);for(o=0,a=(l=f.nodeChildren(e,s)).length;o<a;o++){n=l[o],f.nodeChecked(e,n)&&n!=t&&(f.nodeChecked(e,n,!1),h.setChkClass(e,p(n,u.id.CHECK,e),n))}}else if(e.check.radioType==r.TYPE_ALL)for(o=0,a=i.length;o<a;o++)if(t==i[o]){i.splice(o,1);break}}else{var l=f.nodeChildren(e,t);d&&(!l||0==l.length||-1<e.check.chkboxType.Y.indexOf("s"))&&h.setSonNodeCheckBox(e,t,!0),d||l&&0!=l.length&&!(-1<e.check.chkboxType.N.indexOf("s"))||h.setSonNodeCheckBox(e,t,!1),d&&-1<e.check.chkboxType.Y.indexOf("p")&&h.setParentNodeCheckBox(e,t,!0),!d&&-1<e.check.chkboxType.N.indexOf("p")&&h.setParentNodeCheckBox(e,t,!1)}},makeChkClass:function(e,t){var n=u.checkbox,o=u.radio,a="",r=f.nodeChecked(e,t);a=!0===t.chkDisabled?n.DISABLED:t.halfCheck?n.PART:e.check.chkStyle==o.STYLE?t.check_Child_State<1?n.FULL:n.PART:r?2===t.check_Child_State||-1===t.check_Child_State?n.FULL:n.PART:t.check_Child_State<1?n.FULL:n.PART;var d=e.check.chkStyle+"_"+(r?n.TRUE:n.FALSE)+"_"+a;return d=t.check_Focus&&!0!==t.chkDisabled?d+"_"+n.FOCUS:d,u.className.BUTTON+" "+n.DEFAULT+" "+d},repairAllChk:function(e,t){if(e.check.enable&&e.check.chkStyle===u.checkbox.STYLE)for(var n=f.getRoot(e),o=f.nodeChildren(e,n),a=0,r=o.length;a<r;a++){var d=o[a];!0!==d.nocheck&&!0!==d.chkDisabled&&f.nodeChecked(e,d,t),h.setSonNodeCheckBox(e,d,t)}},repairChkClass:function(e,t){if(t&&(f.makeChkFlag(e,t),!0!==t.nocheck)){var n=p(t,u.id.CHECK,e);h.setChkClass(e,n,t)}},repairParentChkClass:function(e,t){if(t&&t.parentTId){var n=t.getParentNode();h.repairChkClass(e,n),h.repairParentChkClass(e,n)}},repairParentChkClassWithSelf:function(e,t){if(t){var n=f.nodeChildren(e,t);n&&0<n.length?h.repairParentChkClass(e,n[0]):h.repairParentChkClass(e,t)}},repairSonChkDisabled:function(e,t,n,o){if(t){t.chkDisabled!=n&&(t.chkDisabled=n),h.repairChkClass(e,t);var a=f.nodeChildren(e,t);if(a&&o)for(var r=0,d=a.length;r<d;r++){var i=a[r];h.repairSonChkDisabled(e,i,n,o)}}},repairParentChkDisabled:function(e,t,n,o){t&&(t.chkDisabled!=n&&o&&(t.chkDisabled=n),h.repairChkClass(e,t),h.repairParentChkDisabled(e,t.getParentNode(),n,o))},setChkClass:function(e,t,n){t&&(!0===n.nocheck?t.hide():t.show(),t.attr("class",h.makeChkClass(e,n)))},setParentNodeCheckBox:function(e,t,n,o){var a=p(t,u.id.CHECK,e);if(o||(o=t),f.makeChkFlag(e,t),!0!==t.nocheck&&!0!==t.chkDisabled&&(f.nodeChecked(e,t,n),h.setChkClass(e,a,t),e.check.autoCheckTrigger&&t!=o&&e.treeObj.trigger(u.event.CHECK,[null,e.treeId,t])),t.parentTId){var r=!0;if(!n)for(var d=f.nodeChildren(e,t.getParentNode()),i=0,s=d.length;i<s;i++){var l=d[i],c=f.nodeChecked(e,l);if(!0!==l.nocheck&&!0!==l.chkDisabled&&c||(!0===l.nocheck||!0===l.chkDisabled)&&0<l.check_Child_State){r=!1;break}}r&&h.setParentNodeCheckBox(e,t.getParentNode(),n,o)}},setSonNodeCheckBox:function(e,t,n,o){if(t){var a=p(t,u.id.CHECK,e);o||(o=t);var r=!1,d=f.nodeChildren(e,t);if(d)for(var i=0,s=d.length;i<s;i++){var l=d[i];h.setSonNodeCheckBox(e,l,n,o),!0===l.chkDisabled&&(r=!0)}t!=f.getRoot(e)&&!0!==t.chkDisabled&&(r&&!0!==t.nocheck&&f.makeChkFlag(e,t),!0!==t.nocheck&&!0!==t.chkDisabled?(f.nodeChecked(e,t,n),r||(t.check_Child_State=d&&0<d.length?n?2:0:-1)):t.check_Child_State=-1,h.setChkClass(e,a,t),e.check.autoCheckTrigger&&t!=o&&!0!==t.nocheck&&!0!==t.chkDisabled&&e.treeObj.trigger(u.event.CHECK,[null,e.treeId,t]))}}},event:{},data:{getRadioCheckedList:function(e){for(var t=f.getRoot(e).radioCheckedList,n=0,o=t.length;n<o;n++)f.getNodeCache(e,t[n].tId)||(t.splice(n,1),n--,o--);return t},getCheckStatus:function(e,t){if(!e.check.enable||t.nocheck||t.chkDisabled)return null;var n=f.nodeChecked(e,t);return{checked:n,half:t.halfCheck?t.halfCheck:e.check.chkStyle==u.radio.STYLE?2===t.check_Child_State:n?-1<t.check_Child_State&&t.check_Child_State<2:0<t.check_Child_State}},getTreeCheckedNodes:function(e,t,n,o){if(!t)return[];var a=n&&e.check.chkStyle==u.radio.STYLE&&e.check.radioType==u.radio.TYPE_ALL;o=o||[];for(var r=0,d=t.length;r<d;r++){var i=t[r],s=f.nodeChildren(e,i),l=f.nodeChecked(e,i);if(!0!==i.nocheck&&!0!==i.chkDisabled&&l==n&&(o.push(i),a))break;if(f.getTreeCheckedNodes(e,s,n,o),a&&0<o.length)break}return o},getTreeChangeCheckedNodes:function(e,t,n){if(!t)return[];n=n||[];for(var o=0,a=t.length;o<a;o++){var r=t[o],d=f.nodeChildren(e,r),i=f.nodeChecked(e,r);!0!==r.nocheck&&!0!==r.chkDisabled&&i!=r.checkedOld&&n.push(r),f.getTreeChangeCheckedNodes(e,d,n)}return n},makeChkFlag:function(e,t){if(t){var n=-1,o=f.nodeChildren(e,t);if(o)for(var a=0,r=o.length;a<r;a++){var d=o[a],i=f.nodeChecked(e,d),s=-1;if(e.check.chkStyle==u.radio.STYLE){if(2==(s=!0===d.nocheck||!0===d.chkDisabled?d.check_Child_State:!0===d.halfCheck?2:i?2:0<d.check_Child_State?2:0)){n=2;break}0==s&&(n=0)}else if(e.check.chkStyle==u.checkbox.STYLE){if(1===(s=!0===d.nocheck||!0===d.chkDisabled?d.check_Child_State:!0===d.halfCheck?1:i?-1===d.check_Child_State||2===d.check_Child_State?2:1:0<d.check_Child_State?1:0)){n=1;break}if(2===s&&-1<n&&0<a&&s!==n){n=1;break}if(2===n&&-1<s&&s<2){n=1;break}-1<s&&(n=s)}}t.check_Child_State=n}}}};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,o);var a=e.fn.zTree,s=a._z.tools,u=a.consts,h=a._z.view,f=a._z.data,p=(a._z.event,s.$);f.nodeChecked=function(e,t,n){if(!t)return!1;var o=e.data.key.checked;return void 0!==n&&("string"==typeof n&&(n=s.eqs(n,"true")),n=!!n,t[o]=n),t[o]},f.exSetting(n),f.addInitBind(function(a){var e=a.treeObj,t=u.event;e.bind(t.CHECK,function(e,t,n,o){e.srcEvent=t,s.apply(a.callback.onCheck,[e,n,o])})}),f.addInitUnBind(function(e){var t=e.treeObj,n=u.event;t.unbind(n.CHECK)}),f.addInitCache(function(e){}),f.addInitNode(function(e,t,n,o,a,r,d){if(n){var i=f.nodeChecked(e,n);i=f.nodeChecked(e,n,i),n.checkedOld=i,"string"==typeof n.nocheck&&(n.nocheck=s.eqs(n.nocheck,"true")),n.nocheck=!!n.nocheck||e.check.nocheckInherit&&o&&!!o.nocheck,"string"==typeof n.chkDisabled&&(n.chkDisabled=s.eqs(n.chkDisabled,"true")),n.chkDisabled=!!n.chkDisabled||e.check.chkDisabledInherit&&o&&!!o.chkDisabled,"string"==typeof n.halfCheck&&(n.halfCheck=s.eqs(n.halfCheck,"true")),n.halfCheck=!!n.halfCheck,n.check_Child_State=-1,n.check_Focus=!1,n.getCheckStatus=function(){return f.getCheckStatus(e,n)},e.check.chkStyle==u.radio.STYLE&&e.check.radioType==u.radio.TYPE_ALL&&i&&f.getRoot(e).radioCheckedList.push(n)}}),f.addInitProxy(function(e){var t=e.target,n=f.getSetting(e.data.treeId),o="",a=null,r="",d=null;if(s.eqs(e.type,"mouseover")?n.check.enable&&s.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+u.id.CHECK)&&(o=s.getNodeMainDom(t).id,r="mouseoverCheck"):s.eqs(e.type,"mouseout")?n.check.enable&&s.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+u.id.CHECK)&&(o=s.getNodeMainDom(t).id,r="mouseoutCheck"):s.eqs(e.type,"click")&&n.check.enable&&s.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+u.id.CHECK)&&(o=s.getNodeMainDom(t).id,r="checkNode"),0<o.length)switch(a=f.getNodeCache(n,o),r){case"checkNode":d=i.onCheckNode;break;case"mouseoverCheck":d=i.onMouseoverCheck;break;case"mouseoutCheck":d=i.onMouseoutCheck}return{stop:"checkNode"===r,node:a,nodeEventType:r,nodeEventCallback:d,treeEventType:"",treeEventCallback:null}},!0),f.addInitRoot(function(e){f.getRoot(e).radioCheckedList=[]}),f.addBeforeA(function(e,t,n){e.check.enable&&(f.makeChkFlag(e,t),n.push("<span ID='",t.tId,u.id.CHECK,"' class='",h.makeChkClass(e,t),"' treeNode",u.id.CHECK,!0===t.nocheck?" style='display:none;'":"","></span>"))}),f.addZTreeTools(function(d,o){o.checkNode=function(e,t,n,o){var a=f.nodeChecked(d,e);if(!0!==e.chkDisabled&&(!0!==t&&!1!==t&&(t=!a),o=!!o,(a!==t||n)&&(!o||0!=s.apply(this.setting.callback.beforeCheck,[this.setting.treeId,e],!0))&&s.uCanDo(this.setting)&&this.setting.check.enable&&!0!==e.nocheck)){f.nodeChecked(d,e,t);var r=p(e,u.id.CHECK,this.setting);(n||this.setting.check.chkStyle===u.radio.STYLE)&&h.checkNodeRelation(this.setting,e),h.setChkClass(this.setting,r,e),h.repairParentChkClassWithSelf(this.setting,e),o&&this.setting.treeObj.trigger(u.event.CHECK,[null,this.setting.treeId,e])}},o.checkAllNodes=function(e){h.repairAllChk(this.setting,!!e)},o.getCheckedNodes=function(e){e=!1!==e;var t=f.nodeChildren(d,f.getRoot(this.setting));return f.getTreeCheckedNodes(this.setting,t,e)},o.getChangeCheckedNodes=function(){var e=f.nodeChildren(d,f.getRoot(this.setting));return f.getTreeChangeCheckedNodes(this.setting,e)},o.setChkDisabled=function(e,t,n,o){t=!!t,n=!!n,o=!!o,h.repairSonChkDisabled(this.setting,e,t,o),h.repairParentChkDisabled(this.setting,e.getParentNode(),t,n)};var a=o.updateNode;o.updateNode=function(e,t){if(a&&a.apply(o,arguments),e&&this.setting.check.enable&&p(e,this.setting).get(0)&&s.uCanDo(this.setting)){var n=p(e,u.id.CHECK,this.setting);1!=t&&this.setting.check.chkStyle!==u.radio.STYLE||h.checkNodeRelation(this.setting,e),h.setChkClass(this.setting,n,e),h.repairParentChkClassWithSelf(this.setting,e)}}});var r=h.createNodes;h.createNodes=function(e,t,n,o,a){r&&r.apply(h,arguments),n&&h.repairParentChkClassWithSelf(e,o)};var d=h.removeNode;h.removeNode=function(e,t){var n=t.getParentNode();d&&d.apply(h,arguments),t&&n&&(h.repairChkClass(e,n),h.repairParentChkClass(e,n))};var l=h.appendNodes;h.appendNodes=function(e,t,n,o,a,r,d){var i="";return l&&(i=l.apply(h,arguments)),o&&f.makeChkFlag(e,o),i}}(jQuery),function(Ce){var ke={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},l={onHoverOverNode:function(e,t){var n=Ee.getSetting(e.data.treeId),o=Ee.getRoot(n);o.curHoverNode!=t&&l.onHoverOutNode(e),o.curHoverNode=t,be.addHoverDom(n,t)},onHoverOutNode:function(e,t){var n=Ee.getSetting(e.data.treeId),o=Ee.getRoot(n);o.curHoverNode&&!Ee.isSelectedNode(n,o.curHoverNode)&&(be.removeTreeDom(n,o.curHoverNode),o.curHoverNode=null)},onMousedownNode:function(e,t){var n,o,Z=Ee.getSetting(e.data.treeId),Q=Ee.getRoot(Z),J=Ee.getRoots();if(2==e.button||!Z.edit.enable||!Z.edit.drag.isCopy&&!Z.edit.drag.isMove)return!0;var a=e.target,r=Ee.getRoot(Z).curSelectedList,ee=[];if(Ee.isSelectedNode(Z,t))for(n=0,o=r.length;n<o;n++){if(r[n].editNameFlag&&me.eqs(a.tagName,"input")&&null!==a.getAttribute("treeNode"+Te.id.INPUT))return!0;if(ee.push(r[n]),ee[0].parentTId!==r[n].parentTId){ee=[t];break}}else ee=[t];be.editNodeBlur=!0,be.cancelCurEditNode(Z);var te,ne,oe,ae,re,de=Ce(Z.treeObj.get(0).ownerDocument),ie=Ce(Z.treeObj.get(0).ownerDocument.body),se=!1,le=Z,s=Z,ce=null,ue=null,he=null,fe=Te.move.TYPE_INNER,pe=e.clientX,ge=e.clientY,Ne=(new Date).getTime();function l(e){if(0==Q.dragFlag&&Math.abs(pe-e.clientX)<Z.edit.drag.minMoveSize&&Math.abs(ge-e.clientY)<Z.edit.drag.minMoveSize)return!0;var t,n,o,a,r;if(ie.css("cursor","pointer"),0==Q.dragFlag){if(0==me.apply(Z.callback.beforeDrag,[Z.treeId,ee],!0))return ve(e),!0;for(t=0,n=ee.length;t<n;t++)0==t&&(Q.dragNodeShowBefore=[]),o=ee[t],Ee.nodeIsParent(Z,o)&&o.open?(be.expandCollapseNode(Z,o,!o.open),Q.dragNodeShowBefore[o.tId]=!0):Q.dragNodeShowBefore[o.tId]=!1;Q.dragFlag=1,J.showHoverDom=!1,me.showIfameMask(Z,!0);var d=!0,i=-1;if(1<ee.length){var s=ee[0].parentTId?Ee.nodeChildren(Z,ee[0].getParentNode()):Ee.getNodes(Z);for(r=[],t=0,n=s.length;t<n;t++)if(void 0!==Q.dragNodeShowBefore[s[t].tId]&&(d&&-1<i&&i+1!==t&&(d=!1),r.push(s[t]),i=t),ee.length===r.length){ee=r;break}}for(d&&(ae=ee[0].getPreNode(),re=ee[ee.length-1].getNextNode()),te=Ie("<ul class='zTreeDragUL'></ul>",Z),t=0,n=ee.length;t<n;t++)(o=ee[t]).editNameFlag=!1,be.selectNode(Z,o,0<t),be.removeTreeDom(Z,o),t>Z.edit.drag.maxShowNodeNum-1||((a=Ie("<li id='"+o.tId+"_tmp'></li>",Z)).append(Ie(o,Te.id.A,Z).clone()),a.css("padding","0"),a.children("#"+o.tId+Te.id.A).removeClass(Te.node.CURSELECTED),te.append(a),t==Z.edit.drag.maxShowNodeNum-1&&(a=Ie("<li id='"+o.tId+"_moretmp'><a>  ...  </a></li>",Z),te.append(a)));te.attr("id",ee[0].tId+Te.id.UL+"_tmp"),te.addClass(Z.treeObj.attr("class")),te.appendTo(ie),(ne=Ie("<span class='tmpzTreeMove_arrow'></span>",Z)).attr("id","zTreeMove_arrow_tmp"),ne.appendTo(ie),Z.treeObj.trigger(Te.event.DRAG,[e,Z.treeId,ee])}if(1==Q.dragFlag){if(oe&&ne.attr("id")==e.target.id&&he&&e.clientX+de.scrollLeft()+2>Ce("#"+he+Te.id.A,oe).offset().left){var l=Ce("#"+he+Te.id.A,oe);e.target=0<l.length?l.get(0):e.target}else oe&&(oe.removeClass(Te.node.TMPTARGET_TREE),he&&Ce("#"+he+Te.id.A,oe).removeClass(Te.node.TMPTARGET_NODE+"_"+Te.move.TYPE_PREV).removeClass(Te.node.TMPTARGET_NODE+"_"+ke.move.TYPE_NEXT).removeClass(Te.node.TMPTARGET_NODE+"_"+ke.move.TYPE_INNER));he=oe=null,se=!1,le=Z;var c=Ee.getSettings();for(var u in c)c[u].treeId&&c[u].edit.enable&&c[u].treeId!=Z.treeId&&(e.target.id==c[u].treeId||0<Ce(e.target).parents("#"+c[u].treeId).length)&&(se=!0,le=c[u]);var h=de.scrollTop(),f=de.scrollLeft(),p=le.treeObj.offset(),g=le.treeObj.get(0).scrollHeight,N=le.treeObj.get(0).scrollWidth,v=e.clientY+h-p.top,C=le.treeObj.height()+p.top-e.clientY-h,k=e.clientX+f-p.left,m=le.treeObj.width()+p.left-e.clientX-f,T=v<Z.edit.drag.borderMax&&v>Z.edit.drag.borderMin,b=C<Z.edit.drag.borderMax&&C>Z.edit.drag.borderMin,E=k<Z.edit.drag.borderMax&&k>Z.edit.drag.borderMin,I=m<Z.edit.drag.borderMax&&m>Z.edit.drag.borderMin,y=v>Z.edit.drag.borderMin&&C>Z.edit.drag.borderMin&&k>Z.edit.drag.borderMin&&m>Z.edit.drag.borderMin,w=T&&le.treeObj.scrollTop()<=0,S=b&&le.treeObj.scrollTop()+le.treeObj.height()+10>=g,P=E&&le.treeObj.scrollLeft()<=0,L=I&&le.treeObj.scrollLeft()+le.treeObj.width()+10>=N;if(e.target&&me.isChildOrSelf(e.target,le.treeId)){for(var _=e.target;_&&_.tagName&&!me.eqs(_.tagName,"li")&&_.id!=le.treeId;)_=_.parentNode;var O=!0;for(t=0,n=ee.length;t<n;t++){if(o=ee[t],_.id===o.tId){O=!1;break}if(0<Ie(o,Z).find("#"+_.id).length){O=!1;break}}O&&e.target&&me.isChildOrSelf(e.target,_.id+Te.id.A)&&(oe=Ce(_),he=_.id)}o=ee[0],y&&me.isChildOrSelf(e.target,le.treeId)&&(!oe&&(e.target.id==le.treeId||w||S||P||L)&&(se||!se&&o.parentTId)&&(oe=le.treeObj),T?le.treeObj.scrollTop(le.treeObj.scrollTop()-10):b&&le.treeObj.scrollTop(le.treeObj.scrollTop()+10),E?le.treeObj.scrollLeft(le.treeObj.scrollLeft()-10):I&&le.treeObj.scrollLeft(le.treeObj.scrollLeft()+10),oe&&oe!=le.treeObj&&oe.offset().left<le.treeObj.offset().left&&le.treeObj.scrollLeft(le.treeObj.scrollLeft()+oe.offset().left-le.treeObj.offset().left)),te.css({top:e.clientY+h+3+"px",left:e.clientX+f+3+"px"});var R=0,D=0;if(oe&&oe.attr("id")!=le.treeId){var A=null==he?null:Ee.getNodeCache(le,he),x=(e.ctrlKey||e.metaKey)&&Z.edit.drag.isMove&&Z.edit.drag.isCopy||!Z.edit.drag.isMove&&Z.edit.drag.isCopy,M=!(!ae||he!==ae.tId),F=!(!re||he!==re.tId),H=o.parentTId&&o.parentTId==he,j=(x||!F)&&me.apply(le.edit.drag.prev,[le.treeId,ee,A],!!le.edit.drag.prev),$=(x||!M)&&me.apply(le.edit.drag.next,[le.treeId,ee,A],!!le.edit.drag.next),U=(x||!H)&&!(le.data.keep.leaf&&!Ee.nodeIsParent(Z,A))&&me.apply(le.edit.drag.inner,[le.treeId,ee,A],!!le.edit.drag.inner);function z(){oe=null,he="",fe=Te.move.TYPE_INNER,ne.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}if(j||$||U){var B=Ce("#"+he+Te.id.A,oe),Y=A.isLastNode?null:Ce("#"+A.getNextNode().tId+Te.id.A,oe.next()),K=B.offset().top,V=B.offset().left,W=j?U?.25:$?.5:1:-1,q=$?U?.75:j?.5:0:-1,G=(e.clientY+h-K)/B.height();if((1==W||G<=W&&-.2<=G)&&j?(R=1-ne.width(),D=K-ne.height()/2,fe=Te.move.TYPE_PREV):(0==q||q<=G&&G<=1.2)&&$?(R=1-ne.width(),D=null==Y||Ee.nodeIsParent(Z,A)&&A.open?K+B.height()-ne.height()/2:Y.offset().top-ne.height()/2,fe=Te.move.TYPE_NEXT):U?(R=5-ne.width(),D=K,fe=Te.move.TYPE_INNER):z(),oe&&(ne.css({display:"block",top:D+"px",left:V+R+"px"}),B.addClass(Te.node.TMPTARGET_NODE+"_"+fe),ce==he&&ue==fe||(Ne=(new Date).getTime()),A&&Ee.nodeIsParent(Z,A)&&fe==Te.move.TYPE_INNER)){var X=!0;window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==A.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===A.tId&&(X=!1),X&&(window.zTreeMoveTimer=setTimeout(function(){fe==Te.move.TYPE_INNER&&A&&Ee.nodeIsParent(Z,A)&&!A.open&&(new Date).getTime()-Ne>le.edit.drag.autoOpenTime&&me.apply(le.callback.beforeDragOpen,[le.treeId,A],!0)&&(be.switchNode(le,A),le.edit.drag.autoExpandTrigger&&le.treeObj.trigger(Te.event.EXPAND,[le.treeId,A]))},le.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=A.tId)}}else z()}else fe=Te.move.TYPE_INNER,oe&&me.apply(le.edit.drag.inner,[le.treeId,ee,null],!!le.edit.drag.inner)?oe.addClass(Te.node.TMPTARGET_TREE):oe=null,ne.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);ce=he,ue=fe,Z.treeObj.trigger(Te.event.DRAGMOVE,[e,Z.treeId,ee])}return!1}function ve(o){if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),ue=ce=null,de.unbind("mousemove",l),de.unbind("mouseup",ve),de.unbind("selectstart",c),ie.css("cursor",""),oe&&(oe.removeClass(Te.node.TMPTARGET_TREE),he&&Ce("#"+he+Te.id.A,oe).removeClass(Te.node.TMPTARGET_NODE+"_"+Te.move.TYPE_PREV).removeClass(Te.node.TMPTARGET_NODE+"_"+ke.move.TYPE_NEXT).removeClass(Te.node.TMPTARGET_NODE+"_"+ke.move.TYPE_INNER)),me.showIfameMask(Z,!1),J.showHoverDom=!0,0!=Q.dragFlag){var e,t,n;for(e=Q.dragFlag=0,t=ee.length;e<t;e++)n=ee[e],Ee.nodeIsParent(Z,n)&&Q.dragNodeShowBefore[n.tId]&&!n.open&&(be.expandCollapseNode(Z,n,!n.open),delete Q.dragNodeShowBefore[n.tId]);te&&te.remove(),ne&&ne.remove();var a=(o.ctrlKey||o.metaKey)&&Z.edit.drag.isMove&&Z.edit.drag.isCopy||!Z.edit.drag.isMove&&Z.edit.drag.isCopy;if(!a&&oe&&he&&ee[0].parentTId&&he==ee[0].parentTId&&fe==Te.move.TYPE_INNER&&(oe=null),oe){var r=null==he?null:Ee.getNodeCache(le,he);if(0==me.apply(Z.callback.beforeDrop,[le.treeId,ee,r,fe,a],!0))return void be.selectNodes(s,ee);var d=a?me.clone(ee):ee;function i(){if(se){if(!a)for(var e=0,t=ee.length;e<t;e++)be.removeNode(Z,ee[e]);fe==Te.move.TYPE_INNER?be.addNodes(le,r,-1,d):be.addNodes(le,r.getParentNode(),fe==Te.move.TYPE_PREV?r.getIndex():r.getIndex()+1,d)}else if(a&&fe==Te.move.TYPE_INNER)be.addNodes(le,r,-1,d);else if(a)be.addNodes(le,r.getParentNode(),fe==Te.move.TYPE_PREV?r.getIndex():r.getIndex()+1,d);else if(fe!=Te.move.TYPE_NEXT)for(e=0,t=d.length;e<t;e++)be.moveNode(le,r,d[e],fe,!1);else for(e=-1,t=d.length-1;e<t;t--)be.moveNode(le,r,d[t],fe,!1);be.selectNodes(le,d);var n=Ie(d[0],Z).get(0);be.scrollIntoView(Z,n),Z.treeObj.trigger(Te.event.DROP,[o,le.treeId,d,r,fe,a])}fe==Te.move.TYPE_INNER&&me.canAsync(le,r)?be.asyncNode(le,r,!1,i):i()}else be.selectNodes(s,ee),Z.treeObj.trigger(Te.event.DROP,[o,Z.treeId,ee,null,null,null])}}function c(){return!1}return me.uCanDo(Z)&&de.bind("mousemove",l),de.bind("mouseup",ve),de.bind("selectstart",c),!0}},e={tools:{getAbs:function(e){var t=e.getBoundingClientRect(),n=document.body.scrollTop+document.documentElement.scrollTop,o=document.body.scrollLeft+document.documentElement.scrollLeft;return[t.left+o,t.top+n]},inputFocus:function(e){e.get(0)&&(e.focus(),me.setCursorPosition(e.get(0),e.val().length))},inputSelect:function(e){e.get(0)&&(e.focus(),e.select())},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},showIfameMask:function(e,t){for(var n=Ee.getRoot(e);0<n.dragMaskList.length;)n.dragMaskList[0].remove(),n.dragMaskList.shift();if(t)for(var o=Ie("iframe",e),a=0,r=o.length;a<r;a++){var d=o.get(a),i=me.getAbs(d),s=Ie("<div id='zTreeMask_"+a+"' class='zTreeMask' style='top:"+i[1]+"px; left:"+i[0]+"px; width:"+d.offsetWidth+"px; height:"+d.offsetHeight+"px;'></div>",e);s.appendTo(Ie("body",e)),n.dragMaskList.push(s)}}},view:{addEditBtn:function(e,t){if(!(t.editNameFlag||0<Ie(t,Te.id.EDIT,e).length)&&me.apply(e.edit.showRenameBtn,[e.treeId,t],e.edit.showRenameBtn)){var n=Ie(t,Te.id.A,e),o="<span class='"+Te.className.BUTTON+" edit' id='"+t.tId+Te.id.EDIT+"' title='"+me.apply(e.edit.renameTitle,[e.treeId,t],e.edit.renameTitle)+"' treeNode"+Te.id.EDIT+" style='display:none;'></span>";n.append(o),Ie(t,Te.id.EDIT,e).bind("click",function(){return me.uCanDo(e)&&0!=me.apply(e.callback.beforeEditName,[e.treeId,t],!0)&&be.editNode(e,t),!1}).show()}},addRemoveBtn:function(e,t){if(!(t.editNameFlag||0<Ie(t,Te.id.REMOVE,e).length)&&me.apply(e.edit.showRemoveBtn,[e.treeId,t],e.edit.showRemoveBtn)){var n=Ie(t,Te.id.A,e),o="<span class='"+Te.className.BUTTON+" remove' id='"+t.tId+Te.id.REMOVE+"' title='"+me.apply(e.edit.removeTitle,[e.treeId,t],e.edit.removeTitle)+"' treeNode"+Te.id.REMOVE+" style='display:none;'></span>";n.append(o),Ie(t,Te.id.REMOVE,e).bind("click",function(){return me.uCanDo(e)&&0!=me.apply(e.callback.beforeRemove,[e.treeId,t],!0)&&(be.removeNode(e,t),e.treeObj.trigger(Te.event.REMOVE,[e.treeId,t])),!1}).bind("mousedown",function(e){return!0}).show()}},addHoverDom:function(e,t){Ee.getRoots().showHoverDom&&(t.isHover=!0,e.edit.enable&&(be.addEditBtn(e,t),be.addRemoveBtn(e,t)),me.apply(e.view.addHoverDom,[e.treeId,t]))},cancelCurEditNode:function(e,t,n){var o=Ee.getRoot(e),a=o.curEditNode;if(a){var r=o.curEditInput,d=t||(n?Ee.nodeName(e,a):r.val());if(!1===me.apply(e.callback.beforeRename,[e.treeId,a,d,n],!0))return!1;Ee.nodeName(e,a,d),Ie(a,Te.id.A,e).removeClass(Te.node.CURSELECTED_EDIT),r.unbind(),be.setNodeName(e,a),a.editNameFlag=!1,o.curEditNode=null,o.curEditInput=null,be.selectNode(e,a,!1),e.treeObj.trigger(Te.event.RENAME,[e.treeId,a,n])}return o.noSelection=!0},editNode:function(t,e){var n=Ee.getRoot(t);if(be.editNodeBlur=!1,Ee.isSelectedNode(t,e)&&n.curEditNode==e&&e.editNameFlag)setTimeout(function(){me.inputFocus(n.curEditInput)},0);else{e.editNameFlag=!0,be.removeTreeDom(t,e),be.cancelCurEditNode(t),be.selectNode(t,e,!1),Ie(e,Te.id.SPAN,t).html("<input type=text class='rename' id='"+e.tId+Te.id.INPUT+"' treeNode"+Te.id.INPUT+" >");var o=Ie(e,Te.id.INPUT,t);o.attr("value",Ee.nodeName(t,e)),t.edit.editNameSelectAll?me.inputSelect(o):me.inputFocus(o),o.bind("blur",function(e){be.editNodeBlur||be.cancelCurEditNode(t)}).bind("keydown",function(e){"13"==e.keyCode?(be.editNodeBlur=!0,be.cancelCurEditNode(t)):"27"==e.keyCode&&be.cancelCurEditNode(t,null,!0)}).bind("click",function(e){return!1}).bind("dblclick",function(e){return!1}),Ie(e,Te.id.A,t).addClass(Te.node.CURSELECTED_EDIT),n.curEditInput=o,n.noSelection=!1,n.curEditNode=e}},moveNode:function(e,t,n,o,a,r){var d=Ee.getRoot(e);if(t!=n&&(!e.data.keep.leaf||!t||Ee.nodeIsParent(e,t)||o!=Te.move.TYPE_INNER)){var i=n.parentTId?n.getParentNode():d,s=null===t||t==d;s&&null===t&&(t=d),s&&(o=Te.move.TYPE_INNER);var l,c,u=t.parentTId?t.getParentNode():d;if(o!=Te.move.TYPE_PREV&&o!=Te.move.TYPE_NEXT&&(o=Te.move.TYPE_INNER),o==Te.move.TYPE_INNER&&(s?n.parentTId=null:(Ee.nodeIsParent(e,t)||(Ee.nodeIsParent(e,t,!0),t.open=!!t.open,be.setNodeLineIcos(e,t)),n.parentTId=t.tId)),s)c=l=e.treeObj;else{if(r||o!=Te.move.TYPE_INNER?r||be.expandCollapseNode(e,t.getParentNode(),!0,!1):be.expandCollapseNode(e,t,!0,!1),l=Ie(t,e),c=Ie(t,Te.id.UL,e),l.get(0)&&!c.get(0)){var h=[];be.makeUlHtml(e,t,h,""),l.append(h.join(""))}c=Ie(t,Te.id.UL,e)}var f=Ie(n,e);f.get(0)?l.get(0)||f.remove():f=be.appendNodes(e,n.level,[n],null,-1,!1,!0).join(""),c.get(0)&&o==Te.move.TYPE_INNER?c.append(f):l.get(0)&&o==Te.move.TYPE_PREV?l.before(f):l.get(0)&&o==Te.move.TYPE_NEXT&&l.after(f);var p,g,N=-1,v=0,C=null,k=null,m=n.level,T=Ee.nodeChildren(e,i),b=Ee.nodeChildren(e,u),E=Ee.nodeChildren(e,t);if(n.isFirstNode)N=0,1<T.length&&((C=T[1]).isFirstNode=!0);else if(n.isLastNode)(C=T[(N=T.length-1)-1]).isLastNode=!0;else for(p=0,g=T.length;p<g;p++)if(T[p].tId==n.tId){N=p;break}if(0<=N&&T.splice(N,1),o!=Te.move.TYPE_INNER)for(p=0,g=b.length;p<g;p++)b[p].tId==t.tId&&(v=p);if(o==Te.move.TYPE_INNER?(E||(E=Ee.nodeChildren(e,t,[])),0<E.length&&((k=E[E.length-1]).isLastNode=!1),E.splice(E.length,0,n),n.isLastNode=!0,n.isFirstNode=1==E.length):t.isFirstNode&&o==Te.move.TYPE_PREV?(b.splice(v,0,n),(k=t).isFirstNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!0,n.isLastNode=!1):t.isLastNode&&o==Te.move.TYPE_NEXT?(b.splice(v+1,0,n),(k=t).isLastNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!0):(o==Te.move.TYPE_PREV?b.splice(v,0,n):b.splice(v+1,0,n),n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!1),Ee.fixPIdKeyValue(e,n),Ee.setSonNodeLevel(e,n.getParentNode(),n),be.setNodeLineIcos(e,n),be.repairNodeLevelClass(e,n,m),!e.data.keep.parent&&T.length<1){Ee.nodeIsParent(e,i,!1),i.open=!1;var I=Ie(i,Te.id.UL,e),y=Ie(i,Te.id.SWITCH,e),w=Ie(i,Te.id.ICON,e);be.replaceSwitchClass(i,y,Te.folder.DOCU),be.replaceIcoClass(i,w,Te.folder.DOCU),I.css("display","none")}else C&&be.setNodeLineIcos(e,C);k&&be.setNodeLineIcos(e,k),e.check&&e.check.enable&&be.repairChkClass&&(be.repairChkClass(e,i),be.repairParentChkClassWithSelf(e,i),i!=n.parent&&be.repairParentChkClassWithSelf(e,n)),r||be.expandCollapseParentNode(e,n.getParentNode(),!0,a)}},removeEditBtn:function(e,t){Ie(t,Te.id.EDIT,e).unbind().remove()},removeRemoveBtn:function(e,t){Ie(t,Te.id.REMOVE,e).unbind().remove()},removeTreeDom:function(e,t){t.isHover=!1,be.removeEditBtn(e,t),be.removeRemoveBtn(e,t),me.apply(e.view.removeHoverDom,[e.treeId,t])},repairNodeLevelClass:function(e,t,n){if(n!==t.level){var o=Ie(t,e),a=Ie(t,Te.id.A,e),r=Ie(t,Te.id.UL,e),d=Te.className.LEVEL+n,i=Te.className.LEVEL+t.level;o.removeClass(d),o.addClass(i),a.removeClass(d),a.addClass(i),r.removeClass(d),r.addClass(i)}},selectNodes:function(e,t){for(var n=0,o=t.length;n<o;n++)be.selectNode(e,t[n],0<n)}},event:{},data:{setSonNodeLevel:function(e,t,n){if(n){var o=Ee.nodeChildren(e,n);if(n.level=t?t.level+1:0,o)for(var a=0,r=o.length;a<r;a++)o[a]&&Ee.setSonNodeLevel(e,n,o[a])}}}};Ce.extend(!0,Ce.fn.zTree.consts,ke),Ce.extend(!0,Ce.fn.zTree._z,e);var t=Ce.fn.zTree,me=t._z.tools,Te=t.consts,be=t._z.view,Ee=t._z.data,Ie=(t._z.event,me.$);Ee.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}}),Ee.addInitBind(function(i){var e=i.treeObj,t=Te.event;e.bind(t.RENAME,function(e,t,n,o){me.apply(i.callback.onRename,[e,t,n,o])}),e.bind(t.DRAG,function(e,t,n,o){me.apply(i.callback.onDrag,[t,n,o])}),e.bind(t.DRAGMOVE,function(e,t,n,o){me.apply(i.callback.onDragMove,[t,n,o])}),e.bind(t.DROP,function(e,t,n,o,a,r,d){me.apply(i.callback.onDrop,[t,n,o,a,r,d])})}),Ee.addInitUnBind(function(e){var t=e.treeObj,n=Te.event;t.unbind(n.RENAME),t.unbind(n.DRAG),t.unbind(n.DRAGMOVE),t.unbind(n.DROP)}),Ee.addInitCache(function(e){}),Ee.addInitNode(function(e,t,n,o,a,r,d){n&&(n.isHover=!1,n.editNameFlag=!1)}),Ee.addInitProxy(function(e){var t=e.target,n=Ee.getSetting(e.data.treeId),o=e.relatedTarget,a="",r=null,d="",i=null,s=null;if(me.eqs(e.type,"mouseover")?(s=me.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+Te.id.A}]))&&(a=me.getNodeMainDom(s).id,d="hoverOverNode"):me.eqs(e.type,"mouseout")?(s=me.getMDom(n,o,[{tagName:"a",attrName:"treeNode"+Te.id.A}]))||(a="remove",d="hoverOutNode"):me.eqs(e.type,"mousedown")&&(s=me.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+Te.id.A}]))&&(a=me.getNodeMainDom(s).id,d="mousedownNode"),0<a.length)switch(r=Ee.getNodeCache(n,a),d){case"mousedownNode":i=l.onMousedownNode;break;case"hoverOverNode":i=l.onHoverOverNode;break;case"hoverOutNode":i=l.onHoverOutNode}return{stop:!1,node:r,nodeEventType:d,nodeEventCallback:i,treeEventType:"",treeEventCallback:null}}),Ee.addInitRoot(function(e){var t=Ee.getRoot(e),n=Ee.getRoots();t.curEditNode=null,t.curEditInput=null,t.curHoverNode=null,t.dragFlag=0,t.dragNodeShowBefore=[],t.dragMaskList=new Array,n.showHoverDom=!0}),Ee.addZTreeTools(function(s,e){e.cancelEditName=function(e){Ee.getRoot(this.setting).curEditNode&&be.cancelCurEditNode(this.setting,e||null,!0)},e.copyNode=function(e,t,n,o){if(!t)return null;var a=Ee.nodeIsParent(s,e);if(e&&!a&&this.setting.data.keep.leaf&&n===Te.move.TYPE_INNER)return null;var r=this,d=me.clone(t);if(e||(e=null,n=Te.move.TYPE_INNER),n==Te.move.TYPE_INNER){function i(){be.addNodes(r.setting,e,-1,[d],o)}me.canAsync(this.setting,e)?be.asyncNode(this.setting,e,o,i):i()}else be.addNodes(this.setting,e.parentNode,-1,[d],o),be.moveNode(this.setting,e,d,n,!1,o);return d},e.editName=function(e){e&&e.tId&&e===Ee.getNodeCache(this.setting,e.tId)&&(e.parentTId&&be.expandCollapseParentNode(this.setting,e.getParentNode(),!0),be.editNode(this.setting,e))},e.moveNode=function(e,t,n,o){if(!t)return t;var a=Ee.nodeIsParent(s,e);if(e&&!a&&this.setting.data.keep.leaf&&n===Te.move.TYPE_INNER)return null;if(e&&(t.parentTId==e.tId&&n==Te.move.TYPE_INNER||0<Ie(t,this.setting).find("#"+e.tId).length))return null;e||(e=null);var r=this;function d(){be.moveNode(r.setting,e,t,n,!1,o)}return me.canAsync(this.setting,e)&&n===Te.move.TYPE_INNER?be.asyncNode(this.setting,e,o,d):d(),t},e.setEditable=function(e){return this.setting.edit.enable=e,this.refresh()}});var r=be.cancelPreSelectedNode;be.cancelPreSelectedNode=function(e,t){for(var n=Ee.getRoot(e).curSelectedList,o=0,a=n.length;o<a&&(t&&t!==n[o]||(be.removeTreeDom(e,n[o]),!t));o++);r&&r.apply(be,arguments)};var d=be.createNodes;be.createNodes=function(e,t,n,o,a){d&&d.apply(be,arguments),n&&be.repairParentChkClassWithSelf&&be.repairParentChkClassWithSelf(e,o)};var n=be.makeNodeUrl;be.makeNodeUrl=function(e,t){return e.edit.enable?null:n.apply(be,arguments)};var o=be.removeNode;be.removeNode=function(e,t){var n=Ee.getRoot(e);n.curEditNode===t&&(n.curEditNode=null),o&&o.apply(be,arguments)};var a=be.selectNode;be.selectNode=function(e,t,n){var o=Ee.getRoot(e);return(!Ee.isSelectedNode(e,t)||o.curEditNode!=t||!t.editNameFlag)&&(a&&a.apply(be,arguments),be.addHoverDom(e,t),!0)};var i=me.uCanDo;me.uCanDo=function(e,t){var n=Ee.getRoot(e);return!(!t||!(me.eqs(t.type,"mouseover")||me.eqs(t.type,"mouseout")||me.eqs(t.type,"mousedown")||me.eqs(t.type,"mouseup")))||(n.curEditNode&&(be.editNodeBlur=!1,n.curEditInput.focus()),!n.curEditNode&&(!i||i.apply(be,arguments)))}}(jQuery),function(e){var t={view:{clearOldFirstNode:function(e,t){for(var n=t.getNextNode();n;){if(n.isFirstNode){n.isFirstNode=!1,c.setNodeLineIcos(e,n);break}if(n.isLastNode)break;n=n.getNextNode()}},clearOldLastNode:function(e,t,n){for(var o=t.getPreNode();o;){if(o.isLastNode){o.isLastNode=!1,n&&c.setNodeLineIcos(e,o);break}if(o.isFirstNode)break;o=o.getPreNode()}},makeDOMNodeMainBefore:function(e,t,n){var o=u.isHidden(t,n);e.push("<li ",o?"style='display:none;' ":"","id='",n.tId,"' class='",r.className.LEVEL,n.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(e,t,n){u.isHidden(e,t,!1),u.initShowForExCheck(e,t),o(t,e).show()},showNodes:function(e,t,n){if(t&&0!=t.length){var o,a,r={};for(o=0,a=t.length;o<a;o++){var d=t[o];if(!r[d.parentTId]){var i=d.getParentNode();r[d.parentTId]=null===i?u.getRoot(e):d.getParentNode()}c.showNode(e,d,n)}for(var s in r){var l=u.nodeChildren(e,r[s]);c.setFirstNodeForShow(e,l),c.setLastNodeForShow(e,l)}}},hideNode:function(e,t,n){u.isHidden(e,t,!0),t.isFirstNode=!1,t.isLastNode=!1,u.initHideForExCheck(e,t),c.cancelPreSelectedNode(e,t),o(t,e).hide()},hideNodes:function(e,t,n){if(t&&0!=t.length){var o,a,r={};for(o=0,a=t.length;o<a;o++){var d=t[o];if((d.isFirstNode||d.isLastNode)&&!r[d.parentTId]){var i=d.getParentNode();r[d.parentTId]=null===i?u.getRoot(e):d.getParentNode()}c.hideNode(e,d,n)}for(var s in r){var l=u.nodeChildren(e,r[s]);c.setFirstNodeForHide(e,l),c.setLastNodeForHide(e,l)}}},setFirstNode:function(e,t){var n=u.nodeChildren(e,t),o=u.isHidden(e,n[0],!1);0<n.length&&!o?n[0].isFirstNode=!0:0<n.length&&c.setFirstNodeForHide(e,n)},setLastNode:function(e,t){var n=u.nodeChildren(e,t),o=u.isHidden(e,n[0]);0<n.length&&!o?n[n.length-1].isLastNode=!0:0<n.length&&c.setLastNodeForHide(e,n)},setFirstNodeForHide:function(e,t){var n,o,a;for(o=0,a=t.length;o<a&&!(n=t[o]).isFirstNode;o++){if(!u.isHidden(e,n)&&!n.isFirstNode){n.isFirstNode=!0,c.setNodeLineIcos(e,n);break}n=null}return n},setFirstNodeForShow:function(e,t){var n,o,a,r,d;for(o=0,a=t.length;o<a;o++){n=t[o];var i=u.isHidden(e,n);if(!r&&!i&&n.isFirstNode){r=n;break}if(r||i||n.isFirstNode){if(r&&n.isFirstNode){n.isFirstNode=!1,d=n,c.setNodeLineIcos(e,n);break}n=null}else n.isFirstNode=!0,r=n,c.setNodeLineIcos(e,n)}return{new:r,old:d}},setLastNodeForHide:function(e,t){var n,o;for(o=t.length-1;0<=o&&!(n=t[o]).isLastNode;o--){if(!u.isHidden(e,n)&&!n.isLastNode){n.isLastNode=!0,c.setNodeLineIcos(e,n);break}n=null}return n},setLastNodeForShow:function(e,t){var n,o,a,r;for(o=t.length-1;0<=o;o--){n=t[o];var d=u.isHidden(e,n);if(!a&&!d&&n.isLastNode){a=n;break}if(a||d||n.isLastNode){if(a&&n.isLastNode){n.isLastNode=!1,r=n,c.setNodeLineIcos(e,n);break}n=null}else n.isLastNode=!0,a=n,c.setNodeLineIcos(e,n)}return{new:a,old:r}}},data:{initHideForExCheck:function(e,t){u.isHidden(e,t)&&e.check&&e.check.enable&&(void 0===t._nocheck&&(t._nocheck=!!t.nocheck,t.nocheck=!0),t.check_Child_State=-1,c.repairParentChkClassWithSelf&&c.repairParentChkClassWithSelf(e,t))},initShowForExCheck:function(e,t){if(!u.isHidden(e,t)&&e.check&&e.check.enable){if(void 0!==t._nocheck&&(t.nocheck=t._nocheck,delete t._nocheck),c.setChkClass){var n=o(t,r.id.CHECK,e);c.setChkClass(e,n,t)}c.repairParentChkClassWithSelf&&c.repairParentChkClassWithSelf(e,t)}}}};e.extend(!0,e.fn.zTree._z,t);var n=e.fn.zTree,a=n._z.tools,r=n.consts,c=n._z.view,u=n._z.data,o=(n._z.event,a.$);u.isHidden=function(e,t,n){if(!t)return!1;var o=e.data.key.isHidden;return void 0!==n&&("string"==typeof n&&(n=a.eqs(checked,"true")),n=!!n,t[o]=n),t[o]},u.exSetting({data:{key:{isHidden:"isHidden"}}}),u.addInitNode(function(e,t,n,o,a,r,d){var i=u.isHidden(e,n);u.isHidden(e,n,i),u.initHideForExCheck(e,n)}),u.addBeforeA(function(e,t,n){}),u.addZTreeTools(function(a,r){r.showNodes=function(e,t){c.showNodes(a,e,t)},r.showNode=function(e,t){e&&c.showNodes(a,[e],t)},r.hideNodes=function(e,t){c.hideNodes(a,e,t)},r.hideNode=function(e,t){e&&c.hideNodes(a,[e],t)};var d=r.checkNode;d&&(r.checkNode=function(e,t,n,o){e&&u.isHidden(a,e)||d.apply(r,arguments)})});var s=u.initNode;u.initNode=function(e,t,n,o,a,r,d){var i=(o||u.getRoot(e))[e.data.key.children];u.tmpHideFirstNode=c.setFirstNodeForHide(e,i),u.tmpHideLastNode=c.setLastNodeForHide(e,i),d&&(c.setNodeLineIcos(e,u.tmpHideFirstNode),c.setNodeLineIcos(e,u.tmpHideLastNode)),u.tmpHideFirstNode,r=u.tmpHideLastNode===n,s&&s.apply(u,arguments),d&&r&&c.clearOldLastNode(e,n,d)};var d=u.makeChkFlag;d&&(u.makeChkFlag=function(e,t){t&&u.isHidden(e,t)||d.apply(u,arguments)});var i=u.getTreeCheckedNodes;i&&(u.getTreeCheckedNodes=function(e,t,n,o){if(t&&0<t.length){var a=t[0].getParentNode();if(a&&u.isHidden(e,a))return[]}return i.apply(u,arguments)});var l=u.getTreeChangeCheckedNodes;l&&(u.getTreeChangeCheckedNodes=function(e,t,n){if(t&&0<t.length){var o=t[0].getParentNode();if(o&&u.isHidden(e,o))return[]}return l.apply(u,arguments)});var h=c.expandCollapseSonNode;h&&(c.expandCollapseSonNode=function(e,t,n,o,a){t&&u.isHidden(e,t)||h.apply(c,arguments)});var f=c.setSonNodeCheckBox;f&&(c.setSonNodeCheckBox=function(e,t,n,o){t&&u.isHidden(e,t)||f.apply(c,arguments)});var p=c.repairParentChkClassWithSelf;p&&(c.repairParentChkClassWithSelf=function(e,t){t&&u.isHidden(e,t)||p.apply(c,arguments)})}(jQuery);
!function(k,r,g){k.noop=k.noop||function(){};var c,l=0,D=k(r),M=k(document),e=k("html"),t=document.documentElement,T=r.VBArray&&!r.XMLHttpRequest,u="createTouch"in document&&!("onmousemove"in t)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),z="artDialog"+ +new Date,f=function(t,e,i){"string"!=typeof(t=t||{})&&1!==t.nodeType||(t={content:t,fixed:!u});var n,o=f.defaults,a=t.follow=1===this.nodeType&&this||t.follow;for(var s in o)t[s]===g&&(t[s]=o[s]);return"string"==typeof a&&(a=k(a)[0]),t.id=a&&a[z+"follow"]||t.id||z+l,n=f.list[t.id],a&&n?n.follow(a).zIndex().focus():n?n.zIndex().focus():(u&&(t.fixed=!1),k.isArray(t.button)||(t.button=t.button?[t.button]:[]),e!==g&&(t.ok=e),i!==g&&(t.cancel=i),t.ok&&t.button.push({name:t.okVal,callback:t.ok,focus:!0}),t.cancel&&t.button.push({name:t.cancelVal,callback:t.cancel}),f.defaults.zIndex=t.zIndex,l++,f.list[t.id]=c?c._init(t):new f.fn._init(t))};f.fn=f.prototype={version:"4.1.7",closed:!0,_init:function(t){var e,i=this,n=t.icon,o=n&&(T?{png:"icons/"+n+".png"}:{backgroundImage:"url('"+t.path+"/skins/icons/"+n+".png')"});return i.closed=!1,i.config=t,i.DOM=e=i.DOM||i._getDOM(),e.wrap.addClass(t.skin),e.close[!1===t.cancel?"hide":"show"](),e.maximize[!1===t.maxable?"hide":"show"](),e.icon[0].style.display=n?"":"none",e.iconBg.css(o||{background:"none"}),e.se.css("cursor",t.resize?"se-resize":"auto"),e.title.css("cursor",t.drag?"move":"auto"),e.content.css("padding",t.padding),i[t.show?"show":"hide"](!0),i.button(t.button).title(t.title).content(t.content,!0).size(t.width,t.height).time(t.time),t.follow?i.follow(t.follow):i.position(t.left,t.top),i.zIndex().focus(),t.lock&&i.lock(),i._addEvent(),i._ie6PngFix(),c=null,t.init&&t.init.call(i,r),i},content:function(t){var e,i,n,o,a=this,s=a.DOM,l=s.wrap[0],r=l.offsetWidth,c=l.offsetHeight,d=parseInt(l.style.left),u=parseInt(l.style.top),f=l.style.width,p=s.content,h=p[0];return a._elemBack&&a._elemBack(),l.style.width="auto",t===g?h:("string"==typeof t?p.html(t):t&&1===t.nodeType&&(o=t.style.display,e=t.previousSibling,i=t.nextSibling,n=t.parentNode,a._elemBack=function(){e&&e.parentNode?e.parentNode.insertBefore(t,e.nextSibling):i&&i.parentNode?i.parentNode.insertBefore(t,i):n&&n.appendChild(t),t.style.display=o,a._elemBack=null},p.html(""),h.appendChild(t),t.style.display="block"),arguments[1]||(a.config.follow?a.follow(a.config.follow):(d-=(r=l.offsetWidth-r)/2,u-=(c=l.offsetHeight-c)/2,l.style.left=Math.max(d,0)+"px",l.style.top=Math.max(u,0)+"px"),f&&"auto"!==f&&(l.style.width=l.offsetWidth+"px"),a._autoPositionType()),a._ie6SelectFix(),a._runScript(h),a)},title:function(t){var e=this.DOM,i=e.wrap,n=e.title,o="aui_state_noTitle";return t===g?n[0]:(!1===t?(n.hide().html(""),i.addClass(o)):(n.show().html(t||""),i.removeClass(o)),this)},position:function(t,e){var i=this,n=i.config,o=i.DOM.wrap[0],a=!T&&n.fixed,s=T&&i.config.fixed,l=M.scrollLeft(),r=M.scrollTop(),c=a?0:l,d=a?0:r,u=D.width(),f=D.height(),p=o.offsetWidth,h=o.offsetHeight,m=o.style;return(t||0===t)&&(i._left=-1!==t.toString().indexOf("%")?t:null,"number"==typeof(t=i._toNumber(t,u-p))?(t=s?t+=l:t+c,m.left=Math.max(t,c)+"px"):"string"==typeof t&&(m.left=t)),(e||0===e)&&(i._top=-1!==e.toString().indexOf("%")?e:null,"number"==typeof(e=i._toNumber(e,f-h))?(e=s?e+=r:e+d,m.top=Math.max(e,d)+"px"):"string"==typeof e&&(m.top=e)),t!==g&&e!==g&&(i._follow=null,i._autoPositionType()),i},size:function(t,e){var i,n,o=this,a=(o.config,o.DOM),s=a.wrap,l=a.main,r=s[0].style,c=l[0].style;return t&&(o._width=-1!==t.toString().indexOf("%")?t:null,i=D.width()-s[0].offsetWidth+l[0].offsetWidth,"number"==typeof(t=o._toNumber(t,i))?(r.width="auto",c.width=Math.max(o.config.minWidth,t)+"px",r.width=s[0].offsetWidth+"px"):"string"==typeof t&&("auto"===(c.width=t)?s.css("width","auto"):s.css("width",o.config.width))),e&&(o._height=-1!==e.toString().indexOf("%")?e:null,n=D.height()-s[0].offsetHeight+l[0].offsetHeight,"number"==typeof(e=o._toNumber(e,n))?c.height=Math.max(o.config.minHeight,e)+"px":"string"==typeof e&&(c.height=e)),o._ie6SelectFix(),o},follow:function(t){var e,i=this,n=i.config;if(("string"==typeof t||t&&1===t.nodeType)&&(t=(e=k(t))[0]),!t||!t.offsetWidth&&!t.offsetHeight)return i.position(i._left,i._top);var o=z+"follow",a=D.width(),s=D.height(),l=M.scrollLeft(),r=M.scrollTop(),c=e.offset(),d=t.offsetWidth,u=t.offsetHeight,f=!T&&n.fixed,p=f?c.left-l:c.left,h=f?c.top-r:c.top,m=i.DOM.wrap[0],g=m.style,w=m.offsetWidth,_=m.offsetHeight,v=p-(w-d)/2,y=h+u,x=f?0:l,b=f?0:r;return v=v<x?p:a<v+w&&x<p-w?p-w+d:v,y=s+b<y+_&&b<h-_?h-_:y,g.left=v+"px",g.top=y+"px",i._follow&&i._follow.removeAttribute(o),(i._follow=t)[o]=n.id,i._autoPositionType(),i},button:function(){var a=this,t=arguments,e=a.DOM.buttons,s=e[0],l="aui_state_highlight",r=a._listeners=a._listeners||{},i=k.isArray(t[0])?t[0]:[].slice.call(t);return t[0]===g?s:(k.each(i,function(t,e){var i=e.name,n=!r[i],o=n?document.createElement("button"):r[i].elem;r[i]||(r[i]={}),e.callback&&(r[i].callback=e.callback),e.className&&(o.className=e.className),e.focus&&(a._focus&&a._focus.removeClass(l),a._focus=k(o).addClass(l),a.focus()),o.setAttribute("type","button"),o[z+"callback"]=i,o.disabled=!!e.disabled,n&&(o.innerHTML=i,r[i].elem=o,s.appendChild(o))}),e[0].style.display=i.length?"":"none",a._ie6SelectFix(),a)},show:function(){return this.DOM.wrap.show(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.show(),this},hide:function(){return this.DOM.wrap.hide(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.hide(),this},close:function(t){if(this.closed)return this;var e=this,i=e.DOM,n=i.wrap,o=f.list,a=e.config.close,s=e.config.follow;if(e.time(),"function"==typeof a&&!1===a.call(e,r,t))return e;for(var l in e.unlock(),e._elemBack&&e._elemBack(),n[0].className=n[0].style.cssText="",i.title.html(""),i.content.html(""),i.buttons.html(""),f.focus===e&&(f.focus=null),s&&s.removeAttribute(z+"follow"),delete o[e.config.id],e._removeEvent(),e.hide(!0)._setAbsolute(),e)e.hasOwnProperty(l)&&"DOM"!==l&&delete e[l];return c?n.remove():c=e,e},time:function(t){var e=this,i=e.config.cancelVal,n=e._timer;return n&&clearTimeout(n),t&&(e._timer=setTimeout(function(){e._click(i)},1e3*t)),e},focus:function(){try{if(this.config.focus){var t=this._focus&&this._focus[0]||this.DOM.close[0];t&&t.focus()}}catch(t){}return this},zIndex:function(){var t=this,e=t.DOM.wrap,i=f.focus,n=f.defaults.zIndex++;return e.css("zIndex",n),t._lockMask&&t._lockMask.css("zIndex",n-1),i&&i.DOM.wrap.removeClass("aui_state_focus"),f.focus=t,e.addClass("aui_state_focus"),t},lock:function(){if(this._lock)return this;var t=this,e=f.defaults.zIndex-1,i=t.DOM.wrap,n=t.config,o=M.width(),a=M.height(),s=t._lockMaskWrap||k(document.body.appendChild(document.createElement("div"))),l=t._lockMask||k(s[0].appendChild(document.createElement("div"))),r="(document).documentElement",c=u?"width:"+o+"px;height:"+a+"px":"width:100%;height:100%",d=T?"position:absolute;left:expression("+r+".scrollLeft);top:expression("+r+".scrollTop);width:expression("+r+".clientWidth);height:expression("+r+".clientHeight)":"";return t.zIndex(),i.addClass("aui_state_lock"),s[0].style.cssText=c+";position:fixed;z-index:"+e+";top:0;left:0;overflow:hidden;"+d,l[0].style.cssText="height:100%;background:"+n.background+";filter:alpha(opacity=0);opacity:0",T&&l.html('<iframe src="about:blank" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;filter:alpha(opacity=0)"></iframe>'),l.stop(),l.bind("click",function(){t._reset()}).bind("dblclick",function(){t._click(t.config.cancelVal)}),0===n.duration?l.css({opacity:n.opacity}):l.animate({opacity:n.opacity},n.duration),t._lockMaskWrap=s,t._lockMask=l,t._lock=!0,t},unlock:function(){var t=this,e=t._lockMaskWrap,i=t._lockMask;if(!t._lock)return t;var n=e[0].style,o=function(){T&&(n.removeExpression("width"),n.removeExpression("height"),n.removeExpression("left"),n.removeExpression("top")),n.cssText="display:none",c&&e.remove()};return i.stop().unbind(),t.DOM.wrap.removeClass("aui_state_lock"),t.config.duration?i.animate({opacity:0},t.config.duration,o):o(),t._lock=!1,t},_getDOM:function(){var t=document.createElement("div"),e=document.body;t.style.cssText="position:absolute;left:0;top:0",t.innerHTML=f._templates,e.insertBefore(t,e.firstChild);for(var i,n=0,o={wrap:k(t)},a=t.getElementsByTagName("*"),s=a.length;n<s;n++)(i=a[n].className.split("aui_")[1])&&(o[i]=k(a[n]));return o},_toNumber:function(t,e){if(!t&&0!==t||"number"==typeof t)return t;var i=t.length-1;return t.lastIndexOf("px")===i?t=parseInt(t):t.lastIndexOf("%")===i&&(t=parseInt(e*t.split("%")[0]/100)),t},_ie6PngFix:T?function(){for(var t,e,i,n,o=0,a=f.defaults.path+"/skins/",s=this.DOM.wrap[0].getElementsByTagName("*");o<s.length;o++)(e=(t=s[o]).currentStyle.png)&&(i=a+e,(n=t.runtimeStyle).backgroundImage="none",n.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"',sizingMethod='crop')")}:k.noop,_ie6SelectFix:T?function(){var t=this.DOM.wrap,e=t[0],i=z+"iframeMask",n=t[i],o=e.offsetWidth,a=e.offsetHeight;o+="px",a+="px",n?(n.style.width=o,n.style.height=a):(n=e.appendChild(document.createElement("iframe")),(t[i]=n).src="about:blank",n.style.cssText="position:absolute;z-index:-1;left:0;top:0;filter:alpha(opacity=0);width:"+o+";height:"+a)}:k.noop,_runScript:function(t){for(var e=0,i=0,n=t.getElementsByTagName("script"),o=n.length,a=[];e<o;e++)"text/dialog"===n[e].type&&(a[i]=n[e].innerHTML,i++);a.length&&(a=a.join(""),new Function(a).call(this))},_autoPositionType:function(){this[this.config.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:(T&&k(function(){var t="backgroundAttachment";"fixed"!==e.css(t)&&"fixed"!==k("body").css(t)&&e.css({zoom:1,backgroundImage:"url(about:blank)",backgroundAttachment:"fixed"})}),function(){var t=this.DOM.wrap,e=t[0].style;if(T){var i=parseInt(t.css("left")),n=parseInt(t.css("top")),o=M.scrollLeft(),a=M.scrollTop(),s="(document.documentElement)";this._setAbsolute(),e.setExpression("left","eval("+s+".scrollLeft + "+(i-o)+') + "px"'),e.setExpression("top","eval("+s+".scrollTop + "+(n-a)+') + "px"')}else e.position="fixed"}),_setAbsolute:function(){var t=this.DOM.wrap[0].style;T&&(t.removeExpression("left"),t.removeExpression("top")),t.position="absolute"},_click:function(t){var e=this,i=e._listeners[t]&&e._listeners[t].callback;return"function"!=typeof i||!1!==i.call(e,r)?e.close():e},_reset:function(t){var e=this,i=e._winSize||D.width()*D.height(),n=e._follow,o=e._width,a=e._height,s=e._left,l=e._top;t&&i===(e._winSize=D.width()*D.height())||((o||a)&&e.size(o,a),n?e.follow(n):(s||l)&&e.position(s,l))},_addEvent:function(){var t,n=this,o=n.config,e="CollectGarbage"in r,a=n.DOM;n._winResize=function(){t&&clearTimeout(t),t=setTimeout(function(){n._reset(e)},40)},D.bind("resize",n._winResize),a.wrap.bind("click",function(t){var e,i=t.target;return!i.disabled&&(i===a.close[0]?(n._click(o.cancelVal),!1):i==a.maximize[0]?(a.wrap.hasClass("aui_maximized")?(n.size(n.config.width,n.config.height).position(n.config.left,n.config.top),a.wrap.removeClass("aui_maximized")):(n.position(0,0).size("100%","100%"),a.wrap.addClass("aui_maximized")),!1):((e=i[z+"callback"])&&n._click(e),void n._ie6SelectFix()))}).bind("mousedown",function(){n.zIndex()})},_removeEvent:function(){this.DOM.wrap.unbind(),D.unbind("resize",this._winResize)}},f.fn._init.prototype=f.fn,k.fn.dialog=k.fn.artDialog=function(){var t=arguments;return this[this.live?"live":"bind"]("click",function(){return f.apply(this,t),!1}),this},f.focus=null,f.get=function(t){return t===g?f.list:f.list[t]},f.list={},M.bind("keydown",function(t){var e=t.target.nodeName,i=f.focus,n=t.keyCode;i&&i.config.esc&&!/^INPUT|TEXTAREA$/.test(e)&&27===n&&i._click(i.config.cancelVal)}),f._templates='<div class="aui_outer">   <table class="aui_border">       <tbody>       <tr>           <td class="aui_nw"></td>           <td class="aui_n"></td>           <td class="aui_ne"></td>       </tr>       <tr>           <td class="aui_w"></td>           <td class="aui_c">               <div class="aui_inner">                   <table class="aui_dialog">                       <tbody>                       <tr>                           <td colspan="2" class="aui_header">                               <div class="aui_titleBar">                               <div class="aui_title"></div>                                   <a class="aui_close" href="javascript:/*artDialog*/;"></a>                                   <a class="aui_maximize" href="javascript:/*artDialog*/;"></a>                               </div>                           </td>                       </tr>                       <tr>                           <td class="aui_icon">                               <div class="aui_iconBg"></div>                           </td>                           <td class="aui_main">                               <div class="aui_content"></div>                           </td>                       </tr>                       <tr>                           <td colspan="2" class="aui_footer">                               <div class="aui_buttons"></div>                           </td>                       </tr>                       </tbody>                   </table>               </div>           </td>           <td class="aui_e"></td>       </tr>       <tr>           <td class="aui_sw"></td>           <td class="aui_s"></td>           <td class="aui_se"></td>       </tr>       </tbody>   </table></div>',f.defaults={content:'<div class="aui_loading"><span>loading..</span></div>',title:"消息",button:null,ok:null,cancel:null,init:null,close:null,okVal:"确定",cancelVal:"取消",maxable:!1,width:"auto",height:"auto",minWidth:96,minHeight:32,padding:"0",skin:"",icon:null,time:null,esc:!0,focus:!1,show:!0,follow:null,path:void 0,lock:!1,background:"#000",opacity:.3,duration:0,fixed:!1,left:"50%",top:"38.2%",zIndex:1987,resize:!0,drag:!0},r.artDialog=k.dialog=k.artDialog=f}(this.art||this.jQuery&&(this.art=jQuery),this),function(_){var x,a,b=_(window),k=_(document),t=document.documentElement,D=!("minWidth"in t.style),M="onlosecapture"in t,T="setCapture"in t;artDialog.dragEvent=function(){var i=this,t=function(t){var e=i[t];i[t]=function(){return e.apply(i,arguments)}};t("start"),t("move"),t("end")},artDialog.dragEvent.prototype={onstart:_.noop,start:function(t){return k.bind("mousemove",this.move).bind("mouseup",this.end),this._sClientX=t.clientX,this._sClientY=t.clientY,this.onstart(t.clientX,t.clientY),!1},onmove:_.noop,move:function(t){return this._mClientX=t.clientX,this._mClientY=t.clientY,this.onmove(t.clientX-this._sClientX,t.clientY-this._sClientY),!1},onend:_.noop,end:function(t){return k.unbind("mousemove",this.move).unbind("mouseup",this.end),this.onend(t.clientX,t.clientY),!1}},a=function(t){var r,c,d,u,f,p,e,i,n,o,a,s,l,h,m=artDialog.focus,g=m.DOM,w=g.wrap,_=g.title,v=g.main,y="getSelection"in window?function(){window.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(t){}};x.onstart=function(t,e){p?(c=v[0].offsetWidth,d=v[0].offsetHeight):(u=w[0].offsetLeft,f=w[0].offsetTop),k.bind("dblclick",x.end),!D&&M?_.bind("losecapture",x.end):b.bind("blur",x.end),T&&_[0].setCapture(),w.addClass("aui_state_drag"),m.focus()},x.onmove=function(t,e){if(p){var i=w[0].style,n=v[0].style,o=t+c,a=e+d;i.width="auto",n.width=Math.max(0,o)+"px",i.width=w[0].offsetWidth+"px",n.height=Math.max(0,a)+"px"}else{n=w[0].style;var s=Math.max(r.minX,Math.min(r.maxX,t+u)),l=Math.max(r.minY,Math.min(r.maxY,e+f));n.left=s+"px",n.top=l+"px"}y(),m._ie6SelectFix()},x.onend=function(t,e){k.unbind("dblclick",x.end),!D&&M?_.unbind("losecapture",x.end):b.unbind("blur",x.end),T&&_[0].releaseCapture(),D&&!m.closed&&m._autoPositionType(),w.removeClass("aui_state_drag")},p=t.target===g.se[0],e=m.DOM.wrap[0],i="fixed"===e.style.position,n=e.offsetWidth,o=e.offsetHeight,a=b.width(),s=b.height(),l=i?0:k.scrollLeft(),h=i?0:k.scrollTop(),r={minX:l,minY:h,maxX:a-n+l,maxY:s-o+h},x.start(t)},k.bind("mousedown",function(t){var e=artDialog.focus;if(e){var i=t.target,n=e.config,o=e.DOM;return!1!==n.drag&&i===o.title[0]||!1!==n.resize&&i===o.se[0]?(x=x||new artDialog.dragEvent,a(t),!1):void 0}});var e,v,s,o="@ARTDIALOG.DATA",y="@ARTDIALOG.OPEN",z="@ARTDIALOG.OPENER",i=window.name=window.name||"@ARTDIALOG.WINNAME"+ +new Date;D=window.VBArray&&!window.XMLHttpRequest;_(function(){!window.jQuery&&"BackCompat"===document.compatMode&&alert('artDialog Error: document.compatMode === "BackCompat"')});var n,l,r=artDialog.top=(n=window,(l=function(t){try{var e=window[t].document;e.getElementsByTagName}catch(t){return!1}return window[t].artDialog&&0===e.getElementsByTagName("frameset").length})("top")?n=window.top:l("parent")&&(n=window.parent),n);artDialog.parent=r,e=r.artDialog,s=function(){return e.defaults.zIndex},artDialog.data=function(t,e){var i=artDialog.top,n=i[o]||{};return i[o]=n,void 0===e?n[t]:(n[t]=e,n)},artDialog.removeData=function(t){var e=artDialog.top[o];e&&e[t]&&delete e[t]},artDialog.through=v=function(){var t=e.apply(this,arguments);return r!==window&&(artDialog.list[t.config.id]=t),t},r!==window&&_(window).bind("unload",function(){var t,e=artDialog.list;for(var i in e)e[i]&&((t=e[i].config)&&(t.duration=0),e[i].close())}),artDialog.open=function(t,o,e){o=o||{};var a,s,l,r,i,c,d,u,f=artDialog.top,p="width:100%;height:100%;border:none 0";if(!1===e){var n=+new Date,h=t.replace(/([?&])_=[^&]*/,"$1_="+n);t=h+(h===t?(/\?/.test(t)?"&":"?")+"_="+n:"")}var m=function(){var t,e,i=s.content.find(".aui_loading"),n=a.config;l.addClass("aui_state_full"),i&&i.hide();try{d=r.contentWindow,c=_(d.document),u=d.document.body}catch(t){return r.style.cssText=p,n.follow?a.follow(n.follow):a.position(n.left,n.top),o.init&&o.init.call(a,d,f),void(o.init=null)}t="auto"===n.width?c.width()+(D?0:parseInt(_(u).css("marginLeft"))):n.width,e="auto"===n.height?c.height():n.height,setTimeout(function(){r.style.cssText=p},0),a.size(t,e),n.follow?a.follow(n.follow):a.position(n.left,n.top),o.init&&o.init.call(a,d,f),o.init=null},g={zIndex:o.zIndex,init:function(){s=(a=this).DOM,s.main,l=s.content,(r=a.iframe=f.document.createElement("iframe")).src=t,r.width="auto"===a.config.width?"100%":a.config.width,r.height="auto"===a.config.height?"100%":a.config.height,r.name="Open"+a.config.id,r.style.cssText="position:absolute;left:-9999em;top:-9999em;border:none 0;background:transparent",r.setAttribute("frameborder",0,0),r.setAttribute("allowTransparency",!0),i=_(r),a.content().appendChild(r),d=r.contentWindow;try{d.name=r.name,artDialog.data(r.name+y,a),artDialog.data(r.name+z,window)}catch(t){}i.bind("load",m)},close:function(t,e){if(i.css("display","none").unbind("load",m),o.close&&!1===o.close.call(this,e,r.contentWindow,f,t))return!1;l.removeClass("aui_state_full"),i[0].src="about:blank",i.remove();try{artDialog.removeData(r.name+y),artDialog.removeData(r.name+z)}catch(t){}}};for(var w in"function"==typeof o.ok&&(g.ok=function(){return o.ok.call(a,r.contentWindow,f)}),"function"==typeof o.cancel&&(g.cancel=function(){return o.cancel.call(a,r.contentWindow,f)}),delete o.content,o)void 0===g[w]&&(g[w]=o[w]);return v(g)},artDialog.open.api=artDialog.data(i+y),artDialog.opener=artDialog.data(i+z)||window,artDialog.open.origin=artDialog.opener,artDialog.close=function(t){var e=artDialog.data(i+y);return e&&e.close(t),!1},r!=window&&_(document).bind("mousedown",function(){var t=artDialog.open.api;t&&t.zIndex()}),artDialog.load=function(t,e,n){n=n||!1;var o=e||{},i={zIndex:s(),init:function(e){var i=this;i.config;_.ajax({url:t,success:function(t){i.content(t),o.init&&o.init.call(i,e)},cache:n})}};for(var a in delete e.content,o)void 0===i[a]&&(i[a]=o[a]);return v(i)},artDialog.alert=function(t,e){return v({id:"Alert",zIndex:s(),icon:"warning",fixed:!0,lock:!0,content:t,ok:!0,close:e})},artDialog.confirm=function(t,e,i){return v({id:"Confirm",zIndex:s(),icon:"question",fixed:!0,lock:!0,opacity:.1,content:t,ok:function(t){return e.call(this,t)},cancel:function(t){return i&&i.call(this,t)}})},artDialog.prompt=function(t,e,i){var n;return i=i||"",v({id:"Prompt",zIndex:s(),icon:"question",fixed:!0,lock:!0,opacity:.1,content:['<div style="margin-bottom:5px;font-size:12px">',t,"</div>","<div>",'<input value="',i,'" style="width:18em;padding:6px 4px" />',"</div>"].join(""),init:function(){(n=this.DOM.content.find("input")[0]).select(),n.focus()},ok:function(t){return e&&e.call(this,n.value,t)},cancel:!0})},artDialog.tips=function(t,e){return v({id:"Tips",zIndex:s(),title:!1,cancel:!1,fixed:!0,lock:!1}).content('<div style="padding: 0 1em;">'+t+"</div>").time(e||1.5)},_(function(){var t=artDialog.dragEvent;if(t){var n=_(window),o=_(document),a=D?"absolute":"fixed",s=t.prototype,e=document.createElement("div"),l=e.style;l.cssText="display:none;position:"+a+";left:0;top:0;width:100%;height:100%;cursor:move;filter:alpha(opacity=0);opacity:0;background:#FFF",document.body.appendChild(e),s._start=s.start,s._end=s.end,s.start=function(){var t=artDialog.focus.DOM,e=t.main[0],i=t.content[0].getElementsByTagName("iframe")[0];s._start.apply(this,arguments),l.display="block",l.zIndex=artDialog.defaults.zIndex+3,"absolute"===a&&(l.width=n.width()+"px",l.height=n.height()+"px",l.left=o.scrollLeft()+"px",l.top=o.scrollTop()+"px"),i&&307200<e.offsetWidth*e.offsetHeight&&(e.style.visibility="hidden")},s.end=function(){var t=artDialog.focus;s._end.apply(this,arguments),l.display="none",t&&(t.DOM.main[0].style.visibility="visible")}}})}(this.art||this.jQuery&&(this.art=jQuery));
!function(M){M.fn.extend({slimScroll:function(R){var D=M.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},R);return this.each(function(){var s,e,o,i,a,r,l,n,c="<div></div>",h=30,u=!1,p=M(this);if(p.parent().hasClass(D.wrapperClass)){var d=p.scrollTop();if(m=p.siblings("."+D.barClass),w=p.siblings("."+D.railClass),H(),M.isPlainObject(R)){if("height"in R&&"auto"==R.height){p.parent().css("height","auto"),p.css("height","auto");var g=p.parent().parent().height();p.parent().css("height",g),p.css("height",g)}else if("height"in R){var f=R.height;p.parent().css("height",f),p.css("height",f)}if("scrollTo"in R)d=parseInt(D.scrollTo);else if("scrollBy"in R)d+=parseInt(D.scrollBy);else if("destroy"in R)return m.remove(),w.remove(),void p.unwrap();C(d,!1,!0)}}else if(!(M.isPlainObject(R)&&"destroy"in R)){D.height="auto"==D.height?p.parent().height():D.height;var b=M(c).addClass(D.wrapperClass).css({position:"relative",overflow:"hidden",width:D.width,height:D.height});p.css({overflow:"hidden",width:D.width,height:D.height});var v,w=M(c).addClass(D.railClass).css({width:D.size,height:"100%",position:"absolute",top:0,display:D.alwaysVisible&&D.railVisible?"block":"none","border-radius":D.railBorderRadius,background:D.railColor,opacity:D.railOpacity,zIndex:90}),m=M(c).addClass(D.barClass).css({background:D.color,width:D.size,position:"absolute",top:0,opacity:D.opacity,display:D.alwaysVisible?"block":"none","border-radius":D.borderRadius,BorderRadius:D.borderRadius,MozBorderRadius:D.borderRadius,WebkitBorderRadius:D.borderRadius,zIndex:99}),y="right"==D.position?{right:D.distance}:{left:D.distance};w.css(y),m.css(y),p.wrap(b),p.parent().append(m),p.parent().append(w),D.railDraggable&&m.bind("mousedown",function(e){var i=M(document);return o=!0,t=parseFloat(m.css("top")),pageY=e.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,m.css("top",currTop),C(0,m.position().top,!1)}),i.bind("mouseup.slimscroll",function(e){o=!1,E(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),w.hover(function(){S()},function(){E()}),m.hover(function(){e=!0},function(){e=!1}),p.hover(function(){s=!0,S(),E()},function(){s=!1,E()}),p.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(a=e.originalEvent.touches[0].pageY)}),p.bind("touchmove",function(e){(u||e.originalEvent.preventDefault(),e.originalEvent.touches.length)&&(C((a-e.originalEvent.touches[0].pageY)/D.touchScrollStep,!0),a=e.originalEvent.touches[0].pageY)}),H(),"bottom"===D.start?(m.css({top:p.outerHeight()-m.outerHeight()}),C(0,!0)):"top"!==D.start&&(C(M(D.start).position().top,null,!0),D.alwaysVisible||m.hide()),v=this,window.addEventListener?(v.addEventListener("DOMMouseScroll",x,!1),v.addEventListener("mousewheel",x,!1)):document.attachEvent("onmousewheel",x)}function x(e){if(s){var t=0;(e=e||window.event).wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3);var i=e.target||e.srcTarget||e.srcElement;M(i).closest("."+D.wrapperClass).is(p.parent())&&C(t,!0),e.preventDefault&&!u&&e.preventDefault(),u||(e.returnValue=!1)}}function C(e,t,i){u=!1;var s=e,o=p.outerHeight()-m.outerHeight();if(t&&(s=parseInt(m.css("top"))+e*parseInt(D.wheelStep)/100*m.outerHeight(),s=Math.min(Math.max(s,0),o),s=0<e?Math.ceil(s):Math.floor(s),m.css({top:s+"px"})),s=(l=parseInt(m.css("top"))/(p.outerHeight()-m.outerHeight()))*(p[0].scrollHeight-p.outerHeight()),i){var a=(s=e)/p[0].scrollHeight*p.outerHeight();a=Math.min(Math.max(a,0),o),m.css({top:a+"px"})}p.scrollTop(s),p.trigger("slimscrolling",~~s),S(),E()}function H(){r=Math.max(p.outerHeight()/p[0].scrollHeight*p.outerHeight(),h),m.css({height:r+"px"});var e=r==p.outerHeight()?"none":"block";m.css({display:e})}function S(){if(H(),clearTimeout(i),l==~~l){if(u=D.allowPageScroll,n!=l){var e=0==~~l?"top":"bottom";p.trigger("slimscroll",e)}}else u=!1;n=l,r>=p.outerHeight()?u=!0:(m.stop(!0,!0).fadeIn("fast"),D.railVisible&&w.stop(!0,!0).fadeIn("fast"))}function E(){D.alwaysVisible||(i=setTimeout(function(){D.disableFadeOut&&s||e||o||(m.fadeOut("slow"),w.fadeOut("slow"))},1e3))}}),this}}),M.fn.extend({slimscroll:M.fn.slimScroll})}(jQuery);
!function l(i,s,a){function c(n,t){if(!s[n]){if(!i[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(u)return u(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[n]={exports:{}};i[n][0].call(o.exports,function(t){var e=i[n][1][t];return c(e||t)},o,o.exports,l,i,s,a)}return s[n].exports}for(var u="function"==typeof require&&require,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,e,n){"use strict";var r=t("../main"),o=t("../plugin/instances");function l(t){t.fn.perfectScrollbar=function(n){return this.each(function(){if("object"==typeof n||void 0===n){var t=n;o.get(this)||r.initialize(this,t)}else{var e=n;"update"===e?r.update(this):"destroy"===e&&r.destroy(this)}})}}if("function"==typeof define&&define.amd)define(["jquery"],l);else{var i=window.jQuery?window.jQuery:window.$;void 0!==i&&l(i)}e.exports=l},{"../main":7,"../plugin/instances":18}],2:[function(t,e,n){"use strict";n.add=function(t,e){var n,r,o;t.classList?t.classList.add(e):(r=e,(o=(n=t).className.split(" ")).indexOf(r)<0&&o.push(r),n.className=o.join(" "))},n.remove=function(t,e){var n,r,o,l;t.classList?t.classList.remove(e):(r=e,o=(n=t).className.split(" "),0<=(l=o.indexOf(r))&&o.splice(l,1),n.className=o.join(" "))},n.list=function(t){return t.classList?Array.prototype.slice.apply(t.classList):t.className.split(" ")}},{}],3:[function(t,e,n){"use strict";var r={};r.e=function(t,e){var n=document.createElement(t);return n.className=e,n},r.appendTo=function(t,e){return e.appendChild(t),t},r.css=function(t,e,n){return"object"==typeof e?function(t,e){for(var n in e){var r=e[n];"number"==typeof r&&(r=r.toString()+"px"),t.style[n]=r}return t}(t,e):void 0===n?(i=t,s=e,window.getComputedStyle(i)[s]):(r=t,o=e,"number"==typeof(l=n)&&(l=l.toString()+"px"),r.style[o]=l,r);var r,o,l,i,s},r.matches=function(t,e){return void 0!==t.matches?t.matches(e):void 0!==t.matchesSelector?t.matchesSelector(e):void 0!==t.webkitMatchesSelector?t.webkitMatchesSelector(e):void 0!==t.mozMatchesSelector?t.mozMatchesSelector(e):void 0!==t.msMatchesSelector?t.msMatchesSelector(e):void 0},r.remove=function(t){void 0!==t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)},r.queryChildren=function(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return r.matches(t,e)})},e.exports=r},{}],4:[function(t,e,n){"use strict";var r=function(t){this.element=t,this.events={}};r.prototype.bind=function(t,e){void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this.element.addEventListener(t,e,!1)},r.prototype.unbind=function(e,n){var r=void 0!==n;this.events[e]=this.events[e].filter(function(t){return!(!r||t===n)||(this.element.removeEventListener(e,t,!1),!1)},this)},r.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new r(e),this.eventElements.push(t)),t},o.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},o.prototype.unbind=function(t,e,n){this.eventElement(t).unbind(e,n)},o.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},o.prototype.once=function(t,e,n){var r=this.eventElement(t),o=function(t){r.unbind(e,o),n(t)};r.bind(e,o)},e.exports=o},{}],5:[function(t,e,n){"use strict";e.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},{}],6:[function(t,e,n){"use strict";var o=t("./class"),r=t("./dom"),l=n.toInt=function(t){return parseInt(t,10)||0},i=n.clone=function(t){if(t){if(Array.isArray(t))return t.map(i);if("object"==typeof t){var e={};for(var n in t)e[n]=i(t[n]);return e}return t}return null};function s(n){return function(t,e){n(t,"ps--in-scrolling"),void 0!==e?n(t,"ps--"+e):(n(t,"ps--x"),n(t,"ps--y"))}}n.extend=function(t,e){var n=i(t);for(var r in e)n[r]=i(e[r]);return n},n.isEditable=function(t){return r.matches(t,"input,[contenteditable]")||r.matches(t,"select,[contenteditable]")||r.matches(t,"textarea,[contenteditable]")||r.matches(t,"button,[contenteditable]")},n.removePsClasses=function(t){for(var e=o.list(t),n=0;n<e.length;n++){var r=e[n];0===r.indexOf("ps-")&&o.remove(t,r)}},n.outerWidth=function(t){return l(r.css(t,"width"))+l(r.css(t,"paddingLeft"))+l(r.css(t,"paddingRight"))+l(r.css(t,"borderLeftWidth"))+l(r.css(t,"borderRightWidth"))},n.startScrolling=s(o.add),n.stopScrolling=s(o.remove),n.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(t,e,n){"use strict";var r=t("./plugin/destroy"),o=t("./plugin/initialize"),l=t("./plugin/update");e.exports={initialize:o,update:l,destroy:r}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(t,e,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/dom"),l=t("./instances");e.exports=function(t){var e=l.get(t);e&&(e.event.unbindAll(),o.remove(e.scrollbarX),o.remove(e.scrollbarY),o.remove(e.scrollbarXRail),o.remove(e.scrollbarYRail),r.removePsClasses(t),l.remove(t))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(t,e,n){"use strict";var r=t("../instances"),l=t("../update-geometry"),i=t("../update-scroll");e.exports=function(t){!function(n,r){function o(t){return t.getBoundingClientRect()}var t=function(t){t.stopPropagation()};r.event.bind(r.scrollbarY,"click",t),r.event.bind(r.scrollbarYRail,"click",function(t){var e=t.pageY-window.pageYOffset-o(r.scrollbarYRail).top>r.scrollbarYTop?1:-1;i(n,"top",n.scrollTop+e*r.containerHeight),l(n),t.stopPropagation()}),r.event.bind(r.scrollbarX,"click",t),r.event.bind(r.scrollbarXRail,"click",function(t){var e=t.pageX-window.pageXOffset-o(r.scrollbarXRail).left>r.scrollbarXLeft?1:-1;i(n,"left",n.scrollLeft+e*r.containerWidth),l(n),t.stopPropagation()})}(t,r.get(t))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(t,e,n){"use strict";var s=t("../../lib/helper"),a=t("../../lib/dom"),r=t("../instances"),c=t("../update-geometry"),u=t("../update-scroll");function o(o,l){var i=null,e=null;var n=function(t){!function(t){var e=i+t*l.railXRatio,n=Math.max(0,l.scrollbarXRail.getBoundingClientRect().left)+l.railXRatio*(l.railXWidth-l.scrollbarXWidth);l.scrollbarXLeft=e<0?0:n<e?n:e;var r=s.toInt(l.scrollbarXLeft*(l.contentWidth-l.containerWidth)/(l.containerWidth-l.railXRatio*l.scrollbarXWidth))-l.negativeScrollAdjustment;u(o,"left",r)}(t.pageX-e),c(o),t.stopPropagation(),t.preventDefault()},r=function(){s.stopScrolling(o,"x"),l.event.unbind(l.ownerDocument,"mousemove",n)};l.event.bind(l.scrollbarX,"mousedown",function(t){e=t.pageX,i=s.toInt(a.css(l.scrollbarX,"left"))*l.railXRatio,s.startScrolling(o,"x"),l.event.bind(l.ownerDocument,"mousemove",n),l.event.once(l.ownerDocument,"mouseup",r),t.stopPropagation(),t.preventDefault()})}function l(o,l){var i=null,e=null;var n=function(t){!function(t){var e=i+t*l.railYRatio,n=Math.max(0,l.scrollbarYRail.getBoundingClientRect().top)+l.railYRatio*(l.railYHeight-l.scrollbarYHeight);l.scrollbarYTop=e<0?0:n<e?n:e;var r=s.toInt(l.scrollbarYTop*(l.contentHeight-l.containerHeight)/(l.containerHeight-l.railYRatio*l.scrollbarYHeight));u(o,"top",r)}(t.pageY-e),c(o),t.stopPropagation(),t.preventDefault()},r=function(){s.stopScrolling(o,"y"),l.event.unbind(l.ownerDocument,"mousemove",n)};l.event.bind(l.scrollbarY,"mousedown",function(t){e=t.pageY,i=s.toInt(a.css(l.scrollbarY,"top"))*l.railYRatio,s.startScrolling(o,"y"),l.event.bind(l.ownerDocument,"mousemove",n),l.event.once(l.ownerDocument,"mouseup",r),t.stopPropagation(),t.preventDefault()})}e.exports=function(t){var e=r.get(t);o(t,e),l(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(t,e,n){"use strict";var a=t("../../lib/helper"),c=t("../../lib/dom"),r=t("../instances"),u=t("../update-geometry"),d=t("../update-scroll");function o(l,i){var s=!1;i.event.bind(l,"mouseenter",function(){s=!0}),i.event.bind(l,"mouseleave",function(){s=!1});i.event.bind(i.ownerDocument,"keydown",function(t){if(!(t.isDefaultPrevented&&t.isDefaultPrevented()||t.defaultPrevented)){var e=c.matches(i.scrollbarX,":focus")||c.matches(i.scrollbarY,":focus");if(s||e){var n=document.activeElement?document.activeElement:i.ownerDocument.activeElement;if(n){if("IFRAME"===n.tagName)n=n.contentDocument.activeElement;else for(;n.shadowRoot;)n=n.shadowRoot.activeElement;if(a.isEditable(n))return}var r=0,o=0;switch(t.which){case 37:r=t.metaKey?-i.contentWidth:t.altKey?-i.containerWidth:-30;break;case 38:o=t.metaKey?i.contentHeight:t.altKey?i.containerHeight:30;break;case 39:r=t.metaKey?i.contentWidth:t.altKey?i.containerWidth:30;break;case 40:o=t.metaKey?-i.contentHeight:t.altKey?-i.containerHeight:-30;break;case 33:o=90;break;case 32:o=t.shiftKey?90:-90;break;case 34:o=-90;break;case 35:o=t.ctrlKey?-i.contentHeight:-i.containerHeight;break;case 36:o=t.ctrlKey?l.scrollTop:i.containerHeight;break;default:return}d(l,"top",l.scrollTop-o),d(l,"left",l.scrollLeft+r),u(l),function(t,e){var n=l.scrollTop;if(0===t){if(!i.scrollbarYActive)return!1;if(0===n&&0<e||n>=i.contentHeight-i.containerHeight&&e<0)return!i.settings.wheelPropagation}var r=l.scrollLeft;if(0===e){if(!i.scrollbarXActive)return!1;if(0===r&&t<0||r>=i.contentWidth-i.containerWidth&&0<t)return!i.settings.wheelPropagation}return!0}(r,o)&&t.preventDefault()}}})}e.exports=function(t){o(t,r.get(t))}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(t,e,n){"use strict";var r=t("../instances"),u=t("../update-geometry"),d=t("../update-scroll");function o(s,a){var c=!1;function t(t){var e,n,r,o=(n=(e=t).deltaX,r=-1*e.deltaY,void 0!==n&&void 0!==r||(n=-1*e.wheelDeltaX/6,r=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(n*=10,r*=10),n!=n&&r!=r&&(n=0,r=e.wheelDelta),e.shiftKey?[-r,-n]:[n,r]),l=o[0],i=o[1];(function(t,e){var n=s.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(n){var r=window.getComputedStyle(n);if(![r.overflow,r.overflowX,r.overflowY].join("").match(/(scroll|auto)/))return!1;var o=n.scrollHeight-n.clientHeight;if(0<o&&!(0===n.scrollTop&&0<e||n.scrollTop===o&&e<0))return!0;var l=n.scrollLeft-n.clientWidth;if(0<l&&!(0===n.scrollLeft&&t<0||n.scrollLeft===l&&0<t))return!0}return!1})(l,i)||(c=!1,a.settings.useBothWheelAxes?a.scrollbarYActive&&!a.scrollbarXActive?(d(s,"top",i?s.scrollTop-i*a.settings.wheelSpeed:s.scrollTop+l*a.settings.wheelSpeed),c=!0):a.scrollbarXActive&&!a.scrollbarYActive&&(d(s,"left",l?s.scrollLeft+l*a.settings.wheelSpeed:s.scrollLeft-i*a.settings.wheelSpeed),c=!0):(d(s,"top",s.scrollTop-i*a.settings.wheelSpeed),d(s,"left",s.scrollLeft+l*a.settings.wheelSpeed)),u(s),(c=c||function(t,e){var n=s.scrollTop;if(0===t){if(!a.scrollbarYActive)return!1;if(0===n&&0<e||n>=a.contentHeight-a.containerHeight&&e<0)return!a.settings.wheelPropagation}var r=s.scrollLeft;if(0===e){if(!a.scrollbarXActive)return!1;if(0===r&&t<0||r>=a.contentWidth-a.containerWidth&&0<t)return!a.settings.wheelPropagation}return!0}(l,i))&&(t.stopPropagation(),t.preventDefault()))}void 0!==window.onwheel?a.event.bind(s,"wheel",t):void 0!==window.onmousewheel&&a.event.bind(s,"mousewheel",t)}e.exports=function(t){o(t,r.get(t))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(t,e,n){"use strict";var r=t("../instances"),o=t("../update-geometry");e.exports=function(t){var e,n=r.get(t);e=t,n.event.bind(e,"scroll",function(){o(e)})}},{"../instances":18,"../update-geometry":19}],15:[function(t,e,n){"use strict";var p=t("../../lib/helper"),h=t("../instances"),f=t("../update-geometry"),b=t("../update-scroll");function r(s,t){var a=null,c={top:0,left:0};function u(){a&&(clearInterval(a),a=null),p.stopScrolling(s)}var d=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){var t;s.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?d=!0:(d=!1,u())}),t.event.bind(window,"mouseup",function(){d&&(d=!1,u())}),t.event.bind(window,"keyup",function(){d&&(d=!1,u())}),t.event.bind(window,"mousemove",function(t){if(d){var e=t.pageX,n=t.pageY,r=s.offsetLeft,o=s.offsetLeft+s.offsetWidth,l=s.offsetTop,i=s.offsetTop+s.offsetHeight;e<r+3?(c.left=-5,p.startScrolling(s,"x")):o-3<e?(c.left=5,p.startScrolling(s,"x")):c.left=0,n<l+3?(c.top=l+3-n<5?-5:-20,p.startScrolling(s,"y")):i-3<n?(c.top=n-i+3<5?5:20,p.startScrolling(s,"y")):c.top=0,0===c.top&&0===c.left?u():a||(a=setInterval(function(){h.get(s)?(b(s,"top",s.scrollTop+c.top),b(s,"left",s.scrollLeft+c.left),f(s)):clearInterval(a)},50))}})}e.exports=function(t){r(t,h.get(t))}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(t,e,n){"use strict";var r=t("../../lib/helper"),m=t("../instances"),w=t("../update-geometry"),Y=t("../update-scroll");function o(s,a,t,e){function c(t,e){Y(s,"top",s.scrollTop-e),Y(s,"left",s.scrollLeft-t),w(s)}var u={},d=0,p={},n=null,h=!1,f=!1;function r(){h=!0}function o(){h=!1}function b(t){return t.targetTouches?t.targetTouches[0]:t}function v(t){return!(!t.targetTouches||1!==t.targetTouches.length)||!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE)}function g(t){if(v(t)){f=!0;var e=b(t);u.pageX=e.pageX,u.pageY=e.pageY,d=(new Date).getTime(),null!==n&&clearInterval(n),t.stopPropagation()}}function l(t){if(!f&&a.settings.swipePropagation&&g(t),!h&&f&&v(t)){var e=b(t),n={pageX:e.pageX,pageY:e.pageY},r=n.pageX-u.pageX,o=n.pageY-u.pageY;c(r,o),u=n;var l=(new Date).getTime(),i=l-d;0<i&&(p.x=r/i,p.y=o/i,d=l),function(t,e){var n=s.scrollTop,r=s.scrollLeft,o=Math.abs(t),l=Math.abs(e);if(o<l){if(e<0&&n===a.contentHeight-a.containerHeight||0<e&&0===n)return!a.settings.swipePropagation}else if(l<o&&(t<0&&r===a.contentWidth-a.containerWidth||0<t&&0===r))return!a.settings.swipePropagation;return!0}(r,o)&&(t.stopPropagation(),t.preventDefault())}}function i(){!h&&f&&(f=!1,a.settings.swipeEasing&&(clearInterval(n),n=setInterval(function(){m.get(s)&&(p.x||p.y)?Math.abs(p.x)<.01&&Math.abs(p.y)<.01?clearInterval(n):(c(30*p.x,30*p.y),p.x*=.8,p.y*=.8):clearInterval(n)},10)))}t?(a.event.bind(window,"touchstart",r),a.event.bind(window,"touchend",o),a.event.bind(s,"touchstart",g),a.event.bind(s,"touchmove",l),a.event.bind(s,"touchend",i)):e&&(window.PointerEvent?(a.event.bind(window,"pointerdown",r),a.event.bind(window,"pointerup",o),a.event.bind(s,"pointerdown",g),a.event.bind(s,"pointermove",l),a.event.bind(s,"pointerup",i)):window.MSPointerEvent&&(a.event.bind(window,"MSPointerDown",r),a.event.bind(window,"MSPointerUp",o),a.event.bind(s,"MSPointerDown",g),a.event.bind(s,"MSPointerMove",l),a.event.bind(s,"MSPointerUp",i)))}e.exports=function(t){(r.env.supportsTouch||r.env.supportsIePointer)&&o(t,m.get(t),r.env.supportsTouch,r.env.supportsIePointer)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/class"),l=t("./instances"),i=t("./update-geometry"),s={"click-rail":t("./handler/click-rail"),"drag-scrollbar":t("./handler/drag-scrollbar"),keyboard:t("./handler/keyboard"),wheel:t("./handler/mouse-wheel"),touch:t("./handler/touch"),selection:t("./handler/selection")},a=t("./handler/native-scroll");e.exports=function(e,t){t="object"==typeof t?t:{},o.add(e,"ps");var n=l.add(e);n.settings=r.extend(n.settings,t),o.add(e,"ps--theme_"+n.settings.theme),n.settings.handlers.forEach(function(t){s[t](e)}),a(e),i(e)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(t,e,n){"use strict";var i=t("../lib/helper"),s=t("../lib/class"),a=t("./default-setting"),c=t("../lib/dom"),u=t("../lib/event-manager"),r=t("../lib/guid"),o={};function l(t){var e,n,r=this;function o(){s.add(t,"ps--focus")}function l(){s.remove(t,"ps--focus")}r.settings=i.clone(a),r.containerWidth=null,r.containerHeight=null,r.contentWidth=null,r.contentHeight=null,r.isRtl="rtl"===c.css(t,"direction"),r.isNegativeScroll=(n=t.scrollLeft,t.scrollLeft=-1,e=t.scrollLeft<0,t.scrollLeft=n,e),r.negativeScrollAdjustment=r.isNegativeScroll?t.scrollWidth-t.clientWidth:0,r.event=new u,r.ownerDocument=t.ownerDocument||document,r.scrollbarXRail=c.appendTo(c.e("div","ps__scrollbar-x-rail"),t),r.scrollbarX=c.appendTo(c.e("div","ps__scrollbar-x"),r.scrollbarXRail),r.scrollbarX.setAttribute("tabindex",0),r.event.bind(r.scrollbarX,"focus",o),r.event.bind(r.scrollbarX,"blur",l),r.scrollbarXActive=null,r.scrollbarXWidth=null,r.scrollbarXLeft=null,r.scrollbarXBottom=i.toInt(c.css(r.scrollbarXRail,"bottom")),r.isScrollbarXUsingBottom=r.scrollbarXBottom==r.scrollbarXBottom,r.scrollbarXTop=r.isScrollbarXUsingBottom?null:i.toInt(c.css(r.scrollbarXRail,"top")),r.railBorderXWidth=i.toInt(c.css(r.scrollbarXRail,"borderLeftWidth"))+i.toInt(c.css(r.scrollbarXRail,"borderRightWidth")),c.css(r.scrollbarXRail,"display","block"),r.railXMarginWidth=i.toInt(c.css(r.scrollbarXRail,"marginLeft"))+i.toInt(c.css(r.scrollbarXRail,"marginRight")),c.css(r.scrollbarXRail,"display",""),r.railXWidth=null,r.railXRatio=null,r.scrollbarYRail=c.appendTo(c.e("div","ps__scrollbar-y-rail"),t),r.scrollbarY=c.appendTo(c.e("div","ps__scrollbar-y"),r.scrollbarYRail),r.scrollbarY.setAttribute("tabindex",0),r.event.bind(r.scrollbarY,"focus",o),r.event.bind(r.scrollbarY,"blur",l),r.scrollbarYActive=null,r.scrollbarYHeight=null,r.scrollbarYTop=null,r.scrollbarYRight=i.toInt(c.css(r.scrollbarYRail,"right")),r.isScrollbarYUsingRight=r.scrollbarYRight==r.scrollbarYRight,r.scrollbarYLeft=r.isScrollbarYUsingRight?null:i.toInt(c.css(r.scrollbarYRail,"left")),r.scrollbarYOuterWidth=r.isRtl?i.outerWidth(r.scrollbarY):null,r.railBorderYWidth=i.toInt(c.css(r.scrollbarYRail,"borderTopWidth"))+i.toInt(c.css(r.scrollbarYRail,"borderBottomWidth")),c.css(r.scrollbarYRail,"display","block"),r.railYMarginHeight=i.toInt(c.css(r.scrollbarYRail,"marginTop"))+i.toInt(c.css(r.scrollbarYRail,"marginBottom")),c.css(r.scrollbarYRail,"display",""),r.railYHeight=null,r.railYRatio=null}function d(t){return t.getAttribute("data-ps-id")}n.add=function(t){var e,n=r();return e=n,t.setAttribute("data-ps-id",e),o[n]=new l(t),o[n]},n.remove=function(t){delete o[d(t)],t.removeAttribute("data-ps-id")},n.get=function(t){return o[d(t)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/class"),l=t("../lib/dom"),i=t("./instances"),s=t("./update-scroll");function a(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}e.exports=function(t){var e,n=i.get(t);n.containerWidth=t.clientWidth,n.containerHeight=t.clientHeight,n.contentWidth=t.scrollWidth,n.contentHeight=t.scrollHeight,t.contains(n.scrollbarXRail)||(0<(e=l.queryChildren(t,".ps__scrollbar-x-rail")).length&&e.forEach(function(t){l.remove(t)}),l.appendTo(n.scrollbarXRail,t)),t.contains(n.scrollbarYRail)||(0<(e=l.queryChildren(t,".ps__scrollbar-y-rail")).length&&e.forEach(function(t){l.remove(t)}),l.appendTo(n.scrollbarYRail,t)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=a(n,r.toInt(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=r.toInt((n.negativeScrollAdjustment+t.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=a(n,r.toInt(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=r.toInt(t.scrollTop*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),function(t,e){var n={width:e.railXWidth};e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-t.scrollTop:n.top=e.scrollbarXTop+t.scrollTop,l.css(e.scrollbarXRail,n);var r={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?r.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:r.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?r.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:r.left=e.scrollbarYLeft+t.scrollLeft,l.css(e.scrollbarYRail,r),l.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),l.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}(t,n),n.scrollbarXActive?o.add(t,"ps--active-x"):(o.remove(t,"ps--active-x"),n.scrollbarXWidth=0,n.scrollbarXLeft=0,s(t,"left",0)),n.scrollbarYActive?o.add(t,"ps--active-y"):(o.remove(t,"ps--active-y"),n.scrollbarYHeight=0,n.scrollbarYTop=0,s(t,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(t,e,n){"use strict";var o=t("./instances"),l=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e};e.exports=function(t,e,n){if(void 0===t)throw"You must provide an element to the update-scroll function";if(void 0===e)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===e&&n<=0&&(t.scrollTop=n=0,t.dispatchEvent(l("ps-y-reach-start"))),"left"===e&&n<=0&&(t.scrollLeft=n=0,t.dispatchEvent(l("ps-x-reach-start")));var r=o.get(t);"top"===e&&n>=r.contentHeight-r.containerHeight&&((n=r.contentHeight-r.containerHeight)-t.scrollTop<=1?n=t.scrollTop:t.scrollTop=n,t.dispatchEvent(l("ps-y-reach-end"))),"left"===e&&n>=r.contentWidth-r.containerWidth&&((n=r.contentWidth-r.containerWidth)-t.scrollLeft<=1?n=t.scrollLeft:t.scrollLeft=n,t.dispatchEvent(l("ps-x-reach-end"))),void 0===r.lastTop&&(r.lastTop=t.scrollTop),void 0===r.lastLeft&&(r.lastLeft=t.scrollLeft),"top"===e&&n<r.lastTop&&t.dispatchEvent(l("ps-scroll-up")),"top"===e&&n>r.lastTop&&t.dispatchEvent(l("ps-scroll-down")),"left"===e&&n<r.lastLeft&&t.dispatchEvent(l("ps-scroll-left")),"left"===e&&n>r.lastLeft&&t.dispatchEvent(l("ps-scroll-right")),"top"===e&&n!==r.lastTop&&(t.scrollTop=r.lastTop=n,t.dispatchEvent(l("ps-scroll-y"))),"left"===e&&n!==r.lastLeft&&(t.scrollLeft=r.lastLeft=n,t.dispatchEvent(l("ps-scroll-x")))}},{"./instances":18}],21:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/dom"),l=t("./instances"),i=t("./update-geometry"),s=t("./update-scroll");e.exports=function(t){var e=l.get(t);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?t.scrollWidth-t.clientWidth:0,o.css(e.scrollbarXRail,"display","block"),o.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=r.toInt(o.css(e.scrollbarXRail,"marginLeft"))+r.toInt(o.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=r.toInt(o.css(e.scrollbarYRail,"marginTop"))+r.toInt(o.css(e.scrollbarYRail,"marginBottom")),o.css(e.scrollbarXRail,"display","none"),o.css(e.scrollbarYRail,"display","none"),i(t),s(t,"top",t.scrollTop),s(t,"left",t.scrollLeft),o.css(e.scrollbarXRail,"display",""),o.css(e.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);
("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)})(["jquery"],function(x){return function(){var b,t,D,H=0,o={error:"error",info:"info",success:"success",warning:"warning"},e={clear:function(e,t){var n=I();b||O(n),s(e,n,t)||function(e){for(var t=b.children(),n=t.length-1;0<=n;n--)s(x(t[n]),e)}(n)},remove:function(e){var t=I();b||O(t),e&&0===x(":focus",e).length?B(e):b.children().length&&b.remove()},error:function(e,t,n){return i({type:o.error,iconClass:I().iconClasses.error,message:e,optionsOverride:n,title:t})},getContainer:O,info:function(e,t,n){return i({type:o.info,iconClass:I().iconClasses.info,message:e,optionsOverride:n,title:t})},options:{},subscribe:function(e){t=e},success:function(e,t,n){return i({type:o.success,iconClass:I().iconClasses.success,message:e,optionsOverride:n,title:t})},version:"2.1.3",warning:function(e,t,n){return i({type:o.warning,iconClass:I().iconClasses.warning,message:e,optionsOverride:n,title:t})},show:function(e){var t=e.messageSystemEO.messageStatus;return i({type:o[t],iconClass:I().iconClasses[t],message:e.messageSystemEO.content,optionsOverride:!1,title:e.messageSystemEO.title})}};return e;function O(e,t){return e||(e=I()),(b=x("#"+e.containerId)).length||t&&(n=e,(b=x("<div/>").attr("id",n.containerId).addClass(n.positionClass)).appendTo(x(n.target)),b=b),b;var n}function s(e,t,n){var o=!(!n||!n.force)&&n.force;return!(!e||!o&&0!==x(":focus",e).length||(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){B(e)}}),0))}function E(e){t&&t(e)}function i(t){var a=I(),e=t.iconClass||a.iconClass;if(void 0!==t.optionsOverride&&(a=x.extend(a,t.optionsOverride),e=t.optionsOverride.iconClass||e),!function(e,t){if(e.preventDuplicates){if(t.message===D)return!0;D=t.message}return!1}(a,t)){H++,b=O(a,!0);var s=null,i=x("<div/>"),n=x("<div/>"),o=x("<div/>"),r=x("<div/>"),l=x(a.closeHtml),d=x(a.closeContainerHtml),c=x(a.moreHtml),u={intervalId:null,hideEta:null,maxHideTime:null},p={toastId:H,state:"visible",startTime:new Date,options:a,map:t};return a.closeContainer&&b.find("."+a.closeContainerClass).length<1&&(b.prepend(c),d.addClass(a.closeContainerClass).attr("role","button"),b.prepend(d),a.closeContainer&&d&&(d.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),a.onCloseContainerClick&&a.onCloseContainerClick(e),h()}),c.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),a.onCloseContainerClick&&a.onCloseContainerClick(e),h(),Ls.openWin("/message/index",{width:"1000px",height:"600px",lock:!0,title:"消息中心"})}))),t.iconClass&&i.addClass(a.toastClass).addClass(e),function(){if(t.title){var e=t.title;a.escapeHtml&&(e=g(t.title)),n.append(e).addClass(a.titleClass),i.append(n)}}(),function(){if(t.message){var e=t.message;a.escapeHtml&&(e=g(t.message)),o.append(e).addClass(a.messageClass),i.append(o)}}(),a.closeButton&&(l.addClass(a.closeClass).attr("role","button"),i.prepend(l)),a.progressBar&&(r.addClass(a.progressClass),i.prepend(r)),a.rtl&&i.addClass("rtl"),a.newestOnTop?a.closeContainer?i.insertAfter("#"+a.containerId+" ."+a.closeContainerClass):b.prepend(i):b.append(i),function(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}i.attr("aria-live",e)}(),i.hide(),i[a.showMethod]({duration:a.showDuration,easing:a.showEasing,complete:a.onShown}),0<a.timeOut&&(a.closeContainer?(s=setTimeout(f,a.timeOut),u.maxHideTime=parseFloat(a.timeOut),u.hideEta=(new Date).getTime()+u.maxHideTime,a.progressBar&&(u.intervalId=setInterval(T,10)),r.data("progressBar",u),i.data("intervalId",s)):(s=setTimeout(m,a.timeOut),u.maxHideTime=parseFloat(a.timeOut),u.hideEta=(new Date).getTime()+u.maxHideTime,a.progressBar&&(u.intervalId=setInterval(w,10)))),a.closeOnHover&&i.hover(C,v),a.onclick||!a.tapToDismiss||a.closeContainer||i.click(m),a.closeButton&&l&&l.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),a.onCloseClick&&a.onCloseClick(e),m(!0)}),a.onclick&&i.click(function(e){a.onclick(e),m()}),!a.onclick&&a.tapToDismiss&&a.closeContainer&&i.click(function(){i.attr("data-close","true"),f()}),a.closeContainer&&a.stopOnHover&&i.hover(function(){clearTimeout(i.data("intervalId"));var e=i.find(".toast-progress").data("progressBar");clearInterval(e.intervalId),i.find(".toast-progress").data("pBar"),i.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})},function(){if(!i.attr("data-close")){var e=Math.ceil(i.find(".toast-progress").get(0).style.width.split("%")[0]),t=e*a.timeOut/100;s=setTimeout(function(){var e=a.hideMethod,t=a.hideDuration,n=a.hideEasing,o=i.find(".toast-progress").data("progressBar");if(!x(":focus",i).length)return o&&clearTimeout(o.intervalId),i[e]({duration:t,easing:n,complete:function(){if(B(i),a.closeContainer){var e=b.find(".toast").length;0==e&&b.remove()}i&&clearTimeout(i.data("intervalId")),a.onHidden&&"hidden"!==p.state&&a.onHidden(),p.state="hidden",p.endTime=new Date,E(p)}})},t);var n=i.find(".toast-progress").data("progressBar");n.maxHideTime=parseFloat(t),n.hideEta=(new Date).getTime()+n.maxHideTime,n.percent=e/100,n.intervalId=setInterval(function(){var e=i.find(".toast-progress").data("progressBar"),t=(e.hideEta-(new Date).getTime())/e.maxHideTime*100;i.find(".toast-progress").width(t*e.percent+"%")},10),i.find(".toast-progress").data("progressBar",n),i.data("intervalId",s)}}),E(p),a.debug&&console&&console.log(p),i}function g(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(e){var t=e&&!1!==a.closeMethod?a.closeMethod:a.hideMethod,n=e&&!1!==a.closeDuration?a.closeDuration:a.hideDuration,o=e&&!1!==a.closeEasing?a.closeEasing:a.hideEasing;if(!x(":focus",i).length||e)return clearTimeout(u.intervalId),i[t]({duration:n,easing:o,complete:function(){B(i),clearTimeout(s),a.onHidden&&"hidden"!==p.state&&a.onHidden(),p.state="hidden",p.endTime=new Date,E(p)}})}function f(e){var t=e&&!1!==a.closeMethod?a.closeMethod:a.hideMethod,n=e&&!1!==a.closeDuration?a.closeDuration:a.hideDuration,o=e&&!1!==a.closeEasing?a.closeEasing:a.hideEasing;if(!x(":focus",i).length||e){var s=r.data("progressBar");return clearInterval(s.intervalId),i[t]({duration:n,easing:o,complete:function(){B(i),a.closeContainer&&0==b.find(".toast").length&&b.remove(),clearTimeout(i.data("intervalId")),a.onHidden&&"hidden"!==p.state&&a.onHidden(),p.state="hidden",p.endTime=new Date,E(p)}})}}function h(){var e=b.find(".toast");d.remove(),c.remove(),x.each(e,function(e,t){!function(e,t){var n=t&&!1!==a.closeMethod?a.closeMethod:a.hideMethod,o=t&&!1!==a.closeDuration?a.closeDuration:a.hideDuration,s=t&&!1!==a.closeEasing?a.closeEasing:a.hideEasing;if(!x(":focus",e).length||t){var i=e.find(".toast-progress").data("progressBar");clearInterval(i.intervalId),e[n]({duration:o,easing:s,complete:function(){clearTimeout(e.data("intervalId")),B(e),a.onHidden&&"hidden"!==p.state&&a.onHidden(),p.state="hidden",p.endTime=new Date,E(p)}})}}(x(t),!0)})}function v(){(0<a.timeOut||0<a.extendedTimeOut)&&(s=setTimeout(m,a.extendedTimeOut),u.maxHideTime=parseFloat(a.extendedTimeOut),u.hideEta=(new Date).getTime()+u.maxHideTime)}function C(){clearTimeout(s),u.hideEta=0,i.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})}function w(){var e=(u.hideEta-(new Date).getTime())/u.maxHideTime*100;r.width(e+"%")}function T(){var e=r.data("progressBar"),t=(e.hideEta-(new Date).getTime())/e.maxHideTime*100;r.width(t+"%")}}function I(){return x.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,stopOnHover:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeContainerHtml:'<div class="head-top"><button type="button" class="toast-close-button">&times;</button></div>',moreHtml:'<div class="more">查看更多</div>',closeClass:"toast-close-button",closeContainerClass:"container-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},e.options)}function B(e){b||(b=O()),e.is(":visible")||(e.remove(),e=null,0===b.children().length&&(b.remove(),D=void 0))}}()});
!function(f,t){var l=0,e=window.navigator.userAgent,h=0<e.indexOf("MSIE "),d=h?"-ie":"",p=!h&&(/mozilla/.test(e.toLowerCase())&&!/webkit/.test(e.toLowerCase())),v=[],c=["000000","333333","666666","999999","CCCCCC","FFFFFF","EE33EE","CC33E5","9933E5","4C33E5","003399","337FE5","00D5FF","60D978","B8D100","99BB00","006600","009900","FFE500","DFC5A4","64451D","FF9900","E56600","E53333"],u=[["003366","336699","3366cc","003399","000099","0000cc","000066"],["006666","006699","0099cc","0066cc","0033cc","0000ff","3333ff","333399"],["669999","009999","33cccc","00ccff","0099ff","0066ff","3366ff","3333cc","666699"],["339966","00cc99","00ffcc","00ffff","33ccff","3399ff","6699ff","6666ff","6600ff","6600cc"],["339933","00cc66","00ff99","66ffcc","66ffff","66ccff","99ccff","9999ff","9966ff","9933ff","9900ff"],["006600","00cc00","00ff00","66ff99","99ffcc","ccffff","ccccff","cc99ff","cc66ff","cc33ff","cc00ff","9900cc"],["003300","009933","33cc33","66ff66","99ff99","ccffcc","ffffff","ffccff","ff99ff","ff66ff","ff00ff","cc00cc","660066"],["333300","009900","66ff33","99ff66","ccff99","ffffcc","ffcccc","ff99cc","ff66cc","ff33cc","cc0099","993399"],["336600","669900","99ff33","ccff66","ffff99","ffcc99","ff9999","ff6699","ff3399","cc3399","990099"],["666633","99cc00","ccff33","ffff66","ffcc66","ff9966","ff6666","ff0066","d60094","993366"],["a58800","cccc00","ffff00","ffcc00","ff9933","ff6600","ff0033","cc0066","660033"],["996633","cc9900","ff9900","cc6600","ff3300","ff0000","cc0000","990033"],["663300","996600","cc3300","993300","990000","800000","993333"]],_="#0000ffff",i=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},s=function(t){return i(Number(t))},m=function(t){var e=i(t);return e+e+e},n=function(t){if(10<t.length){var e=1+t.indexOf("("),i=t.indexOf(")"),o=t.substring(e,i).split(",");return["#",s(o[0]),s(o[1]),s(o[2])].join("")}return t};f.widget("evol.colorpicker",{version:"3.3.1",options:{color:null,customTheme:null,showOn:"both",hideButton:!1,displayIndicator:!0,transparentColor:!1,history:!0,defaultPalette:"theme",strings:"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet."},_active:!1,_create:function(){var i=this;switch(this._paletteIdx="theme"==this.options.defaultPalette?1:2,this._id="evo-cp"+l++,this._enabled=!0,this.options.showOn=this.options.hideButton?"focus":this.options.showOn,this.element.get(0).tagName){case"INPUT":var t=this.options.color,e=this.element,o=("focus"===this.options.showOn?"":"evo-pointer ")+"evo-colorind"+(p?"-ff":d)+(this.options.hideButton?" evo-hidden-button":""),s="";this._isPopup=!0,this._palette=null;var n=e.val();null!==t?t!=n&&e.val(t).change():""!==n&&(t=this.options.color=n),t===_?o+=" evo-transparent":s=null!==t?"background-color:"+t:"",e.addClass("colorPicker "+this._id).wrap('<div style="width:'+(this.options.hideButton?this.element.width():this.element.width()+32)+"px;"+(h?"margin-bottom:-21px;":"")+(p?"padding:1px 0;":"")+'" class="evo-cp-wrap"></div>').after('<div class="'+o+'" style="'+s+'"></div>').on("keyup onpaste",function(t){var e=f(this).val();e!=i.options.color&&i._setValue(e,!0)});var r=this.options.showOn;"both"!==r&&"focus"!==r||e.on("focus",function(){i.showPalette()}),"both"!==r&&"button"!==r||e.next().on("click",function(t){return t.stopPropagation(),i.showPalette(),!1});break;default:this._isPopup=!1,this._palette=this.element.html(this._paletteHTML()).attr("aria-haspopup","true"),this._bindColors()}if(this.options.history&&(t&&this._add2History(t),this.options.initialHistory)){var a=this.options.initialHistory;for(var c in a)this._add2History(a[c])}},_paletteHTML:function(){var t=this._paletteIdx=Math.abs(this._paletteIdx),e=this.options,i=e.strings.split(","),o='<div class="evo-pop'+d+' ui-widget ui-widget-content ui-corner-all"'+(this._isPopup?' style="position:absolute"':"")+"><span>"+this["_paletteHTML"+t]()+'</span><div class="evo-more"><a href="javascript:void(0)">'+i[1+t]+"</a>";return e.history&&(o+='<a href="javascript:void(0)" class="evo-hist">'+i[5]+"</a>"),o+="</div>",e.displayIndicator&&(o+=this._colorIndHTML(this.options.color)+this._colorIndHTML("")),o+="</div>"},_colorIndHTML:function(t){var e=h?"evo-colorbox-ie ":"",i="";return t?t===_?e+="evo-transparent":i="background-color:"+t:i="display:none",'<div class="evo-color" style="float:left"><div style="'+i+'" class="'+e+'"></div><span>'+(t||"")+"</span></div>"},_paletteHTML1:function(){var t,e=this.options,i=e.strings.split(","),o='<td style="background-color:',s=h?'"><div style="width:2px;"></div></td>':'"><span/></td>',n='<tr><th colspan="10" class="ui-widget-content">',r='<table class="evo-palette'+d+'">'+n+i[0]+"</th></tr><tr>";if(e.customTheme)for(t=0,ml=e.customTheme.length;t<ml;t++)r+=o+e.customTheme[t]+s;else{for(o+="#",r+="</tr>",h||(r+='<tr><th colspan="10"></th></tr>'),r+='<tr class="top">',t=0;t<6;t++)r+=o+c[t]+s;for(var a=1;a<3;a++)for(r+='</tr><tr class="in">',t=0;t<6;t++)r+=o+c[6*a+t]+s;for(r+='</tr><tr class="bottom">',t=18;t<24;t++)r+=o+c[t]+s;r+="</tr>"+n,e.transparentColor&&(r+='<div class="evo-transparent evo-tr-box"></div>'),r+=i[1]+"</th></tr><tr>"}return r+="</tr></table>"},_paletteHTML2:function(){for(var t,e,i='<td style="background-color:#',o=h?'"><div style="width:5px;"></div></td>':'"><span/></td>',s='<table class="evo-palette2'+d+'"><tr>',n="</tr></table>",r='<div class="evo-palcenter">',a=0,c=u.length;a<c;a++){r+=s;var f=u[a];for(t=0,e=f.length;t<e;t++)r+=i+f[t]+o;r+=n}r+='<div class="evo-sep"/>';var l="";for(r+=s,t=255;10<t;t-=10)r+=i+m(t)+o,l+=i+m(t-=10)+o;return r+=n+s+l+n+"</div>"},_switchPalette:function(t){if(this._enabled){var e,i,o,s=this.options,n=s.strings.split(",");if(f(t).hasClass("evo-hist")){var r='<table class="evo-palette"><tr><th class="ui-widget-content">'+n[5]+'</th></tr></tr></table><div class="evo-cHist">';if(0===v.length)r+="<p>&nbsp;"+n[6]+"</p>";else for(var a=v.length-1;-1<a;a--)9===v[a].length?s.transparentColor&&(r+='<div class="evo-transparent"></div>'):r+='<div style="background-color:'+v[a]+'"></div>';r+="</div>",e=-this._paletteIdx,i=r,o=n[4]}else this._paletteIdx<0?(e=-this._paletteIdx,this._palette.find(".evo-hist").show()):e=2==this._paletteIdx?1:2,i=this["_paletteHTML"+e](),o=n[e+1],this._paletteIdx=e;this._paletteIdx=e;var c=this._palette.find(".evo-more").prev().html(i).end().children().eq(0).html(o);e<0&&c.next().hide()}},_downOrUpPositioning:function(){for(var t=this.element,e=0;null!==t&&e<100;){if("visible"!=t.css("overflow")){var i=this._palette.offset().top+this._palette.height(),o=t.offset().top+t.height(),s=this._palette.offset().top-this._palette.height()-this.element.outerHeight(),n=t.offset().top;o<i&&n<s?this._palette.css({bottom:this.element.outerHeight()+"px"}):this._palette.css({bottom:"auto"});break}if("HTML"==t[0].tagName)break;t=t.offsetParent(),e++}},showPalette:function(){if(this._enabled&&(this._active=!0,f(".colorPicker").not("."+this._id).colorpicker("hidePalette"),null===this._palette)){this._palette=this.element.next().after(this._paletteHTML()).next().on("click",function(t){return t.stopPropagation(),!1}),this._bindColors();var e=this;this._isPopup&&(this._downOrUpPositioning(),f(document.body).on("click."+e._id,function(t){t.target!=e.element.get(0)&&e.hidePalette()}).on("keyup."+e._id,function(t){27===t.keyCode&&e.hidePalette()}))}return this},hidePalette:function(){if(this._isPopup&&this._palette){f(document.body).off("click."+this._id);var t=this;this._palette.off("mouseover click","td,.evo-transparent").fadeOut(function(){t._palette.remove(),t._palette=t._cTxt=null}).find(".evo-more a").off("click")}return this},_bindColors:function(){var o=this,t=this.options,e=this._palette.find("div.evo-color"),i=t.history?"td,.evo-cHist>div":"td";t.transparentColor&&(i+=",.evo-transparent"),this._cTxt1=e.eq(0).children().eq(0),this._cTxt2=e.eq(1).children().eq(0),this._palette.on("click",i,function(t){if(o._enabled){var e=f(this);o._setValue(e.hasClass("evo-transparent")?_:n(e.attr("style").substring(17))),o._active=!1}}).on("mouseover",i,function(t){if(o._enabled){var e=f(this),i=e.hasClass("evo-transparent")?_:n(e.attr("style").substring(17));o.options.displayIndicator&&o._setColorInd(i,2),o._active&&o.element.trigger("mouseover.color",i)}}).find(".evo-more a").on("click",function(){o._switchPalette(this)})},val:function(t){return void 0===t?this.options.color:(this._setValue(t),this)},_setValue:function(t,e){t=t.replace(/ /g,""),this.options.color=t,this._isPopup?(e||this.hidePalette(),this._setBoxColor(this.element.val(t).change().next(),t)):this._setColorInd(t,1),this.options.history&&0<this._paletteIdx&&this._add2History(t),this.element.trigger("change.color",t)},_setColorInd:function(t,e){var i=this["_cTxt"+e];this._setBoxColor(i,t),i.next().html(t)},_setBoxColor:function(t,e){e===_?t.addClass("evo-transparent").removeAttr("style"):t.removeClass("evo-transparent").attr("style","background-color:"+e)},_setOption:function(t,e){"color"==t?this._setValue(e,!0):this.options[t]=e},_add2History:function(t){for(var e=v.length,i=0;i<e;i++)if(t==v[i])return;27<e&&v.shift(),v.push(t)},clear:function(){this.hidePalette().val("")},enable:function(){var t=this.element;return this._isPopup?t.removeAttr("disabled"):t.css({opacity:"1","pointer-events":"auto"}),"focus"!==this.options.showOn&&this.element.next().addClass("evo-pointer"),t.removeAttr("aria-disabled"),this._enabled=!0,this},disable:function(){var t=this.element;return this._isPopup?t.attr("disabled","disabled"):(this.hidePalette(),t.css({opacity:"0.3","pointer-events":"none"})),"focus"!==this.options.showOn&&this.element.next().removeClass("evo-pointer"),t.attr("aria-disabled","true"),this._enabled=!1,this},isDisabled:function(){return!this._enabled},destroy:function(){f(document.body).off("click."+this._id),this._palette&&(this._palette.off("mouseover click","td,.evo-cHist>div,.evo-transparent").find(".evo-more a").off("click"),this._isPopup&&this._palette.remove(),this._palette=this._cTxt=null),this._isPopup&&this.element.next().off("click").remove().end().off("focus").unwrap(),this.element.removeClass("colorPicker "+this.id).empty(),f.Widget.prototype.destroy.call(this)}})}(jQuery);
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(L){var z,h,P,a,n,l,i,g,H,S,m,c,s,d,u,f,p,v,x,_,w,b,k,C,y,B,T,M,U,r,O,I,D,E,F,W,R,A,q,j,Y,X,N,V,Q,G,J,K,Z,$,ee,te,oe,ae,ne,ie,re,e,t,o;e="function"==typeof define&&define.amd,t="undefined"!=typeof module&&module.exports,o="https:"==document.location.protocol?"https:":"http:",e||(t?require("jquery-mousewheel")(L):L.event.special.mousewheel||L("head").append(decodeURI("%3Cscript src="+o+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E"))),h="mCustomScrollbar",P="mCS",a=".mCustomScrollbar",n={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},l=0,i={},g=window.attachEvent&&!window.addEventListener?1:0,H=!1,S=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],m={init:function(r){var r=L.extend(!0,{},n,r),e=c.call(this);if(r.live){var t=r.liveSelector||this.selector||a,o=L(t);if("off"===r.live)return void d(t);i[t]=setTimeout(function(){o.mCustomScrollbar(r),"once"===r.live&&o.length&&d(t)},500)}else d(t);return r.setWidth=r.set_width?r.set_width:r.setWidth,r.setHeight=r.set_height?r.set_height:r.setHeight,r.axis=r.horizontalScroll?"x":u(r.axis),r.scrollInertia=0<r.scrollInertia&&r.scrollInertia<17?17:r.scrollInertia,"object"!=typeof r.mouseWheel&&1==r.mouseWheel&&(r.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),r.mouseWheel.scrollAmount=r.mouseWheelPixels?r.mouseWheelPixels:r.mouseWheel.scrollAmount,r.mouseWheel.normalizeDelta=r.advanced.normalizeMouseWheelDelta?r.advanced.normalizeMouseWheelDelta:r.mouseWheel.normalizeDelta,r.scrollButtons.scrollType=f(r.scrollButtons.scrollType),s(r),L(e).each(function(){var e=L(this);if(!e.data(P)){e.data(P,{idx:++l,opt:r,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:e.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var t=e.data(P),o=t.opt,a=e.data("mcs-axis"),n=e.data("mcs-scrollbar-position"),i=e.data("mcs-theme");a&&(o.axis=a),n&&(o.scrollbarPosition=n),i&&(o.theme=i,s(o)),p.call(this),t&&o.callbacks.onCreate&&"function"==typeof o.callbacks.onCreate&&o.callbacks.onCreate.call(this),L("#mCSB_"+t.idx+"_container img:not(."+S[2]+")").addClass(S[2]),m.update.call(null,e)}})},update:function(e,l){var t=e||c.call(this);return L(t).each(function(){var e=L(this);if(e.data(P)){var t=e.data(P),o=t.opt,a=L("#mCSB_"+t.idx+"_container"),n=L("#mCSB_"+t.idx),i=[L("#mCSB_"+t.idx+"_dragger_vertical"),L("#mCSB_"+t.idx+"_dragger_horizontal")];if(!a.length)return;t.tweenRunning&&J(e),l&&t&&o.callbacks.onBeforeUpdate&&"function"==typeof o.callbacks.onBeforeUpdate&&o.callbacks.onBeforeUpdate.call(this),e.hasClass(S[3])&&e.removeClass(S[3]),e.hasClass(S[4])&&e.removeClass(S[4]),n.css("max-height","none"),n.height()!==e.height()&&n.css("max-height",e.height()),x.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||a.css("width",v(a)),t.overflowed=C.call(this),M.call(this),o.autoDraggerLength&&w.call(this),b.call(this),B.call(this);var r=[Math.abs(a[0].offsetTop),Math.abs(a[0].offsetLeft)];"x"!==o.axis&&(t.overflowed[0]?i[0].height()>i[0].parent().height()?y.call(this):(K(e,r[0].toString(),{dir:"y",dur:0,overwrite:"none"}),t.contentReset.y=null):(y.call(this),"y"===o.axis?T.call(this):"yx"===o.axis&&t.overflowed[1]&&K(e,r[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(t.overflowed[1]?i[1].width()>i[1].parent().width()?y.call(this):(K(e,r[1].toString(),{dir:"x",dur:0,overwrite:"none"}),t.contentReset.x=null):(y.call(this),"x"===o.axis?T.call(this):"yx"===o.axis&&t.overflowed[0]&&K(e,r[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),l&&t&&(2===l&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===l&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),G.call(this)}})},scrollTo:function(l,s){if(void 0!==l&&null!=l){var e=c.call(this);return L(e).each(function(){var e=L(this);if(e.data(P)){var t=e.data(P),o=t.opt,a={trigger:"external",scrollInertia:o.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n=L.extend(!0,{},a,s),i=V.call(this,l),r=0<n.scrollInertia&&n.scrollInertia<17?17:n.scrollInertia;i[0]=Q.call(this,i[0],"y"),i[1]=Q.call(this,i[1],"x"),n.moveDragger&&(i[0]*=t.scrollRatio.y,i[1]*=t.scrollRatio.x),n.dur=re()?0:r,setTimeout(function(){null!==i[0]&&void 0!==i[0]&&"x"!==o.axis&&t.overflowed[0]&&(n.dir="y",n.overwrite="all",K(e,i[0].toString(),n)),null!==i[1]&&void 0!==i[1]&&"y"!==o.axis&&t.overflowed[1]&&(n.dir="x",n.overwrite="none",K(e,i[1].toString(),n))},n.timeout)}})}},stop:function(){var e=c.call(this);return L(e).each(function(){var e=L(this);e.data(P)&&J(e)})},disable:function(t){var e=c.call(this);return L(e).each(function(){var e=L(this);e.data(P)&&(e.data(P),G.call(this,"remove"),T.call(this),t&&y.call(this),M.call(this,!0),e.addClass(S[3]))})},destroy:function(){var r=c.call(this);return L(r).each(function(){var e=L(this);if(e.data(P)){var t=e.data(P),o=t.opt,a=L("#mCSB_"+t.idx),n=L("#mCSB_"+t.idx+"_container"),i=L(".mCSB_"+t.idx+"_scrollbar");o.live&&d(o.liveSelector||L(r).selector),G.call(this,"remove"),T.call(this),y.call(this),e.removeData(P),te(this,"mcs"),i.remove(),n.find("img."+S[2]).removeClass(S[2]),a.replaceWith(n.contents()),e.removeClass(h+" _"+P+"_"+t.idx+" "+S[6]+" "+S[7]+" "+S[5]+" "+S[3]).addClass(S[4])}})}},c=function(){return"object"!=typeof L(this)||L(this).length<1?a:this},s=function(e){e.autoDraggerLength=!(-1<L.inArray(e.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"]))&&e.autoDraggerLength,e.autoExpandScrollbar=!(-1<L.inArray(e.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"]))&&e.autoExpandScrollbar,e.scrollButtons.enable=!(-1<L.inArray(e.theme,["minimal","minimal-dark"]))&&e.scrollButtons.enable,e.autoHideScrollbar=-1<L.inArray(e.theme,["minimal","minimal-dark"])||e.autoHideScrollbar,e.scrollbarPosition=-1<L.inArray(e.theme,["minimal","minimal-dark"])?"outside":e.scrollbarPosition},d=function(e){i[e]&&(clearTimeout(i[e]),te(i,e))},u=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},f=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},p=function(){var e=L(this),t=e.data(P),o=t.opt,a=o.autoExpandScrollbar?" "+S[1]+"_expand":"",n=["<div id='mCSB_"+t.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+t.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+a+"'><div class='"+S[12]+"'><div id='mCSB_"+t.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+t.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+t.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='"+S[12]+"'><div id='mCSB_"+t.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],i="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",r="yx"===o.axis?n[0]+n[1]:"x"===o.axis?n[1]:n[0],l="yx"===o.axis?"<div id='mCSB_"+t.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",s=o.autoHideScrollbar?" "+S[6]:"",c="x"!==o.axis&&"rtl"===t.langDir?" "+S[7]:"";o.setWidth&&e.css("width",o.setWidth),o.setHeight&&e.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===t.langDir?"989999px":o.setLeft,e.addClass(h+" _"+P+"_"+t.idx+s+c).wrapInner("<div id='mCSB_"+t.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+i+"'><div id='mCSB_"+t.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir='"+t.langDir+"' /></div>");var d=L("#mCSB_"+t.idx),u=L("#mCSB_"+t.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||u.css("width",v(u)),"outside"===o.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),d.addClass("mCSB_outside").after(r)):(d.addClass("mCSB_inside").append(r),u.wrap(l)),_.call(this);var f=[L("#mCSB_"+t.idx+"_dragger_vertical"),L("#mCSB_"+t.idx+"_dragger_horizontal")];f[0].css("min-height",f[0].height()),f[1].css("min-width",f[1].width())},v=function(e){var t=[e[0].scrollWidth,Math.max.apply(Math,e.children().map(function(){return L(this).outerWidth(!0)}).get())],o=e.parent().width();return o<t[0]?t[0]:o<t[1]?t[1]:"100%"},x=function(){var e=L(this),t=e.data(P),o=t.opt,a=L("#mCSB_"+t.idx+"_container");if(o.advanced.autoExpandHorizontalScroll&&"y"!==o.axis){a.css({width:"auto","min-width":0,"overflow-x":"scroll"});var n=Math.ceil(a[0].scrollWidth);3===o.advanced.autoExpandHorizontalScroll||2!==o.advanced.autoExpandHorizontalScroll&&n>a.parent().width()?a.css({width:n,"min-width":"100%","overflow-x":"inherit"}):a.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(a[0].getBoundingClientRect().right+.4)-Math.floor(a[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},_=function(){var e=L(this),t=e.data(P),o=t.opt,a=L(".mCSB_"+t.idx+"_scrollbar:first"),n=ne(o.scrollButtons.tabindex)?"tabindex='"+o.scrollButtons.tabindex+"'":"",i=["<a href='#' class='"+S[13]+"' "+n+" />","<a href='#' class='"+S[14]+"' "+n+" />","<a href='#' class='"+S[15]+"' "+n+" />","<a href='#' class='"+S[16]+"' "+n+" />"],r=["x"===o.axis?i[2]:i[0],"x"===o.axis?i[3]:i[1],i[2],i[3]];o.scrollButtons.enable&&a.prepend(r[0]).append(r[1]).next(".mCSB_scrollTools").prepend(r[2]).append(r[3])},w=function(){var e=L(this),t=e.data(P),o=L("#mCSB_"+t.idx),a=L("#mCSB_"+t.idx+"_container"),n=[L("#mCSB_"+t.idx+"_dragger_vertical"),L("#mCSB_"+t.idx+"_dragger_horizontal")],i=[o.height()/a.outerHeight(!1),o.width()/a.outerWidth(!1)],r=[parseInt(n[0].css("min-height")),Math.round(i[0]*n[0].parent().height()),parseInt(n[1].css("min-width")),Math.round(i[1]*n[1].parent().width())],l=g&&r[1]<r[0]?r[0]:r[1],s=g&&r[3]<r[2]?r[2]:r[3];n[0].css({height:l,"max-height":n[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":r[0]+"px"}),n[1].css({width:s,"max-width":n[1].parent().width()-10})},b=function(){var e=L(this),t=e.data(P),o=L("#mCSB_"+t.idx),a=L("#mCSB_"+t.idx+"_container"),n=[L("#mCSB_"+t.idx+"_dragger_vertical"),L("#mCSB_"+t.idx+"_dragger_horizontal")],i=[a.outerHeight(!1)-o.height(),a.outerWidth(!1)-o.width()],r=[i[0]/(n[0].parent().height()-n[0].height()),i[1]/(n[1].parent().width()-n[1].width())];t.scrollRatio={y:r[0],x:r[1]}},k=function(e,t,o){var a=o?S[0]+"_expanded":"",n=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(S[0]+" "+a),n.toggleClass(S[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(S[0]),n.removeClass(S[1])):(e.addClass(S[0]),n.addClass(S[1])))},C=function(){var e=L(this),t=e.data(P),o=L("#mCSB_"+t.idx),a=L("#mCSB_"+t.idx+"_container"),n=null==t.overflowed?a.height():a.outerHeight(!1),i=null==t.overflowed?a.width():a.outerWidth(!1),r=a[0].scrollHeight,l=a[0].scrollWidth;return n<r&&(n=r),i<l&&(i=l),[n>o.height(),i>o.width()]},y=function(){var e=L(this),t=e.data(P),o=t.opt,a=L("#mCSB_"+t.idx),n=L("#mCSB_"+t.idx+"_container"),i=[L("#mCSB_"+t.idx+"_dragger_vertical"),L("#mCSB_"+t.idx+"_dragger_horizontal")];if(J(e),("x"!==o.axis&&!t.overflowed[0]||"y"===o.axis&&t.overflowed[0])&&(i[0].add(n).css("top",0),K(e,"_resetY")),"y"!==o.axis&&!t.overflowed[1]||"x"===o.axis&&t.overflowed[1]){var r=dx=0;"rtl"===t.langDir&&(r=a.width()-n.outerWidth(!1),dx=Math.abs(r/t.scrollRatio.x)),n.css("left",r),i[1].css("left",dx),K(e,"_resetX")}},B=function(){var t=L(this),e=t.data(P),o=e.opt;if(!e.bindEvents){var a;if(r.call(this),o.contentTouchScroll&&O.call(this),I.call(this),o.mouseWheel.enable)!function e(){a=setTimeout(function(){L.event.special.mousewheel?(clearTimeout(a),D.call(t[0])):e()},100)}();A.call(this),j.call(this),o.advanced.autoScrollOnFocus&&q.call(this),o.scrollButtons.enable&&Y.call(this),o.keyboard.enable&&X.call(this),e.bindEvents=!0}},T=function(){var e=L(this),t=e.data(P),o=t.opt,a=P+"_"+t.idx,n=".mCSB_"+t.idx+"_scrollbar",i=L("#mCSB_"+t.idx+",#mCSB_"+t.idx+"_container,#mCSB_"+t.idx+"_container_wrapper,"+n+" ."+S[12]+",#mCSB_"+t.idx+"_dragger_vertical,#mCSB_"+t.idx+"_dragger_horizontal,"+n+">a"),r=L("#mCSB_"+t.idx+"_container");o.advanced.releaseDraggableSelectors&&i.add(L(o.advanced.releaseDraggableSelectors)),o.advanced.extraDraggableSelectors&&i.add(L(o.advanced.extraDraggableSelectors)),t.bindEvents&&(L(document).add(L(!F()||top.document)).unbind("."+a),i.each(function(){L(this).unbind("."+a)}),clearTimeout(e[0]._focusTimeout),te(e[0],"_focusTimeout"),clearTimeout(t.sequential.step),te(t.sequential,"step"),clearTimeout(r[0].onCompleteTimeout),te(r[0],"onCompleteTimeout"),t.bindEvents=!1)},M=function(e){var t=L(this),o=t.data(P),a=o.opt,n=L("#mCSB_"+o.idx+"_container_wrapper"),i=n.length?n:L("#mCSB_"+o.idx+"_container"),r=[L("#mCSB_"+o.idx+"_scrollbar_vertical"),L("#mCSB_"+o.idx+"_scrollbar_horizontal")],l=[r[0].find(".mCSB_dragger"),r[1].find(".mCSB_dragger")];"x"!==a.axis&&(o.overflowed[0]&&!e?(r[0].add(l[0]).add(r[0].children("a")).css("display","block"),i.removeClass(S[8]+" "+S[10])):(a.alwaysShowScrollbar?(2!==a.alwaysShowScrollbar&&l[0].css("display","none"),i.removeClass(S[10])):(r[0].css("display","none"),i.addClass(S[10])),i.addClass(S[8]))),"y"!==a.axis&&(o.overflowed[1]&&!e?(r[1].add(l[1]).add(r[1].children("a")).css("display","block"),i.removeClass(S[9]+" "+S[11])):(a.alwaysShowScrollbar?(2!==a.alwaysShowScrollbar&&l[1].css("display","none"),i.removeClass(S[11])):(r[1].css("display","none"),i.addClass(S[11])),i.addClass(S[9]))),o.overflowed[0]||o.overflowed[1]?t.removeClass(S[5]):t.addClass(S[5])},U=function(e){var t=e.type,o=e.target.ownerDocument!==document&&null!==frameElement?[L(frameElement).offset().top,L(frameElement).offset().left]:null,a=F()&&e.target.ownerDocument!==top.document&&null!==frameElement?[L(e.view.frameElement).offset().top,L(e.view.frameElement).offset().left]:[0,0];switch(t){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return o?[e.originalEvent.pageY-o[0]+a[0],e.originalEvent.pageX-o[1]+a[1],!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],i=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[n.screenY,n.screenX,1<i]:[n.pageY,n.pageX,1<i];default:return o?[e.pageY-o[0]+a[0],e.pageX-o[1]+a[1],!1]:[e.pageY,e.pageX,!1]}},r=function(){var r,l,s,c=L(this),d=c.data(P),u=d.opt,e=P+"_"+d.idx,f=["mCSB_"+d.idx+"_dragger_vertical","mCSB_"+d.idx+"_dragger_horizontal"],h=L("#mCSB_"+d.idx+"_container"),t=L("#"+f[0]+",#"+f[1]),o=u.advanced.releaseDraggableSelectors?t.add(L(u.advanced.releaseDraggableSelectors)):t,a=u.advanced.extraDraggableSelectors?L(!F()||top.document).add(L(u.advanced.extraDraggableSelectors)):L(!F()||top.document);function n(e,t,o,a){if(h[0].idleTimer=u.scrollInertia<233?250:0,r.attr("id")===f[1])var n="x",i=(r[0].offsetLeft-t+a)*d.scrollRatio.x;else var n="y",i=(r[0].offsetTop-e+o)*d.scrollRatio.y;K(c,i.toString(),{dir:n,drag:!0})}t.bind("contextmenu."+e,function(e){e.preventDefault()}).bind("mousedown."+e+" touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,function(e){if(e.stopImmediatePropagation(),e.preventDefault(),oe(e)){H=!0,g&&(document.onselectstart=function(){return!1}),W.call(h,!1),J(c);var t=(r=L(this)).offset(),o=U(e)[0]-t.top,a=U(e)[1]-t.left,n=r.height()+t.top,i=r.width()+t.left;o<n&&0<o&&a<i&&0<a&&(l=o,s=a),k(r,"active",u.autoExpandScrollbar)}}).bind("touchmove."+e,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=r.offset(),o=U(e)[0]-t.top,a=U(e)[1]-t.left;n(l,s,o,a)}),L(document).add(a).bind("mousemove."+e+" pointermove."+e+" MSPointerMove."+e,function(e){if(r){var t=r.offset(),o=U(e)[0]-t.top,a=U(e)[1]-t.left;if(l===o&&s===a)return;n(l,s,o,a)}}).add(o).bind("mouseup."+e+" touchend."+e+" pointerup."+e+" MSPointerUp."+e,function(e){r&&(k(r,"active",u.autoExpandScrollbar),r=null),H=!1,g&&(document.onselectstart=null),W.call(h,!0)})},O=function(){var d,c,u,f,h,m,p,g,v,x,_,w,S,b,C=L(this),y=C.data(P),B=y.opt,e=P+"_"+y.idx,T=L("#mCSB_"+y.idx),k=L("#mCSB_"+y.idx+"_container"),M=[L("#mCSB_"+y.idx+"_dragger_vertical"),L("#mCSB_"+y.idx+"_dragger_horizontal")],O=[],I=[],D="yx"===B.axis?"none":"all",E=[],t=k.find("iframe"),o=["touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,"touchmove."+e+" pointermove."+e+" MSPointerMove."+e,"touchend."+e+" pointerup."+e+" MSPointerUp."+e],W=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;function a(e){if(!ae(e)||H||U(e)[2])z=0;else{b=S=0,d=z=1,C.removeClass("mCS_touch_action");var t=k.offset();c=U(e)[0]-t.top,u=U(e)[1]-t.left,E=[U(e)[0],U(e)[1]]}}function n(e){if(ae(e)&&!H&&!U(e)[2]&&(B.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!b||S)&&d)){p=$();var t=T.offset(),o=U(e)[0]-t.top,a=U(e)[1]-t.left,n="mcsLinearOut";if(O.push(o),I.push(a),E[2]=Math.abs(U(e)[0]-E[0]),E[3]=Math.abs(U(e)[1]-E[1]),y.overflowed[0])var i=M[0].parent().height()-M[0].height(),r=0<c-o&&o-c>-i*y.scrollRatio.y&&(2*E[3]<E[2]||"yx"===B.axis);if(y.overflowed[1])var l=M[1].parent().width()-M[1].width(),s=0<u-a&&a-u>-l*y.scrollRatio.x&&(2*E[2]<E[3]||"yx"===B.axis);r||s?(W||e.preventDefault(),S=1):(b=1,C.addClass("mCS_touch_action")),W&&e.preventDefault(),_="yx"===B.axis?[c-o,u-a]:"x"===B.axis?[null,u-a]:[c-o,null],k[0].idleTimer=250,y.overflowed[0]&&A(_[0],0,n,"y","all",!0),y.overflowed[1]&&A(_[1],0,n,"x",D,!0)}}function i(e){if(!ae(e)||H||U(e)[2])z=0;else{z=1,e.stopImmediatePropagation(),J(C),m=$();var t=T.offset();f=U(e)[0]-t.top,h=U(e)[1]-t.left,O=[],I=[]}}function r(e){if(ae(e)&&!H&&!U(e)[2]){d=0,e.stopImmediatePropagation(),b=S=0,g=$();var t=T.offset(),o=U(e)[0]-t.top,a=U(e)[1]-t.left;if(!(30<g-p)){var n="mcsEaseOut",i=(x=1e3/(g-m))<2.5,r=i?[O[O.length-2],I[I.length-2]]:[0,0];v=i?[o-r[0],a-r[1]]:[o-f,a-h];var l=[Math.abs(v[0]),Math.abs(v[1])];x=i?[Math.abs(v[0]/4),Math.abs(v[1]/4)]:[x,x];var s=[Math.abs(k[0].offsetTop)-v[0]*R(l[0]/x[0],x[0]),Math.abs(k[0].offsetLeft)-v[1]*R(l[1]/x[1],x[1])];_="yx"===B.axis?[s[0],s[1]]:"x"===B.axis?[null,s[1]]:[s[0],null],w=[4*l[0]+B.scrollInertia,4*l[1]+B.scrollInertia];var c=parseInt(B.contentTouchScroll)||0;_[0]=c<l[0]?_[0]:0,_[1]=c<l[1]?_[1]:0,y.overflowed[0]&&A(_[0],w[0],n,"y",D,!1),y.overflowed[1]&&A(_[1],w[1],n,"x",D,!1)}}}function R(e,t){var o=[1.5*t,2*t,t/1.5,t/2];return 90<e?4<t?o[0]:o[3]:60<e?3<t?o[3]:o[2]:30<e?8<t?o[1]:6<t?o[0]:4<t?t:o[2]:8<t?t:o[3]}function A(e,t,o,a,n,i){e&&K(C,e.toString(),{dur:t,scrollEasing:o,dir:a,overwrite:n,drag:i})}k.bind(o[0],function(e){a(e)}).bind(o[1],function(e){n(e)}),T.bind(o[0],function(e){i(e)}).bind(o[2],function(e){r(e)}),t.length&&t.each(function(){L(this).bind("load",function(){F(this)&&L(this.contentDocument||this.contentWindow.document).bind(o[0],function(e){a(e),i(e)}).bind(o[1],function(e){n(e)}).bind(o[2],function(e){r(e)})})})},I=function(){var n,a=L(this),i=a.data(P),r=i.opt,l=i.sequential,e=P+"_"+i.idx,s=L("#mCSB_"+i.idx+"_container"),c=s.parent();function d(e,t,o){l.type=o&&n?"stepped":"stepless",l.scrollAmount=10,N(a,e,t,"mcsLinearOut",o?60:null)}s.bind("mousedown."+e,function(e){z||n||(n=1,H=!0)}).add(document).bind("mousemove."+e,function(e){if(!z&&n&&(window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&document.selection.createRange().text)){var t=s.offset(),o=U(e)[0]-t.top+s[0].offsetTop,a=U(e)[1]-t.left+s[0].offsetLeft;0<o&&o<c.height()&&0<a&&a<c.width()?l.step&&d("off",null,"stepped"):("x"!==r.axis&&i.overflowed[0]&&(o<0?d("on",38):o>c.height()&&d("on",40)),"y"!==r.axis&&i.overflowed[1]&&(a<0?d("on",37):a>c.width()&&d("on",39)))}}).bind("mouseup."+e+" dragend."+e,function(e){z||(n&&(n=0,d("off",null)),H=!1)})},D=function(){if(L(this).data(P)){var u=L(this),f=u.data(P),h=f.opt,e=P+"_"+f.idx,m=L("#mCSB_"+f.idx),p=[L("#mCSB_"+f.idx+"_dragger_vertical"),L("#mCSB_"+f.idx+"_dragger_horizontal")],t=L("#mCSB_"+f.idx+"_container").find("iframe");t.length&&t.each(function(){L(this).bind("load",function(){F(this)&&L(this.contentDocument||this.contentWindow.document).bind("mousewheel."+e,function(e,t){o(e,t)})})}),m.bind("mousewheel."+e,function(e,t){o(e,t)})}function o(e,t){if(J(u),!R(u,e.target)){var o="auto"!==h.mouseWheel.deltaFactor?parseInt(h.mouseWheel.deltaFactor):g&&e.deltaFactor<100?100:e.deltaFactor||100,a=h.scrollInertia;if("x"===h.axis||"x"===h.mouseWheel.axis)var n="x",i=[Math.round(o*f.scrollRatio.x),parseInt(h.mouseWheel.scrollAmount)],r="auto"!==h.mouseWheel.scrollAmount?i[1]:i[0]>=m.width()?.9*m.width():i[0],l=Math.abs(L("#mCSB_"+f.idx+"_container")[0].offsetLeft),s=p[1][0].offsetLeft,c=p[1].parent().width()-p[1].width(),d="y"===h.mouseWheel.axis?e.deltaY||t:e.deltaX;else var n="y",i=[Math.round(o*f.scrollRatio.y),parseInt(h.mouseWheel.scrollAmount)],r="auto"!==h.mouseWheel.scrollAmount?i[1]:i[0]>=m.height()?.9*m.height():i[0],l=Math.abs(L("#mCSB_"+f.idx+"_container")[0].offsetTop),s=p[0][0].offsetTop,c=p[0].parent().height()-p[0].height(),d=e.deltaY||t;"y"===n&&!f.overflowed[0]||"x"===n&&!f.overflowed[1]||((h.mouseWheel.invert||e.webkitDirectionInvertedFromDevice)&&(d=-d),h.mouseWheel.normalizeDelta&&(d=d<0?-1:1),(0<d&&0!==s||d<0&&s!==c||h.mouseWheel.preventDefault)&&(e.stopImmediatePropagation(),e.preventDefault()),e.deltaFactor<5&&!h.mouseWheel.normalizeDelta&&(r=e.deltaFactor,a=17),K(u,(l-d*r).toString(),{dir:n,dur:a}))}}},E=new Object,F=function(e){var t=!1,o=!1,a=null;if(void 0===e?o="#empty":void 0!==L(e).attr("id")&&(o=L(e).attr("id")),!1!==o&&void 0!==E[o])return E[o];if(e){try{var n=e.contentDocument||e.contentWindow.document;a=n.body.innerHTML}catch(e){}t=null!==a}else{try{var n=top.document;a=n.body.innerHTML}catch(e){}t=null!==a}return!1!==o&&(E[o]=t),t},W=function(e){var t=this.find("iframe");if(t.length){var o=e?"auto":"none";t.css("pointer-events",o)}},R=function(e,t){var o=t.nodeName.toLowerCase(),a=e.data(P).opt.mouseWheel.disableOver;return-1<L.inArray(o,a)&&!(-1<L.inArray(o,["select","textarea"])&&!L(t).is(":focus"))},A=function(){var r,l=L(this),s=l.data(P),e=P+"_"+s.idx,c=L("#mCSB_"+s.idx+"_container"),d=c.parent(),t=L(".mCSB_"+s.idx+"_scrollbar ."+S[12]);t.bind("mousedown."+e+" touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,function(e){H=!0,L(e.target).hasClass("mCSB_dragger")||(r=1)}).bind("touchend."+e+" pointerup."+e+" MSPointerUp."+e,function(e){H=!1}).bind("click."+e,function(e){if(r&&(r=0,L(e.target).hasClass(S[12])||L(e.target).hasClass("mCSB_draggerRail"))){J(l);var t=L(this),o=t.find(".mCSB_dragger");if(0<t.parent(".mCSB_scrollTools_horizontal").length){if(!s.overflowed[1])return;var a="x",n=e.pageX>o.offset().left?-1:1,i=Math.abs(c[0].offsetLeft)-n*(.9*d.width())}else{if(!s.overflowed[0])return;var a="y",n=e.pageY>o.offset().top?-1:1,i=Math.abs(c[0].offsetTop)-n*(.9*d.height())}K(l,i.toString(),{dir:a,scrollEasing:"mcsEaseInOut"})}})},q=function(){var i=L(this),e=i.data(P),r=e.opt,t=P+"_"+e.idx,l=L("#mCSB_"+e.idx+"_container"),s=l.parent();l.bind("focusin."+t,function(e){var n=L(document.activeElement),t=l.find(".mCustomScrollBox").length;n.is(r.advanced.autoScrollOnFocus)&&(J(i),clearTimeout(i[0]._focusTimeout),i[0]._focusTimer=t?17*t:0,i[0]._focusTimeout=setTimeout(function(){var e=[ie(n)[0],ie(n)[1]],t=[l[0].offsetTop,l[0].offsetLeft],o=[0<=t[0]+e[0]&&t[0]+e[0]<s.height()-n.outerHeight(!1),0<=t[1]+e[1]&&t[0]+e[1]<s.width()-n.outerWidth(!1)],a="yx"!==r.axis||o[0]||o[1]?"all":"none";"x"===r.axis||o[0]||K(i,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:a,dur:0}),"y"===r.axis||o[1]||K(i,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:a,dur:0})},i[0]._focusTimer))})},j=function(){var e=L(this),t=e.data(P),o=P+"_"+t.idx,a=L("#mCSB_"+t.idx+"_container").parent();a.bind("scroll."+o,function(e){0===a.scrollTop()&&0===a.scrollLeft()||L(".mCSB_"+t.idx+"_scrollbar").css("visibility","hidden")})},Y=function(){var a=L(this),n=a.data(P),i=n.opt,r=n.sequential,e=P+"_"+n.idx,t=".mCSB_"+n.idx+"_scrollbar",o=L(t+">a");o.bind("contextmenu."+e,function(e){e.preventDefault()}).bind("mousedown."+e+" touchstart."+e+" pointerdown."+e+" MSPointerDown."+e+" mouseup."+e+" touchend."+e+" pointerup."+e+" MSPointerUp."+e+" mouseout."+e+" pointerout."+e+" MSPointerOut."+e+" click."+e,function(e){if(e.preventDefault(),oe(e)){var t=L(this).attr("class");switch(r.type=i.scrollButtons.scrollType,e.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===r.type)return;H=!0,n.tweenRunning=!1,o("on",t);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===r.type)return;H=!1,r.dir&&o("off",t);break;case"click":if("stepped"!==r.type||n.tweenRunning)return;o("on",t)}}function o(e,t){r.scrollAmount=i.scrollButtons.scrollAmount,N(a,e,t)}})},X=function(){var l=L(this),s=l.data(P),c=s.opt,d=s.sequential,e=P+"_"+s.idx,t=L("#mCSB_"+s.idx),u=L("#mCSB_"+s.idx+"_container"),f=u.parent(),h="input,textarea,select,datalist,keygen,[contenteditable='true']",o=u.find("iframe"),a=["blur."+e+" keydown."+e+" keyup."+e];function n(e){switch(e.type){case"blur":s.tweenRunning&&d.dir&&r("off",null);break;case"keydown":case"keyup":var t=e.keyCode?e.keyCode:e.which,o="on";if("x"!==c.axis&&(38===t||40===t)||"y"!==c.axis&&(37===t||39===t)){if((38===t||40===t)&&!s.overflowed[0]||(37===t||39===t)&&!s.overflowed[1])return;"keyup"===e.type&&(o="off"),L(document.activeElement).is(h)||(e.preventDefault(),e.stopImmediatePropagation(),r(o,t))}else if(33===t||34===t){if((s.overflowed[0]||s.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type){J(l);var a=34===t?-1:1;if("x"===c.axis||"yx"===c.axis&&s.overflowed[1]&&!s.overflowed[0])var n="x",i=Math.abs(u[0].offsetLeft)-a*(.9*f.width());else var n="y",i=Math.abs(u[0].offsetTop)-a*(.9*f.height());K(l,i.toString(),{dir:n,scrollEasing:"mcsEaseInOut"})}}else if((35===t||36===t)&&!L(document.activeElement).is(h)&&((s.overflowed[0]||s.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type)){if("x"===c.axis||"yx"===c.axis&&s.overflowed[1]&&!s.overflowed[0])var n="x",i=35===t?Math.abs(f.width()-u.outerWidth(!1)):0;else var n="y",i=35===t?Math.abs(f.height()-u.outerHeight(!1)):0;K(l,i.toString(),{dir:n,scrollEasing:"mcsEaseInOut"})}}function r(e,t){d.type=c.keyboard.scrollType,d.scrollAmount=c.keyboard.scrollAmount,"stepped"===d.type&&s.tweenRunning||N(l,e,t)}}o.length&&o.each(function(){L(this).bind("load",function(){F(this)&&L(this.contentDocument||this.contentWindow.document).bind(a[0],function(e){n(e)})})}),t.attr("tabindex","0").bind(a[0],function(e){n(e)})},N=function(u,e,t,f,h){var m=u.data(P),p=m.opt,g=m.sequential,v=L("#mCSB_"+m.idx+"_container"),o="stepped"===g.type,x=p.scrollInertia<26?26:p.scrollInertia,_=p.scrollInertia<1?17:p.scrollInertia;switch(e){case"on":if(g.dir=[t===S[16]||t===S[15]||39===t||37===t?"x":"y",t===S[13]||t===S[15]||38===t||37===t?-1:1],J(u),ne(t)&&"stepped"===g.type)return;w(o);break;case"off":clearTimeout(g.step),te(g,"step"),J(u),(o||m.tweenRunning&&g.dir)&&w(!0)}function w(e){p.snapAmount&&(g.scrollAmount=p.snapAmount instanceof Array?"x"===g.dir[0]?p.snapAmount[1]:p.snapAmount[0]:p.snapAmount);var t="stepped"!==g.type,o=h||(e?t?x/1.5:_:1e3/60),a=e?t?7.5:40:2.5,n=[Math.abs(v[0].offsetTop),Math.abs(v[0].offsetLeft)],i=[10<m.scrollRatio.y?10:m.scrollRatio.y,10<m.scrollRatio.x?10:m.scrollRatio.x],r="x"===g.dir[0]?n[1]+g.dir[1]*(i[1]*a):n[0]+g.dir[1]*(i[0]*a),l="x"===g.dir[0]?n[1]+g.dir[1]*parseInt(g.scrollAmount):n[0]+g.dir[1]*parseInt(g.scrollAmount),s="auto"!==g.scrollAmount?l:r,c=f||(e?t?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),d=!!e;e&&o<17&&(s="x"===g.dir[0]?n[1]:n[0]),K(u,s.toString(),{dir:g.dir[0],scrollEasing:c,dur:o,onComplete:d}),e?g.dir=!1:(clearTimeout(g.step),g.step=setTimeout(function(){w()},o))}},V=function(e){var t=L(this).data(P).opt,o=[];return"function"==typeof e&&(e=e()),e instanceof Array?o=1<e.length?[e[0],e[1]]:"x"===t.axis?[null,e[0]]:[e[0],null]:(o[0]=e.y?e.y:e.x||"x"===t.axis?null:e,o[1]=e.x?e.x:e.y||"y"===t.axis?null:e),"function"==typeof o[0]&&(o[0]=o[0]()),"function"==typeof o[1]&&(o[1]=o[1]()),o},Q=function(e,t){if(null!=e&&void 0!==e){var o=L(this),a=o.data(P),n=a.opt,i=L("#mCSB_"+a.idx+"_container"),r=i.parent(),l=typeof e;t||(t="x"===n.axis?"x":"y");var s="x"===t?i.outerWidth(!1)-r.width():i.outerHeight(!1)-r.height(),c="x"===t?i[0].offsetLeft:i[0].offsetTop,d="x"===t?"left":"top";switch(l){case"function":return e();case"object":var u=e.jquery?e:L(e);if(!u.length)return;return"x"===t?ie(u)[1]:ie(u)[0];case"string":case"number":if(ne(e))return Math.abs(e);if(-1!==e.indexOf("%"))return Math.abs(s*parseInt(e)/100);if(-1!==e.indexOf("-="))return Math.abs(c-parseInt(e.split("-=")[1]));if(-1!==e.indexOf("+=")){var f=c+parseInt(e.split("+=")[1]);return 0<=f?0:Math.abs(f)}if(-1!==e.indexOf("px")&&ne(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(r.height()-i.outerHeight(!1));if("right"===e)return Math.abs(r.width()-i.outerWidth(!1));if("first"===e||"last"===e){var u=i.find(":"+e);return"x"===t?ie(u)[1]:ie(u)[0]}return L(e).length?"x"===t?ie(L(e))[1]:ie(L(e))[0]:(i.css(d,e),void m.update.call(null,o[0]))}}},G=function(e){var t=L(this),o=t.data(P),a=o.opt,n=L("#mCSB_"+o.idx+"_container");if(e)return clearTimeout(n[0].autoUpdate),void te(n[0],"autoUpdate");function i(e){clearTimeout(n[0].autoUpdate),m.update.call(null,t[0],e)}!function e(){clearTimeout(n[0].autoUpdate),0!==t.parents("html").length?n[0].autoUpdate=setTimeout(function(){return a.advanced.updateOnSelectorChange&&(o.poll.change.n=function(){!0===a.advanced.updateOnSelectorChange&&(a.advanced.updateOnSelectorChange="*");var e=0,t=n.find(a.advanced.updateOnSelectorChange);return a.advanced.updateOnSelectorChange&&0<t.length&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}(),o.poll.change.n!==o.poll.change.o)?(o.poll.change.o=o.poll.change.n,void i(3)):a.advanced.updateOnContentResize&&(o.poll.size.n=t[0].scrollHeight+t[0].scrollWidth+n[0].offsetHeight+t[0].offsetHeight+t[0].offsetWidth,o.poll.size.n!==o.poll.size.o)?(o.poll.size.o=o.poll.size.n,void i(1)):!a.advanced.updateOnImageLoad||"auto"===a.advanced.updateOnImageLoad&&"y"===a.axis||(o.poll.img.n=n.find("img").length,o.poll.img.n===o.poll.img.o)?void((a.advanced.updateOnSelectorChange||a.advanced.updateOnContentResize||a.advanced.updateOnImageLoad)&&e()):(o.poll.img.o=o.poll.img.n,void n.find("img").each(function(){!function(e){if(L(e).hasClass(S[2]))return i();var t,o,a=new Image;a.onload=(t=a,o=function(){this.onload=null,L(e).addClass(S[2]),i(2)},function(){return o.apply(t,arguments)}),a.src=e.src}(this)}))},a.advanced.autoUpdateTimeout):t=null}()},J=function(e){var t=e.data(P),o=L("#mCSB_"+t.idx+"_container,#mCSB_"+t.idx+"_container_wrapper,#mCSB_"+t.idx+"_dragger_vertical,#mCSB_"+t.idx+"_dragger_horizontal");o.each(function(){ee.call(this)})},K=function(n,e,i){var t=n.data(P),o=t.opt,a={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:o.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},i=L.extend(a,i),r=[i.dur,i.drag?0:i.dur],l=L("#mCSB_"+t.idx),s=L("#mCSB_"+t.idx+"_container"),c=s.parent(),d=o.callbacks.onTotalScrollOffset?V.call(n,o.callbacks.onTotalScrollOffset):[0,0],u=o.callbacks.onTotalScrollBackOffset?V.call(n,o.callbacks.onTotalScrollBackOffset):[0,0];if(t.trigger=i.trigger,0===c.scrollTop()&&0===c.scrollLeft()||(L(".mCSB_"+t.idx+"_scrollbar").css("visibility","visible"),c.scrollTop(0).scrollLeft(0)),"_resetY"!==e||t.contentReset.y||(B("onOverflowYNone")&&o.callbacks.onOverflowYNone.call(n[0]),t.contentReset.y=1),"_resetX"!==e||t.contentReset.x||(B("onOverflowXNone")&&o.callbacks.onOverflowXNone.call(n[0]),t.contentReset.x=1),"_resetY"!==e&&"_resetX"!==e){if(!t.contentReset.y&&n[0].mcs||!t.overflowed[0]||(B("onOverflowY")&&o.callbacks.onOverflowY.call(n[0]),t.contentReset.x=null),!t.contentReset.x&&n[0].mcs||!t.overflowed[1]||(B("onOverflowX")&&o.callbacks.onOverflowX.call(n[0]),t.contentReset.x=null),o.snapAmount){var f=o.snapAmount instanceof Array?"x"===i.dir?o.snapAmount[1]:o.snapAmount[0]:o.snapAmount;h=e,m=f,p=o.snapOffset,e=Math.round(h/m)*m-p}var h,m,p;switch(i.dir){case"x":var g=L("#mCSB_"+t.idx+"_dragger_horizontal"),v="left",x=s[0].offsetLeft,_=[l.width()-s.outerWidth(!1),g.parent().width()-g.width()],w=[e,0===e?0:e/t.scrollRatio.x],S=d[1],b=u[1],C=0<S?S/t.scrollRatio.x:0,y=0<b?b/t.scrollRatio.x:0;break;case"y":var g=L("#mCSB_"+t.idx+"_dragger_vertical"),v="top",x=s[0].offsetTop,_=[l.height()-s.outerHeight(!1),g.parent().height()-g.height()],w=[e,0===e?0:e/t.scrollRatio.y],S=d[0],b=u[0],C=0<S?S/t.scrollRatio.y:0,y=0<b?b/t.scrollRatio.y:0}w[1]<0||0===w[0]&&0===w[1]?w=[0,0]:w[1]>=_[1]?w=[_[0],_[1]]:w[0]=-w[0],n[0].mcs||(T(),B("onInit")&&o.callbacks.onInit.call(n[0])),clearTimeout(s[0].onCompleteTimeout),Z(g[0],v,Math.round(w[1]),r[1],i.scrollEasing),!t.tweenRunning&&(0===x&&0<=w[0]||x===_[0]&&w[0]<=_[0])||Z(s[0],v,Math.round(w[0]),r[0],i.scrollEasing,i.overwrite,{onStart:function(){i.callbacks&&i.onStart&&!t.tweenRunning&&(B("onScrollStart")&&(T(),o.callbacks.onScrollStart.call(n[0])),t.tweenRunning=!0,k(g),t.cbOffsets=[o.callbacks.alwaysTriggerOffsets||x>=_[0]+S,o.callbacks.alwaysTriggerOffsets||x<=-b])},onUpdate:function(){i.callbacks&&i.onUpdate&&B("whileScrolling")&&(T(),o.callbacks.whileScrolling.call(n[0]))},onComplete:function(){if(i.callbacks&&i.onComplete){"yx"===o.axis&&clearTimeout(s[0].onCompleteTimeout);var e=s[0].idleTimer||0;s[0].onCompleteTimeout=setTimeout(function(){B("onScroll")&&(T(),o.callbacks.onScroll.call(n[0])),B("onTotalScroll")&&w[1]>=_[1]-C&&t.cbOffsets[0]&&(T(),o.callbacks.onTotalScroll.call(n[0])),B("onTotalScrollBack")&&w[1]<=y&&t.cbOffsets[1]&&(T(),o.callbacks.onTotalScrollBack.call(n[0])),t.tweenRunning=!1,s[0].idleTimer=0,k(g,"hide")},e)}}})}function B(e){return t&&o.callbacks[e]&&"function"==typeof o.callbacks[e]}function T(){var e=[s[0].offsetTop,s[0].offsetLeft],t=[g[0].offsetTop,g[0].offsetLeft],o=[s.outerHeight(!1),s.outerWidth(!1)],a=[l.height(),l.width()];n[0].mcs={content:s,top:e[0],left:e[1],draggerTop:t[0],draggerLeft:t[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(o[0])-a[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(o[1])-a[1])),direction:i.dir}}},Z=function(e,t,o,a,n,i,r){e._mTween||(e._mTween={top:{},left:{}});var l,s,r=r||{},c=r.onStart||function(){},d=r.onUpdate||function(){},u=r.onComplete||function(){},f=$(),h=0,m=e.offsetTop,p=e.style,g=e._mTween[t];"left"===t&&(m=e.offsetLeft);var v=o-m;function x(){g.stop||(h||c.call(),h=$()-f,_(),h>=g.time&&(g.time=h>g.time?h+l-(h-g.time):h+l-1,g.time<h+1&&(g.time=h+1)),g.time<a?g.id=s(x):u.call())}function _(){0<a?(g.currVal=function(e,t,o,a,n){switch(n){case"linear":case"mcsLinear":return o*e/a+t;case"mcsLinearOut":return e/=a,e--,o*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return(e/=a/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t;case"easeInOutStrong":return(e/=a/2)<1?o/2*Math.pow(2,10*(e-1))+t:(e--,o/2*(2-Math.pow(2,-10*e))+t);case"easeInOut":case"mcsEaseInOut":return(e/=a/2)<1?o/2*e*e*e+t:o/2*((e-=2)*e*e+2)+t;case"easeOutSmooth":return e/=a,-o*(--e*e*e*e-1)+t;case"easeOutStrong":return o*(1-Math.pow(2,-10*e/a))+t;case"easeOut":case"mcsEaseOut":default:var i=(e/=a)*e,r=i*e;return t+o*(.499999999999997*r*i+-2.5*i*i+5.5*r+-6.5*i+4*e)}}(g.time,m,v,a,n),p[t]=Math.round(g.currVal)+"px"):p[t]=o+"px",d.call()}g.stop=0,"none"!==i&&null!=g.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(g.id):clearTimeout(g.id),g.id=null),l=1e3/60,g.time=h+l,s=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return _(),setTimeout(e,.01)},g.id=s(x)},$=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},ee=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],o=0;o<t.length;o++){var a=t[o];e._mTween[a].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[a].id):clearTimeout(e._mTween[a].id),e._mTween[a].id=null,e._mTween[a].stop=1)}},te=function(t,o){try{delete t[o]}catch(e){t[o]=null}},oe=function(e){return!(e.which&&1!==e.which)},ae=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ne=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ie=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},re=function(){var e=function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}();return!!e&&document[e]},L.fn[h]=function(e){return m[e]?m[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void L.error("Method "+e+" does not exist"):m.init.apply(this,arguments)},L[h]=function(e){return m[e]?m[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void L.error("Method "+e+" does not exist"):m.init.apply(this,arguments)},L[h].defaults=n,window[h]=!0,L(window).bind("load",function(){L(a)[h](),L.extend(L.expr[":"],{mcsInView:L.expr[":"].mcsInView||function(e){var t,o,a=L(e),n=a.parents(".mCSB_container");if(n.length)return t=n.parent(),0<=(o=[n[0].offsetTop,n[0].offsetLeft])[0]+ie(a)[0]&&o[0]+ie(a)[0]<t.height()-a.outerHeight(!1)&&0<=o[1]+ie(a)[1]&&o[1]+ie(a)[1]<t.width()-a.outerWidth(!1)},mcsInSight:L.expr[":"].mcsInSight||function(e,t,o){var a,n,i,r,l=L(e),s=l.parents(".mCSB_container"),c="exact"===o[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(s.length)return a=[l.outerHeight(!1),l.outerWidth(!1)],i=[s[0].offsetTop+ie(l)[0],s[0].offsetLeft+ie(l)[1]],n=[s.parent()[0].offsetHeight,s.parent()[0].offsetWidth],i[0]-n[0]*(r=[a[0]<n[0]?c[0]:c[1],a[1]<n[1]?c[0]:c[1]])[0][0]<0&&0<=i[0]+a[0]-n[0]*r[0][1]&&i[1]-n[1]*r[1][0]<0&&0<=i[1]+a[1]-n[1]*r[1][1]},mcsOverflow:L.expr[":"].mcsOverflow||function(e){var t=L(e).data(P);if(t)return t.overflowed[0]||t.overflowed[1]}})})});
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("Avalon requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(j,e){var s=new Date-0,L=j.document,t=L.getElementsByTagName("head")[0],C=t.insertBefore(document.createElement("avalon"),t.firstChild);C.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>",C.setAttribute("ms-skip","1"),C.className="avalonHide";var n=/\[native code\]/;function N(){j.console&&te.debug&&Function.apply.call(console.log,console,arguments)}var r="$"+s,h={},o=/[^, ]+/g,u=/\w+/g,i=/^\[object SVG\w*Element\]$/,a=/^\[object (?:Window|DOMWindow|global)\]$/,c=Object.prototype,l=c.hasOwnProperty,f=c.toString,d=Array.prototype,p=d.slice,v=j.dispatchEvent,m=L.documentElement,D=L.createDocumentFragment(),y=L.createElement("div"),g={};"Boolean Number String Function Array Date RegExp Object Error".replace(o,function(e){g["[object "+e+"]"]=e.toLowerCase()});var x=1024,b=NaN;function $(){}function w(e){return Function.apply($,e)}function k(e,t){"string"==typeof e&&(e=e.match(o)||[]);for(var n={},r=void 0!==t?t:1,i=0,a=e.length;i<a;i++)n[e[i]]=r;return n}j.VBArray&&(b=document.documentMode||(j.XMLHttpRequest?7:6));var H=function(e){return e=e||"avalon",String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)},P=function(e){return new P.init(e)};if(P.nextTick=new function(){var e=j.setImmediate,t=j.MutationObserver;if(e)return e.bind(j);var n=[];if(t){var r=document.createTextNode("avalon");new t(function(){for(var e=n.length,t=0;t<e;t++)n[t]();n=n.slice(e)}).observe(r,{characterData:!0});var i=!1;return function(e){n.push(e),i=!i,r.data=i}}return function(e){setTimeout(e,4)}},!"司徒正美".trim){var T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(T,"")}}var A=!{toString:null}.propertyIsEnumerable("toString"),E=function(){}.propertyIsEnumerable("prototype"),_=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],S=_.length;Object.keys||(Object.keys=function(e){var t=[],n=E&&"function"==typeof e;if("string"==typeof e||e&&e.callee)for(var r=0;r<e.length;++r)t.push(String(r));else for(var i in e)n&&"prototype"===i||!l.call(e,i)||t.push(String(i));if(A)for(var a=e.constructor,o=a&&a.prototype===e,s=0;s<S;s++){var c=_[s];o&&"constructor"===c||!l.call(e,c)||t.push(c)}return t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===f.call(e)}),$.bind||(Function.prototype.bind=function(n){if(arguments.length<2&&void 0===n)return this;var r=this,i=arguments;return function(){var e,t=[];for(e=1;e<i.length;e++)t.push(i[e]);for(e=0;e<arguments.length;e++)t.push(arguments[e]);return r.apply(n,t)}});var O,M,F=d.slice;try{F.call(document.documentElement)}catch(e){p=d.slice=function(e,t){if(t=void 0!==t?t:this.length,Array.isArray(this))return F.call(this,e,t);var n,r,i=[],a=this.length,o=e||0,s=t||a;if(t<0&&(s=a+t),0<(r=s-(o=0<=o?o:a+o)))if(i=new Array(r),this.charAt)for(n=0;n<r;n++)i[n]=this.charAt(o+n);else for(n=0;n<r;n++)i[n]=this[o+n];return i}}function R(e,t,n){var r="for(var "+e+"i=0,n = this.length; i < n; i++){"+t.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+n;return Function("fn,scope",r)}if(!/\[native code\]/.test(d.map)){var B={indexOf:function(e,t){var n=this.length,r=~~t;for(r<0&&(r+=n);r<n;r++)if(this[r]===e)return r;return-1},lastIndexOf:function(e,t){var n=this.length,r=null==t?n-1:t;for(r<0&&(r=Math.max(0,n+r));0<=r;r--)if(this[r]===e)return r;return-1},forEach:R("","_",""),filter:R("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:R("r=[],","r[i]=_","return r"),some:R("","if(_)return true","return false"),every:R("","if(!_)return false","return true")};for(var I in B)d[I]=B[I]}function V(e){return a.test(f.call(e))}for(O in P.init=function(e){this[0]=this.element=e},P.fn=P.prototype=P.init.prototype,P.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?g[f.call(e)]||"object":typeof e},P.isFunction="object"==typeof alert?function(e){try{return/^\s*\bfunction\b/.test(e+"")}catch(e){return!1}}:function(e){return"[object Function]"===f.call(e)},P.isWindow=function(e){return!!e&&(e==e.document&&e.document!=e)},V(j)&&(P.isWindow=V),P({}))break;M="0"!==O,P.isPlainObject=function(e,t){if(!e||"object"!==P.type(e)||e.nodeType||P.isWindow(e))return!1;try{if(e.constructor&&!l.call(e,"constructor")&&!l.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(M)for(t in e)return l.call(e,t);for(t in e);return void 0===t||l.call(e,t)},n.test(Object.getPrototypeOf)&&(P.isPlainObject=function(e){return"[object Object]"===f.call(e)&&Object.getPrototypeOf(e)===c}),P.mix=P.fn.mix=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[1]||{},s++),"object"==typeof o||P.isFunction(o)||(o={}),s===c&&(o=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e){n=o[t];try{r=e[t]}catch(e){continue}o!==r&&(l&&r&&(P.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,a=n&&Array.isArray(n)?n:[]):a=n&&P.isPlainObject(n)?n:{},o[t]=P.mix(l,a,r)):void 0!==r&&(o[t]=r))}return o},P.mix({rword:o,subscribers:r,version:1.59,ui:{},log:N,slice:function(e,t,n){return p.call(e,t,n)},noop:$,error:function(e,t){throw(t||Error)(e)},oneObject:k,range:function(e,t,n){n||(n=1),null==t&&(t=e||0,e=0);for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e,e+=n;return a},eventHooks:{},bind:function(t,e,n,r){var i=P.eventHooks[e];"object"==typeof i&&(e=i.type||e,r=i.phase||!!r,n=i.fix?i.fix(t,n):n);var a=v?n:function(e){n.call(t,function(e){var t={};for(var n in e)t[n]=e[n];var r=t.target=e.srcElement;if(0===e.type.indexOf("key"))t.which=null!=e.charCode?e.charCode:e.keyCode;else if(Z.test(e.type)){var i=r.ownerDocument||L,a="BackCompat"===i.compatMode?i.body:i.documentElement;t.pageX=e.clientX+(a.scrollLeft>>0)-(a.clientLeft>>0),t.pageY=e.clientY+(a.scrollTop>>0)-(a.clientTop>>0),t.wheelDeltaY=t.wheelDelta,t.wheelDeltaX=0}return t.timeStamp=new Date-0,t.originalEvent=e,t.preventDefault=function(){e.returnValue=!1},t.stopPropagation=function(){e.cancelBubble=!0},t}(e))};return v?t.addEventListener(e,a,r):t.attachEvent("on"+e,a),a},unbind:function(e,t,n,r){var i=P.eventHooks[t],a=n||$;"object"==typeof i&&(t=i.type||t,r=i.phase||!!r),v?e.removeEventListener(t,a,r):e.detachEvent("on"+t,a)},css:function(e,t,n){e instanceof P&&(e=e[0]);var r=/[_-]/.test(t)?Qe(t):t;if(t=P.cssName(r)||r,void 0===n||"boolean"==typeof n){"background"===t&&(t="backgroundColor");var i=(ct[r+":get"]||ct["@:get"])(e,t);return!0===n?parseFloat(i)||0:i}if(""===n)e.style[t]="";else{if(null==n||n!=n)return;isFinite(n)&&!P.cssNumber[r]&&(n+="px"),(ct[r+":set"]||ct["@:set"])(e,t,n)}},each:function(e,t){if(e){var n=0;if(function(t){if(!t)return!1;var e=t.length;if(e===e>>>0){var n=f.call(t).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(n))return!1;if("Array"===n)return!0;try{return!1!=={}.propertyIsEnumerable.call(t,"length")||/^\s?function/.test(t.item||t.callee)}catch(e){return!t.window}}return!1}(e))for(var r=e.length;n<r&&!1!==t(n,e[n]);n++);else for(n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))break}},getWidgetData:function(e,t){var n=P(e).data(),r={};for(var i in n)0===i.indexOf(t)&&(r[i.replace(t,"").replace(/\w/,function(e){return e.toLowerCase()})]=n[i]);return r},Array:{ensure:function(e,t){if(-1===e.indexOf(t))return e.push(t)},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var n=e.indexOf(t);return!!~n&&P.Array.removeAt(e,n)}}});var q=P.bindingHandlers={},z=P.bindingExecutors={},W=P.directives={};P.directive=function(e,t){return q[e]=t.init=t.init||$,z[e]=t.update=t.update||$,W[e]=t};var X=new function(){function e(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap={}}var t=e.prototype;return t.put=function(e,t){var n={key:e,value:t};return this._keymap[e]=n,this.tail?(this.tail.newer=n).older=this.tail:this.head=n,this.tail=n,this.size===this.limit?this.shift():this.size++,t},t.shift=function(){var e=this.head;e&&(this.head=this.head.newer,this.head.older=e.newer=e.older=this._keymap[e.key]=void 0,delete this._keymap[e.key])},t.get=function(e){var t=this._keymap[e];if(void 0!==t)return t===this.tail?t.value:(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),(this.tail=t).value)},e};function Y(){return(new XMLSerializer).serializeToString(this)}if(P.contains=function(e,t){try{for(;t=t.parentNode;)if(t===e)return!0;return!1}catch(e){return!1}},L.contains||(L.contains=function(e){return P.contains(L,e)}),j.SVGElement){L.createTextNode("x").contains||(Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))});var G="http://www.w3.org/2000/svg",U=L.createElementNS(G,"svg");if(U.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />',!i.test(U.firstChild)){function J(e,t){if(e&&e.childNodes)for(var n,r=e.childNodes,i=0;n=r[i++];)if(n.tagName){var a=L.createElementNS(G,n.tagName.toLowerCase());d.forEach.call(n.attributes,function(e){a.setAttribute(e.name,e.value)}),J(n,a),t.appendChild(a)}}Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:Y,set:function(e){var t=this.tagName.toLowerCase(),n=this.parentNode,r=P.parseHTML(e);if("svg"===t)n.insertBefore(r,this);else{var i=L.createDocumentFragment();J(r,i),n.insertBefore(i,this)}n.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(n,"")},set:function(e){P.clearHTML&&(P.clearHTML(this),J(P.parseHTML(e),this))}}})}}!m.outerHTML&&j.HTMLElement&&HTMLElement.prototype.__defineGetter__("outerHTML",Y);var Z=/^(?:mouse|contextmenu|drag)|click/;var K=P.eventHooks;if("onmouseenter"in m||P.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(i,e){K[i]={type:e,fix:function(n,r){return function(e){var t=e.relatedTarget;if(!t||t!==n&&!(16&n.compareDocumentPosition(t)))return delete e.type,e.type=i,r.call(n,e)}}}}),P.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,t){j[e]&&!K.animationend&&(K.animationend={type:t})}),"oninput"in L.createElement("input")||(K.input={type:"propertychange",fix:function(t,n){return function(e){if("value"===e.propertyName)return e.type="input",n.call(t,e)}}}),void 0===L.onmousewheel){var Q=void 0!==L.onwheel?"wheel":"DOMMouseScroll",ee="wheel"===Q?"deltaY":"detail";K.mousewheel={type:Q,fix:function(t,n){return function(e){e.wheelDeltaY=e.wheelDelta=0<e[ee]?-120:120,e.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(e,"type",{value:"mousewheel"}),n.call(t,e)}}}}function te(e){for(var t in e)if(l.call(e,t)){var n=e[t];"function"==typeof te.plugins[t]?te.plugins[t](n):"object"==typeof te[t]?P.mix(te[t],n):te[t]=n}return this}P.config=te;var ne,re,ie,ae,oe=/[-.*+?^${}()|[\]\/\\]/g;function se(e){return(e+"").replace(oe,"\\$&")}var ce={interpolate:function(e){if(ne=e[0],re=e[1],ne===re)throw new SyntaxError("openTag!==closeTag");te.openTag=ne,te.closeTag=re;var t=se(ne),n=se(re);ie=new RegExp(t+"([\\s\\S]*)"+n),ae=new RegExp(t+"([\\s\\S]*)"+n,"g"),new RegExp(t+"[\\s\\S]*"+n+"|\\sms-")}};function le(e,t){var n=this.$events||(this.$events={}),r=n[e]||(n[e]=[]);if("function"==typeof t){var i=t;i.uuid="_"+ ++x,(t={element:m,type:"user-watcher",handler:$,vmodels:[this],expr:e,uuid:i.uuid}).wildcard=/\*/.test(e)}if(t.update)t.oneTime||P.Array.ensure(r,t);else{if(/\w\.*\B/.test(e)||"*"===e){t.getter=$;var a=this;t.update=function(){var e=this.fireArgs||[];e[2]&&t.handler.apply(a,e),delete this.fireArgs},r.sync=!0,P.Array.ensure(r,t)}else P.injectBinding(t);i&&(t.handler=i)}return function(){t.update=t.getter=t.handler=$,t.element=L.createElement("a")}}function ue(e,t){var n=this.$events;if(n&&n[e]){t&&(t[2]=e);var r=n[e];if(function(e,t){if(!e)return;444<new Date-He&&"object"==typeof e[0]&&Re();for(var n,r=[],i=[],a=0;n=e[a++];)"user-watcher"===n.type?r.push(n):n.update&&P.contains(L,n.element)&&i.push(n);if(te.async){for(gn.render(),a=0;n=i[a++];)if(n.update){n.uuid=n.uuid||"_"+ ++x;var o=n.uuid;gn.queue[o]||(gn.queue[o]="__",gn.queue.push(n))}}else for(a=0;n=i[a++];)n.update&&n.update();for(a=0;n=r[a++];)(t&&t[2]===n.expr||n.wildcard)&&(n.fireArgs=t),n.update()}(r,t),t&&n["*"]&&!/\./.test(e))for(var i,a=0;i=n["*"][a++];)try{i.handler.apply(this,t)}catch(e){}var o=this.$up;o&&(this.$pathname&&ue.call(o,this.$pathname+"."+e,t),ue.call(o,"*."+e,t))}else{if(o=this.$up,this.$ups){for(var s in this.$ups)ue.call(this.$ups[s],s+"."+e,t);return}if(o){var c=this.$pathname;""===c&&(c="*");var l=c+"."+e;-1===(r=l.split(".")).indexOf("*")?(ue.call(o,l,t),r[1]="*",ue.call(o,r.join("."),t)):ue.call(o,l,t)}}}(te.plugins=ce).interpolate(["{{","}}"]),te.async=!0,te.debug=!0,te.paths={},te.shim={},te.maxRepeatSize=100;var fe=P.vmodels={};P.define=function(e){var t=e.$id;t||N("warning: vm必须指定$id");var n=me(e);return n.$id=t,fe[t]=n};var de=k("$id,$watch,$fire,$events,$model,$skipArray,$active,$pathname,$up,$track,$accessors,$ups"),pe=Object.defineProperty,he=!0;try{pe({},"_",{value:"x"});var ve=Object.defineProperties}catch(e){he=!1}function me(e,t){return(t=t||{}).watch=!0,ge(e,t)}function ye(){}function ge(r,e){if(!r||r.$id&&r.$accessors||r.nodeName&&0<r.nodeType)return r;var t=(e=e||h).force||h,i=e.old,n=i&&i.$accessors||h,a=new ye,o={},s={},c=[],l=[],u={};r.$skipArray&&(u=k(r.$skipArray),delete r.$skipArray);var f=r.$computed;if(f)for(var d in delete r.$computed,f)s[d]=!0,function(r,i){var a;o[r]={get:function(){return a=i.get.call(this)},set:function(e){if("function"==typeof i.set){var t=a;i.set.call(this,e);var n=this[r];this.$fire&&n!==t&&this.$fire(r,n,t)}},enumerable:!0,configurable:!0}}(d,f[d]);for(d in r){var p=r[d];de[d]||(s[d]=!0),"function"==typeof p||p&&p.nodeName&&0<p.nodeType||!t[d]&&("$"===d.charAt(0)||de[d]||u[d])?c.push(d):be(p)?(N("warning:计算属性建议放在$computed对象中统一定义"),function(r,i){var a;o[r]={get:function(){return a=i.get.call(this)},set:function(e){if("function"==typeof i.set){var t=a;i.set.call(this,e);var n=this[r];this.$fire&&n!==t&&this.$fire(r,n,t)}},enumerable:!0,configurable:!0}}(d,p)):(l.push(d),n[d]?o[d]=n[d]:o[d]=xe(d,p))}for(d in o.$model=ke,a=ve(a,o,r),c.forEach(function(e){a[e]=r[e]}),Ce(a,"$ups",null),Ce(a,"$id","anonymous"),Ce(a,"$up",i?i.$up:null),Ce(a,"$track",Object.keys(s)),Ce(a,"$active",!1),Ce(a,"$pathname",i?i.$pathname:""),Ce(a,"$accessors",o),Ce(a,"hasOwnProperty",function(e){return!0===s[e]}),e.watch&&(Ce(a,"$watch",function(){return le.apply(a,arguments)}),Ce(a,"$fire",function(e,t){if(0===e.indexOf("all!")){var n=e.slice(4);for(var r in P.vmodels){var i=P.vmodels[r];i.$fire&&i.$fire.apply(i,[n,t])}}else ue.call(a,e,[t])})),l.forEach(function(e){var t=i&&i[e],n=a[e]=r[e];n&&"object"==typeof n&&(n.$up=a,n.$pathname=e),ue.call(a,e,[n,t])}),f)p=a[d];return a.$active=!0,a}function be(e){if(e&&"object"==typeof e){for(var t in e)if("get"!==t&&"set"!==t)return!1;return"function"==typeof e.get}}function xe(n,r){var i;return{get:function(){return this.$active&&function(e,t){for(;;){if(e.$watch){var n=e.$events||(e.$events={}),r=n[t]||(n[t]=[]);return Le.collectDependency(r)}if(!(e=e.$up))break;t=e.$pathname+"."+t}}(this,n),r},set:function(e){if(r!==e){var t=r;(i=$e(e,r))?r=i:(i=void 0,r=e),Object(i)===i&&(i.$pathname=n,i.$up=this),this.$active&&ue.call(this,n,[r,t])}},enumerable:!(r=NaN),configurable:!0}}function $e(e,t,n,r){if(Array.isArray(e))return function(n,e,t){{if(e&&e.splice){var r=[0,e.length].concat(n);return e.splice.apply(e,r),e}for(var i in _e)n[i]=_e[i];Ce(n,"$up",null),Ce(n,"$pathname",""),Ce(n,"$track",Oe(n.length)),n._=ge({length:NaN},{watch:!0}),n._.length=n.length,n._.$watch("length",function(e,t){ue.call(n.$up,n.$pathname+".length",[e,t])}),t&&Ce(n,"$watch",function(){return le.apply(n,arguments)}),v?Object.defineProperty(n,"$model",ke):n.$model=Ne(n);for(var a=0,o=n.length;a<o;a++){var s=n[a]=$e(n[a],0,1,1);Object(s)===s&&(s.$up=n)}return n}}(e,t,r);if(P.isPlainObject(e)){if(t&&"object"==typeof t){var i=we(e),a=we(t);if(i.join(";")===a.join(";")){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}t.$active=!1}return ge(e,{old:t,watch:r})}return n?e:void 0}var we=n.test(Object.key)?Object.key:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&!de[n]&&t.push(n);return t};function Ce(e,t,n){he?Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!1,configurable:!0}):e[t]=n}function Ne(e){var t=P.type(e);if("array"===t){for(var n=[],r=0;r<e.length;r++)n[r]=Ne(e[r]);return n}if("object"===t){var i={};for(r in e)if("__proxy__"!==r&&"__data__"!==r&&"__const__"!==r&&e.hasOwnProperty(r)){var a=e[r];i[r]=a&&a.nodeType?a:Ne(a)}return i}return e}var ke={get:function(){return Ne(this)},set:$,enumerable:!1,configurable:!0};if(!he&&("__defineGetter__"in P&&(pe=function(e,t,n){return"value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e},ve=function(e,t){for(var n in t)t.hasOwnProperty(n)&&pe(e,n,t[n]);return e}),b)){var Te={};function Ae(e,t,n,r){var i=t[n];if(4!==arguments.length)return i.get.call(e);i.set.call(e,r)}j.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),ve=function(e,t,n){var r=[];r.push("\r\n\tPrivate [__data__], [__proxy__]","\tPublic Default Function [__const__](d"+s+", p"+s+")","\t\tSet [__data__] = d"+s+": set [__proxy__] = p"+s,"\t\tSet [__const__] = Me","\tEnd Function");var i={};for(e in t)i[e]=!0,r.push("\tPublic Property Let ["+e+"](val"+s+")",'\t\tCall [__proxy__](Me,[__data__], "'+e+'", val'+s+")","\tEnd Property","\tPublic Property Set ["+e+"](val"+s+")",'\t\tCall [__proxy__](Me,[__data__], "'+e+'", val'+s+")","\tEnd Property","\tPublic Property Get ["+e+"]","\tOn Error Resume Next","\t\tSet["+e+'] = [__proxy__](Me,[__data__],"'+e+'")',"\tIf Err.Number <> 0 Then","\t\t["+e+'] = [__proxy__](Me,[__data__],"'+e+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property");for(e in n)!0!==i[e]&&(i[e]=!0,r.push("\tPublic ["+e+"]"));for(e in de)!0!==i[e]&&(i[e]=!0,r.push("\tPublic ["+e+"]"));r.push("\tPublic [hasOwnProperty]"),r.push("End Class");var a=r.join("\r\n"),o=Te[a];return o||(o=H("VBClass"),j.parseVB("Class "+o+a),j.parseVB(["Function "+o+"Factory(a, b)","\tDim o","\tSet o = (New "+o+")(a, b)","\tSet "+o+"Factory = o","End Function"].join("\r\n")),Te[a]=o),j[o+"Factory"](t,Ae)}}var Ee=Array.prototype,_e={notify:function(){ue.call(this.$up,this.$pathname)},set:function(e,t){if(e>>>0===e&&this[e]!==t){if(e>this.length)throw Error(e+"set方法的第一个参数不能大于原数组长度");ue.call(this.$up,this.$pathname+".*",[t,this[e]]),this.splice(e,1,t)}},contains:function(e){return-1!==this.indexOf(e)},ensure:function(e){return this.contains(e)||this.push(e),this},pushArray:function(e){return this.push.apply(this,e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return e>>>0===e?this.splice(e,1):[]},size:function(){return this._.length},removeAll:function(t){var e=Array.isArray(t)?function(e){return-1!==t.indexOf(e)}:"function"==typeof t&&t;if(e)for(var n=this.length-1;0<=n;n--)e(this[n],n)&&(Se.call(this.$track,n,1),Se.call(this,n,1));else Se.call(this.$track,0,this.length),Se.call(this,0,this.length);v||(this.$model=Ne(this)),this.notify(),this._.length=this.length},clear:function(){return this.removeAll(),this}},Se=Ee.splice;function Oe(e){for(var t=[],n=0;n<e;n++)t[n]=H("$proxy$each");return t}["push","pop","shift","unshift","splice"].forEach(function(i){var a=Ee[i];_e[i]=function(){for(var e=[],t=0,n=arguments.length;t<n;t++)e[t]=$e(arguments[t],0,1,1);var r=a.apply(this,e);return function(e,t,n){switch(t){case"push":case"unshift":n=Oe(n.length);break;case"splice":if(2<n.length){n[1],n.length;n=[n[0],n[1]].concat(Oe(n.length-2))}}Array.prototype[t].apply(e,n)}(this.$track,i,e),v||(this.$model=Ne(this)),this.notify(),this._.length=this.length,r}}),"sort,reverse".replace(o,function(c){_e[c]=function(){var e=this.concat(),t=Math.random(),n=[],r=!1;Ee[c].apply(this,arguments);for(var i=0,a=e.length;i<a;i++){var o=this[i];if(o===e[i])n.push(i);else{var s=e.indexOf(o);n.push(s),e[s]=t,r=!0}}return r&&(!function(e,t){for(var n={},r=0,i=t.length;r<i;r++){n[r]=e[r];var a=t[r];a in n?(e[r]=n[a],delete n[a]):e[r]=e[a]}}(this.$track,n),v||(this.$model=Ne(this)),this.notify()),this}});var Me,je,Le=(je=[],{begin:function(e){je.push(Me),Me=e},end:function(){Me=je.pop()},collectDependency:function(e){Me&&Me.callback(e)}});P.injectBinding=function(c){c.handler=c.handler||W[c.type].update||$,c.update=function(){if(P.contains(L,c.element)){var e=!1;c.getter||(e=!0,Le.begin({callback:function(e){!function(e,t){if(t.oneTime)return;e&&P.Array.ensure(e,t)&&t.element&&(Pe(t,e),444<new Date-He&&Re())}(e,c)}}),c.getter=St(c.expr,c.vmodels,c),c.observers.forEach(function(e){e.v.$watch(e.p,c)}),delete c.observers);try{var t,n,r=c.fireArgs;if(delete c.fireArgs,r)t=r[0],n=r[1];else if("on"===c.type)t=c.getter+"";else try{t=c.getter.apply(0,c.args)}catch(e){t=null,P.log("execute expr : "+c.expr+" Error. "+e)}if(n=void 0===n?c.oldValue:n,c._filters&&(t=Nr.$filter.apply(0,[t].concat(c._filters))),c.signature){var i=P.type(t);if("array"!==i&&"object"!==i)throw Error("warning:"+c.expr+"只能是对象或数组");c.xtype=i;var a=function(e,t){for(var n,r=[],i=0;n=e[i++];)r.push(t?n.$id:n.$key);return r.join(";")}(c.proxies||[],i),o=t.$track||("array"===i?Oe(t.length):Object.keys(t));a!==(c.track=o).join(";")&&(c.handler(t,n),c.oldValue=1)}else Array.isArray(t)&&t.length!==(n&&n.length)?(c.handler(t,n),c.oldValue=t.concat()):"oldValue"in c&&t===n||(c.handler(t,n),c.oldValue=Array.isArray(t)?t.concat():t)}catch(e){delete c.getter,N("warning:exception throwed in [avalon.injectBinding] ",e);var s=c.element;s&&3===s.nodeType&&(s.nodeValue=ne+(c.oneTime?"::":"")+c.expr+re)}finally{e&&Le.end()}}},c.update()};var De=P.$$subscribers=[],He=new Date;function Pe(e,t){e.list=t,e.i=~~e.i,e.uuid||(e.uuid="_"+ ++x),De[e.uuid]||(De[e.uuid]="__",De.push(e))}var Fe=0;function Re(e){for(var t=Fe||De.length,n=0;e=De[--t];)if(e.i<7){if(null===e.element){De.splice(t,1),e.list&&(P.Array.remove(e.list,e),delete De[e.uuid]);continue}if(Ie(e.element)){if(De.splice(t,1),P.Array.remove(e.list,e),Be(e),500<n++){Fe=t;break}continue}e.i++,7===e.i&&(e.i=14)}else e.i--;He=new Date}function Be(e){for(var t in delete De[e.uuid],e.element=null,e.rollback&&e.rollback(),e)e[t]=null}function Ie(e){try{e.parentNode.nodeType}catch(e){return!0}return e.ifRemove&&!m.contains(e.ifRemove)&&C===e.parentNode?(e.parentNode&&e.parentNode.removeChild(e),!0):e.msRetain?0:1===e.nodeType?!m.contains(e):!P.contains(m,e)}var Ve={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:v?[0,"",""]:[1,"X<div>","</div>"]};Ve.th=Ve.td,Ve.optgroup=Ve.option,Ve.tbody=Ve.tfoot=Ve.colgroup=Ve.caption=Ve.thead,String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(o,function(e){Ve[e]=Ve.g});var qe=/<([\w:]+)/,ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,We=v?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/gi,Xe=k(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]),Ye=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/,Ge=L.createElement("script"),Ue=/<|&#?\w+;/;function Je(e){var t=e.nodeName;return t.toLowerCase()===t&&e.scopeName&&""===e.outerText}function Ze(e){"url(#default#VML)"!==e.currentStyle.behavior&&(e.style.behavior="url(#default#VML)",e.style.display="inline-block",e.style.zoom=1)}function Ke(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function Qe(e){return!e||e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}P.parseHTML=function(e){var t=D.cloneNode(!1);if("string"!=typeof e)return t;if(!Ue.test(e))return t.appendChild(L.createTextNode(e)),t;e=e.replace(ze,"<$1></$2>").trim();var n,r,i=(qe.exec(e)||["",""])[1].toLowerCase(),a=Ve[i]||Ve._default,o=y;v||(e=e.replace(We,"<br class=msNoScope>$1")),o.innerHTML=a[1]+e+a[2];var s=o.getElementsByTagName("script");if(s.length)for(var c,l=0;c=s[l++];)Xe[c.type]&&(r=Ge.cloneNode(!1),d.forEach.call(c.attributes,function(e){e&&e.specified&&(r[e.name]=e.value,r.setAttribute(e.name,e.value))}),r.text=c.text,c.parentNode.replaceChild(r,c));if(!v){var u="X<div>"===a[1]?o.lastChild.firstChild:o.lastChild;if(u&&"TABLE"===u.tagName&&"tbody"!==i)for(s=u.childNodes,l=0;c=s[l++];)if("TBODY"===c.tagName&&!c.innerHTML){u.removeChild(c);break}for(var f=(s=o.getElementsByTagName("br")).length;c=s[--f];)"msNoScope"===c.className&&c.parentNode.removeChild(c);for(s=o.all,l=0;c=s[l++];)Je(c)&&Ze(c)}for(l=a[0];l--;o=o.lastChild);for(;n=o.firstChild;)t.appendChild(n);return t},P.innerHTML=function(e,t){if(!v&&!We.test(t)&&!Ye.test(t))try{return void(e.innerHTML=t)}catch(e){}var n=this.parseHTML(t);this.clearHTML(e).appendChild(n)},P.clearHTML=function(e){for(e.textContent="";e.firstChild;)e.removeChild(e.firstChild);return e};var et={_toString:function(){var e=this.node.className;return("string"==typeof e?e:e.baseVal).split(/\s+/).join(" ")},_contains:function(e){return-1<(" "+this+" ").indexOf(" "+e+" ")},_add:function(e){this.contains(e)||this._set(this+" "+e)},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var t=this.node;i.test(t)?t.setAttribute("class",e):t.className=e}};function tt(e){if(!("classList"in e))for(var t in e.classList={node:e},et)e.classList[t.slice(1)]=et[t];return e.classList}function nt(e){try{if("object"==typeof e)return e;e="true"===e||"false"!==e&&("null"===e?null:+e+""===e?+e:rt.test(e)?P.parseJSON(e):e)}catch(e){}return e}"add,remove".replace(o,function(n){P.fn[n+"Class"]=function(e){var t=this[0];return e&&"string"==typeof e&&t&&1===t.nodeType&&e.replace(/\S+/g,function(e){tt(t)[n](e)}),this}}),P.fn.mix({hasClass:function(e){var t=this[0]||{};return 1===t.nodeType&&tt(t).contains(e)},toggleClass:function(e,t){for(var n,r=0,i=String(e).match(/\S+/g)||[],a="boolean"==typeof t;n=i[r++];){var o=a?t:!this.hasClass(n);this[o?"addClass":"removeClass"](n)}return this},attr:function(e,t){return 2===arguments.length?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},data:function(t,e){switch(t="data-"+Ke(t||""),arguments.length){case 2:return this.attr(t,e),this;case 1:return nt(this.attr(t));case 0:var n={};return d.forEach.call(this[0].attributes,function(e){e&&((t=e.name).indexOf("data-")||(t=Qe(t.slice(5)),n[t]=nt(e.value)))}),n}},removeData:function(e){return e="data-"+Ke(e),this[0].removeAttribute(e),this},css:function(e,t){if(P.isPlainObject(e))for(var n in e)P.css(this,n,e[n]);else var r=P.css(this,e,t);return void 0!==r?r:this},position:function(){var e,t,n=this[0],r={top:0,left:0};if(n)return"fixed"===this.css("position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),"HTML"!==e[0].tagName&&(r=e.offset()),r.top+=P.css(e[0],"borderTopWidth",!0),r.left+=P.css(e[0],"borderLeftWidth",!0),r.top-=e.scrollTop(),r.left-=e.scrollLeft()),{top:t.top-r.top-P.css(n,"marginTop",!0),left:t.left-r.left-P.css(n,"marginLeft",!0)}},offsetParent:function(){for(var e=this[0].offsetParent;e&&"static"===P.css(e,"position");)e=e.offsetParent;return P(e||m)},bind:function(e,t,n){if(this[0])return P.bind(this[0],e,t,n)},unbind:function(e,t,n){return this[0]&&P.unbind(this[0],e,t,n),this},val:function(e){var t,n,r=this[0];if(r&&1===r.nodeType){var i=0===arguments.length,a=i?":get":":set",o=xt[(t=r,n=t.tagName.toLowerCase(),("input"===n&&/checkbox|radio/.test(t.type)?"checked":n)+a)];if(o)var s=o(r,e);else{if(i)return(r.value||"").replace(/\r/g,"");r.value=e}}return i?s:this}});var rt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,it=/^[\],:{}\s]*$/,at=/(?:^|:|,)(?:\s*\[)+/g,ot=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,st=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;P.parseJSON=j.JSON?JSON.parse:function(e){if("string"==typeof e){if((e=e.trim())&&it.test(e.replace(ot,"@").replace(st,"]").replace(at,"")))return new Function("return "+e)();P.error("Invalid JSON: "+e)}return e},P.fireDom=function(e,t,n){if(L.createEvent){var r=L.createEvent("Events");r.initEvent(t,!0,!0,n),P.mix(r,n),e.dispatchEvent(r)}else m.contains(e)&&(r=L.createEventObject(),P.mix(r,n),e.fireEvent("on"+t,r))},P.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,o){P.fn[a]=function(e){var t,n=this[0]||{},r=(t=n).window&&t.document?t:9===t.nodeType&&(t.defaultView||t.parentWindow),i="scrollTop"===a;if(!arguments.length)return r?o in r?r[o]:m[a]:n[a];r?r.scrollTo(i?P(r).scrollLeft():e,i?e:P(r).scrollTop()):n[a]=e}});var ct=P.cssHooks={},lt=["","-webkit-","-o-","-moz-","-ms-"],ut={float:v?"cssFloat":"styleFloat"};if(P.cssNumber=k("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),P.cssName=function(e,t,n){if(ut[e])return ut[e];t=t||m.style;for(var r=0,i=lt.length;r<i;r++)if((n=Qe(lt[r]+e))in t)return ut[e]=n;return null},ct["@:set"]=function(e,t,n){try{e.style[t]=n}catch(e){}},j.getComputedStyle)ct["@:get"]=function(e,t){if(!e||!e.style)throw new Error("getComputedStyle要求传入一个节点 "+e);var n,r=getComputedStyle(e,null);return r&&""===(n="filter"===t?r.getPropertyValue(t):r[t])&&(n=e.style[t]),n},ct["opacity:get"]=function(e){var t=ct["@:get"](e,"opacity");return""===t?"1":t};else{var ft=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,dt=/^(top|right|bottom|left)$/,pt=/alpha\([^)]+\)/i,ht=/(opacity|\d(\d|\.)*)/g,vt=!!j.XDomainRequest,mt={thin:vt?"1px":"2px",medium:vt?"3px":"4px",thick:vt?"5px":"6px"};ct["@:get"]=function(e,t){var n=e.currentStyle,r=n[t];if(ft.test(r)&&!dt.test(r)){var i=e.style,a=i.left,o=e.runtimeStyle.left;e.runtimeStyle.left=n.left,i.left="fontSize"===t?"1em":r||0,r=i.pixelLeft+"px",i.left=a,e.runtimeStyle.left=o}return"medium"===r&&"none"===n[t=t.replace("Width","Style")]&&(r="0px"),""===r?"auto":mt[r]||r},ct["opacity:set"]=function(e,t,n){var r=e.style,i=Number(n)<=1?"alpha(opacity="+100*n+")":"",a=r.filter||"";r.zoom=1,r.filter=(pt.test(a)?a.replace(pt,i):a+" "+i).trim(),r.filter||r.removeAttribute("filter")},ct["opacity:get"]=function(e){for(var t,n=e.style.filter.match(ht)||[],r=!1,i=0;t=n[i++];)if("opacity"===t)r=!0;else if(r)return t/100+"";return"1"}}"top,left".replace(o,function(n){ct[n+":get"]=function(e){var t=ct["@:get"](e,n);return/px$/.test(t)?t:P(e).position()[n]+"px"}});var yt={position:"absolute",visibility:"hidden",display:"block"},gt=/^(none|table(?!-c[ea]).+)/;"Width,Height".replace(o,function(a){var o=a.toLowerCase(),r="client"+a,i="scroll"+a,s="offset"+a;ct[o+":get"]=function(e,t,n){var r=-4;"number"==typeof n&&(r=n),t="Width"===a?["Left","Right"]:["Top","Bottom"];var i=e[s];return 2===r?i+P.css(e,"margin"+t[0],!0)+P.css(e,"margin"+t[1],!0):(r<0&&(i=i-P.css(e,"border"+t[0]+"Width",!0)-P.css(e,"border"+t[1]+"Width",!0)),-4===r&&(i=i-P.css(e,"padding"+t[0],!0)-P.css(e,"padding"+t[1],!0)),i)},ct[o+"&get"]=function(e){var t=[];!function e(t,n){if(t.offsetWidth<=0){if(gt.test(ct["@:get"](t,"display"))){var r={node:t};for(var i in yt)r[i]=t.style[i],t.style[i]=yt[i];n.push(r)}var a=t.parentNode;a&&1===a.nodeType&&e(a,n)}}(e,t);for(var n,r=ct[o+":get"](e),i=0;n=t[i++];)for(var a in e=n.node,n)"string"==typeof n[a]&&(e.style[a]=n[a]);return r},P.fn[o]=function(e){var t=this[0];if(0===arguments.length){if(t.setTimeout)return t["inner"+a]||t.document.documentElement[r]||t.document.body[r];if(9===t.nodeType){var n=t.documentElement;return Math.max(t.body[i],n[i],t.body[s],n[s],n[r])}return ct[o+"&get"](t)}return this.css(o,e)},P.fn["inner"+a]=function(){return ct[o+":get"](this[0],void 0,-2)},P.fn["outer"+a]=function(e){return ct[o+":get"](this[0],void 0,!0===e?2:0)}}),P.fn.offset=function(){var e=this[0],t={left:0,top:0};if(!e||!e.tagName||!e.ownerDocument)return t;var n=e.ownerDocument,r=n.body,i=n.documentElement,a=n.defaultView||n.parentWindow;if(!P.contains(i,e))return t;e.getBoundingClientRect&&(t=e.getBoundingClientRect());var o=i.clientTop||r.clientTop,s=i.clientLeft||r.clientLeft,c=Math.max(a.pageYOffset||0,i.scrollTop,r.scrollTop),l=Math.max(a.pageXOffset||0,i.scrollLeft,r.scrollLeft);return{top:t.top+c-o,left:t.left+l-s}};var bt=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,xt={"option:get":b?function(e){return bt.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,t){for(var n,r=e.options,i=e.selectedIndex,a=xt["option:get"],o="select-one"===e.type||i<0,s=o?null:[],c=o?i+1:r.length,l=i<0?c:o?i:0;l<c;l++)if(((n=r[l]).selected||l===i)&&!n.disabled){if(t=a(n),o)return t;s.push(t)}return s},"select:set":function(e,t,n){t=[].concat(t);for(var r,i=xt["option:get"],a=0;r=e.options[a++];)(r.selected=-1<t.indexOf(i(r)))&&(n=!0);n||(e.selectedIndex=-1)}},$t={};["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",").replace(/\w+/g,function(e){$t[e]=!0});var wt=/[a-z_$]/i,Ct=/[\s\uFEFF\xA0]/;function Nt(e,t){if(t&&!$t[t])return e.push(t),!0}function kt(e,t,n,r){for(var i,a=[],o=" = "+n+".",s=e.length;i=e[--s];){var c,l,u=i;0<=i.indexOf("[")&&(i=i.replace("[",".").replace("]",""));for(var f=(c=i.split("."))[0];(l=c.shift())&&t.hasOwnProperty(l);)a.push(f+o+f),u.indexOf(".*")<0&&a.push(H("_nousevar_"+s)+" = "+u),r.observers.push({v:t,p:i}),e.splice(s,1)}return a}var Tt=/(\$proxy\$[a-z]+)\d+$/,At=new X(218),Et=new X(128);function _t(e){e=e.trim();var t=At.get(e);if(t)return t.concat();for(var n,r=function e(t,n){var r=[],i=!!n;n=n||0;for(var a="unknown",o="",s=0;s<t.length;s++){var c=t.charAt(s);if("'"===c||'"'===c)"unknown"===a?a=c:a===c&&(a="unknown");else if("\\"===c)"'"!==a&&'"'!==a||s++;else if(wt.test(c))"unknown"===a?(a="variable",o=c):"maybePath"===a?(o=r.pop(),o+="."+c,a="variable"):"variable"===a&&(o+=c);else if(/\w/.test(c))"variable"===a&&(o+=c);else if("."===c)"variable"===a&&o&&(r.push(o),o="",a="maybePath");else if("["===c){if("variable"===a||"maybePath"===a){o&&(r.push(o),o="");var l=r.length,u=r[l-1],f=e(t.slice(s),s);if(f.length)r[l-1]=u+".*",r=f.concat(r);else{var d=t.slice(s+1,f.i);try{var p=w(["return "+d])();r[l-1]=u+"["+p+"]"}catch(e){}}a="maybePath",s=f.i}}else if("]"===c){if(i)return r.i=s+n,Nt(r,o),r}else Ct.test(c)&&"\r"!==c&&"\n"!==c?"variable"===a&&(Nt(r,o)&&(a="maybePath"),o=""):(Nt(r,o),a="unknown",o="")}return Nt(r,o),r}(e),i={},a=[],o=0;n=r[o++];)i[n]||(i[n]=1,a.push(n));return At.put(e,a).concat()}function St(e,t,n){var r=n.filters;"string"==typeof r&&r.trim()&&!n._filters&&(n._filters=w(["return ["+(r.trim().replace(Mt,"").replace(jt,function(){return"],|"}).replace(Lt,function(e,t){return"["+Bt(t)}).replace(Dt,function(){return'"],["'}).replace(Ht,function(){return'",'})+"]")+"]"])());var i=_t(e),a=new Date-0,o=[],s=[],c=[];n.observers=[];for(var l=0,u=t.length;l<u;l++)if(i.length){var f="vm"+a+"_"+l;s.push(f),c.push(t[l]),o.push.apply(o,kt(i,t[l],f,n))}n.args=c;var d=n.type,p=t.map(function(e){return String(e.$id).replace(Tt,"$1")})+e+d,h=Et.get(p);if(h){if(n.getter=h,"duplex"!==d)return h;var v=Et.get(p+"setter");if(v)return n.setter=v.apply(v,n.args),h}if(o.length||o.push("fix"+a),"duplex"===d){var m={};o.forEach(function(e){var t=e.split("=");m[t[0].trim()]=t[1].trim()}),e=e.replace(/[\$\w]+/,function(e){return m[e]?m[e]:e});var y=w(s.concat("'use strict';return function(vvv){"+e+" = vvv\n}\n"));Et.put(p+"setter",y),n.setter=y.apply(y,n.args)}if("on"===d){-1===e.indexOf("(")?e+=".call(this, $event)":e=e.replace("(",".call(this,"),s.push("$event");var g=(e="\nreturn "+e+";").lastIndexOf("\nreturn");e=e.slice(0,g)+"\n"+e.slice(g)}else e="\nreturn "+e+";";var b=[];return P.each(o,function(e,t){-1<t.indexOf("_nousevar_")?b.push("try{var "+t+"}catch(e){}"):b.push("var "+t)}),h=w(s.concat("'use strict';\n"+b.join(";\n")+e)),Et.put(p,h)}function Ot(e){if(ie.test(e)){var t=vn(e);return 1===t.length?t[0].expr:t.map(function(e){return e.type?"("+e.expr+")":Bt(e.expr)}).join(" + ")}return e}P.normalizeExpr=Ot,P.parseExprProxy=St;var Mt=/\)\s*$/,jt=/\)\s*\|/g,Lt=/\|\s*([$\w]+)/g,Dt=/"\s*\["/g,Ht=/"\s*\(/g;var Pt={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},Ft=function(e){var t,n=e.charCodeAt(0),r=Pt[n];return r||"\\u00"+(t=2,("000000"+(n.toString(16)||0)).slice(-t))},Rt=/[\x00-\x1f\x22\x5c]/g;var Bt="undefined"!=typeof JSON?JSON.stringify:function(e){return Rt.lastIndex=0,'"'+(Rt.test(e)?String(e).replace(Rt,Ft):e)+'"'};P.scan=function(e,t){ln(e=e||m,t?[].concat(t):[])};var It=k("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase());function Vt(e,t,n){var r=e.getAttribute(t);if(r)for(var i,a=0;i=n[a++];)if(i.hasOwnProperty(r)&&"function"==typeof i[r])return i[r]}function qt(e,t){for(var n,r=0;n=e[r++];)n.vmodels=t,W[n.type].init(n),P.injectBinding(n),n.getter&&1===n.element.nodeType&&n.element.removeAttribute(n.name);e.length=0}var zt=b&&j.MutationObserver?function(e){for(var t,n=e.firstChild;n;){var r=n.nextSibling;3===n.nodeType?t?(t.nodeValue+=n.nodeValue,e.removeChild(n)):t=n:t=null,n=r}}:0,Wt=/^\s*::/,Xt=/ms-(\w+)-?(.*)/,Yt=k("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit"),Gt=k("value,title,alt,checked,selected,disabled,readonly,enabled,href,src");function Ut(e,t){return e.priority-t.priority}var Jt=/^(ms-\S+|data-\S+|on[a-z]+|id|style|class)$/;function Zt(e,t){for(var n,r=e.attributes,i={},a=0;n=r[a++];){var o=n.name;if(n.specified&&!Jt.test(o)){var s=Qe(n.name);/^on\-[\w-]+$/.test(o)?i[s]=Vt(e,o,t):i[s]=nt(n.value)}}return i}function Kt(e,t,n){var r,i,a=!0;if(t.length){for(var o,s=sn?sn(e):e.attributes,c=[],l={},u=0;o=s[u++];){var f=o.name;if(!l[f]&&(l[f]=1,o.specified&&(n=f.match(Xt)))){var d=n[1],p=n[2]||"",h=o.value;if(Yt[d]?(p=d,d="on"):Gt[d]&&(p=d,N("warning!请改用"+(f="ms-"+(d="attr")+"-"+p)+"代替"+o.name+"!")),W[d]){var v=h.replace(Wt,""),m={type:d,param:p,element:e,name:f,expr:v,oneTime:h!==v,uuid:"_"+ ++x,priority:(W[d].priority||10*d.charCodeAt(0))+(Number(p.replace(/\D/g,""))||0)};if("html"===d||"text"===d){var y=hn(h).filters;m.expr=m.expr.replace(y,""),m.filters=y.replace(un,function(){return m.type="html",m.group=1,""}).trim()}else if("duplex"===d)var g=f;else if("ms-if-loop"===f)m.priority+=100;else if("ms-attr-value"===f)var b=f;c.push(m)}}}if(c.length){for(c.sort(Ut),g&&b&&"INPUT"===e.nodeName&&"text"===e.type&&N("warning!一个控件不能同时定义ms-attr-value与"+g),u=0;m=c[u];u++){if(d=m.type,Qt.test(d))return qt(c.slice(0,u+1),t);a&&(a=!en.test(d))}qt(c,t)}}!a||It[e.tagName]||Cn(e)&&!e.msResolved||(zt&&zt(e),r=e,i=t,cn(P.slice(r.childNodes),i))}var Qt=/^if|widget|repeat$/,en=/^each|with|html|include$/;if(!v)var tn=new X(512),nn=/\s+([^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,rn=/^['"]/,an=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,on=/&amp;/g,sn=function(e){var t=e.outerHTML;if("</"===t.slice(0,2)||!t.trim())return[];var n=t.match(an)[0];">"===n.slice(-1)&&(n=n.slice(0,-1));var r,i,a=[],o=tn.get(n);if(o)return o;for(;r=nn.exec(n);){(i=r[2])&&(i=(rn.test(i)?i.slice(1,-1):i).replace(on,"&"));var s={name:r[1].toLowerCase(),specified:!0,value:i||""};a.push(s)}return tn.put(n,a)};function cn(e,t){function n(e){setTimeout(function(){P.component(e)})}for(var r,i=0;r=e[i++];)switch(r.nodeType){case 1:var a=r;if(!a.msResolved&&a.parentNode&&1===a.parentNode.nodeType){var o=Cn(a);if(o){var s=a.localName?a.localName.replace(o+":",""):a.nodeName,c=o+":"+Qe(s);bn.push({library:o,element:a,fullName:c,widget:s,vmodels:t,name:"widget"}),P.components[c]&&n(c)}}ln(r,t),r.msHasEvent&&P.fireDom(r,"datasetchanged",{bubble:r.msHasEvent});break;case 3:ie.test(r.nodeValue)&&mn(r,t,i)}}function ln(e,t,n){var r=e.getAttribute("ms-skip");if(!e.getAttributeNode)return N("warning "+e.tagName+" no getAttributeNode method");var i=e.getAttributeNode("ms-important"),a=e.getAttributeNode("ms-controller");if("string"!=typeof r){if(n=i||a){var o=P.vmodels[n.value];if(!o)return;t=n===i?[o]:[o].concat(t);var s=n.name;e.removeAttribute(s),P(e).removeClass(s),l=o,u=(c=e).getAttribute("avalonctrl")||l.$id,c.setAttribute("avalonctrl",u),l.$events&&(l.$events.expr=c.tagName+'[avalonctrl="'+u+'"]')}var c,l,u;Kt(e,t),o&&setTimeout(function(){o.$fire("ms-scan-end",e)})}}var un=/\|\s*html(?:\b|$)/,fn=/\|\|/g,dn=/(['"])(\\\1|.)+?\1/g,pn=/\r?\n/g;function hn(e){if(0<e.indexOf("|")){var t=e.replace(dn,function(e){return Array(e.length+1).join("1")}).replace(fn,"ᄢ㍄").indexOf("|");if(-1<t)return{type:"text",filters:e.slice(t).trim(),expr:e.slice(0,t)}}return{type:"text",expr:e,filters:""}}function vn(e){for(var t,n,r=[],i=0;;){if(-1===(n=e.indexOf(ne,i)))break;if((t=e.slice(i,n))&&r.push({expr:t}),i=n+ne.length,-1===(n=e.indexOf(re,i)))break;(t=e.slice(i,n))&&r.push(hn(t.replace(pn,""))),i=n+re.length}return(t=e.slice(i))&&r.push({expr:t}),r}function mn(e,t,n){var r=[],i=vn(e.data);if(i.length){for(var a,o=0;a=i[o++];){var s=L.createTextNode(a.expr);a.type&&(a.expr=a.expr.replace(Wt,function(){return a.oneTime=!0,""}),a.element=s,a.filters=a.filters.replace(un,function(){return a.type="html",""}),a.pos=1e3*n+o,r.push(a)),D.appendChild(s)}e.parentNode.replaceChild(D,e),r.length&&qt(r,t)}}var yn=function(){this.queue=[]};yn.prototype={render:function(e){if(!this.locked){this.locked=e?m.offsetHeight+10:1;var t=this;P.nextTick(function(){t.flush()})}},flush:function(){for(var e,t=0;e=this.queue[t++];)e.update&&e.update();this.locked=0,this.queue=[]}};var gn=new yn,bn=[],xn=[],$n={$construct:function(){return P.mix.apply(null,arguments)},$ready:$,$init:$,$dispose:$,$container:null,$childReady:$,$replace:!1,$extend:null,$$template:function(e){return e}};function wn(e,t){if(t)for(var n,r=0;n=e[r++];)if(n.hasOwnProperty(t)&&"object"==typeof n[t]){var i=n[t];return i.$model||i}return{}}function Cn(e){if(e.scopeName&&"HTML"!==e.scopeName)return e.scopeName;var t=e.nodeName.toLowerCase(),n=t.indexOf(":");return 0<n?t.slice(0,n):void 0}P.components={},P.component=function(M,e){e&&(P.components[M]=P.mix({},$n,e));for(var t,n=0;t=bn[n];n++)M===t.fullName&&(bn.splice(n,1),n--,function(n,e,r,t){if(P.contains(L,r)&&!r.msResolved){var i=1,a=n.library,o=P.libraries[a]||$n;if(!r.getAttribute("ms-attr-identifier")){var s=Zt(r,n.vmodels),c=wn(n.vmodels,s.config||n.fullName),l=s.$id||s.identifier||H(t);delete s.config,delete s.$id,delete s.identifier;var u={},f=P.components[e.$extend];f?(P.mix(!0,u,f),u=f.$construct.call(r,u,{},{})):P.mix(!0,u,e),(u=P.components[M].$construct.call(r,u,c,s)).$refs={},u.$id=l;var d=u.$slot,p=u.$replace,h=u.$container,v=u.$template;delete u.$slot,delete u.$replace,delete u.$container,delete u.$construct;var m=P.define(u)||{};r.msResolved=1,m.$init(m,r),o.$init(m,r);for(var y,g,b=r.childNodes,x={},$=0;g=b[$++];){var w=1===g.nodeType&&g.getAttribute("slot")||d;w&&(x[w]?x[w].push(g):x[w]=[g])}for($ in m.$$template&&(P.clearHTML(r),r.innerHTML=m.$$template(v)),x)if(m.hasOwnProperty($)){var C=x[$];if(C.length){for(var N=D.cloneNode(!0),k=0;y=C[k++];)N.appendChild(y);m[$]=N}x[$]=null}x=null;var T=r.children[0]||r.firstChild;if(p){r.parentNode.replaceChild(T,r),T.msResolved=1;var A=r.style.cssText,E=r.className;(r=n.element=T).style.cssText+=";"+A,E&&P(r).addClass(E)}h&&h.appendChild(r),P.fireDom(r,"datasetchanged",{library:a,vm:m,childReady:1});var _=0,S=P.bind(r,"datasetchanged",function(e){if(e.childReady&&e.library===a&&(i+=e.childReady,m!==e.vm&&(m.$refs[e.vm.$id]=e.vm,-1===e.childReady&&(_++,m.$childReady(m,r,e)),e.stopPropagation())),0===i){var t=setTimeout(function(){clearTimeout(t),m.$ready(m,r,n.vmodels),o.$ready(m,r,n.vmodels)},_?Math.max(17*_,100):17);P.unbind(r,"datasetchanged",S),n.rollback=function(){try{m.$dispose(m,r),o.$dispose(m,r)}catch(e){}delete P.vmodels[m.$id]},Pe(n,xn),j.chrome&&r.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(Re)})}});if(ln(r,[m].concat(n.vmodels)),P.vmodels[m.$id]=m,r.childNodes.length)var O=setTimeout(function(){clearTimeout(O),P.fireDom(r,"datasetchanged",{library:a,vm:m,childReady:-1})},17);else P.fireDom(r,"datasetchanged",{library:a,vm:m,childReady:-1})}}else P.Array.remove(bn,n)}(t,P.components[M],t.element,t.widget))},P.libraries=[],P.library=function(e,t){L.namespaces&&L.namespaces.add(e,"http://www.w3.org/1999/xhtml"),P.libraries[e]=P.mix({$init:$,$ready:$,$dispose:$},t||{})},P.library("ms");var Nn=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(","),kn={};Nn.replace(o,function(e){kn[e.toLowerCase()]=e});var Tn={"accept-charset":"acceptCharset",char:"ch",charoff:"chOff",class:"className",for:"htmlFor","http-equiv":"httpEquiv"};["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",").replace(o,function(e){Tn[e.toLowerCase()]=e});var An=P.directive("attr",{init:function(e){if(e.expr=Ot(e.expr.trim()),"include"===e.type){var t=e.element;Wn(t,e),e.includeRendered=Vt(t,"data-include-rendered",e.vmodels),e.includeLoaded=Vt(t,"data-include-loaded",e.vmodels);var n=e.includeReplace=!!P(t).data("includeReplace");P(t).data("includeCache")&&(e.templateCache={}),e.start=L.createComment("ms-include"),e.end=L.createComment("ms-include-end"),n?(e.element=e.end,(e._element=t).parentNode.insertBefore(e.start,t),t.parentNode.insertBefore(e.end,t.nextSibling)):(t.insertBefore(e.start,t.firstChild),t.appendChild(e.end))}},update:function(e){var t=this.element,n=this.param;if(0===n.indexOf("data-")||i.test(t))t.setAttribute(n,e);else{var r=Tn[n]||n;if("boolean"==typeof t[r]&&(t[r]=!!e),!1===e)return void t.removeAttribute(r);if(!v&&/[A-Z]/.test(r))return void(t[r]=e+"");!(v||!Je(t))||function(e,t){var n=e+":"+t;if(n in En)return En[n];return En[n]=t in document.createElement(e)}(t.nodeName,n)?("href"!==n&&"src"!==n||(e=String(e).replace(/&amp;/g,"&")),t[r]=e+""):t.setAttribute(n,e)}}}),En={};"title,alt,src,value,css,include,href".replace(o,function(e){W[e]=An}),P.directive("class",{init:function(e){var t=e.param,n=e.type;if(!t||isFinite(t)?(e.param="",W.effect.init(e)):(N("ms-"+n+'-xxx="yyy"这种用法已经过时,请使用ms-'+n+'="xxx:yyy"'),e.expr="["+Bt(t)+","+e.expr+"]",e.oldStyle=t),"hover"===n||"active"===n){if(!e.hasBindEvent){var r=e.element,i=P(r),a="mouseenter",o="mouseleave";if("active"===n){r.tabIndex=r.tabIndex||-1,a="mousedown",o="mouseup";var s=i.bind("mouseleave",function(){e.toggleClass&&i.removeClass(e.newClass)})}}var c=i.bind(a,function(){e.toggleClass&&i.addClass(e.newClass)}),l=i.bind(o,function(){e.toggleClass&&i.removeClass(e.newClass)});e.rollback=function(){i.unbind("mouseleave",s),i.unbind(a,c),i.unbind(o,l)},e.hasBindEvent=!0}},update:function(e){var t=this,n=P(this.element);t.newClass=e[0],t.toggleClass=!!e[1],t.oldClass&&t.newClass!==t.oldClass&&n.removeClass(t.oldClass),t.oldClass=t.newClass,"class"===t.type&&(t.oldStyle?n.toggleClass(t.oldStyle,!!e[1]):n.toggleClass(t.newClass,t.toggleClass))}}),"hover,active".replace(o,function(e){W[e]=W.class}),P.directive("css",{init:W.attr.init,update:function(e){P(this.element).css(this.param,e)}}),P.directive("data",{priority:100,update:function(e){var t=this.element,n="data-"+this.param;e&&"object"==typeof e?t[n]=e:t.setAttribute(n,String(e))}});var _n=/^(?:checkbox|radio)$/,Sn=/^(?:radio|checked)$/,On=/^(file|button|reset|submit|checkbox|radio|range)$/;P.directive("duplex",{priority:2e3,init:function(r,t){var i=r.element,e=r.vmodels;r.changed=Vt(i,"data-duplex-changed",e)||$;var n=[],a=k("string,number,boolean,checked");"radio"===i.type&&""===r.param&&(r.param="checked"),r.param.replace(u,function(e){_n.test(i.type)&&Sn.test(e)&&("radio"===e&&N("ms-duplex-radio已经更名为ms-duplex-checked"),e="checked",r.isChecked=!0,r.xtype="radio"),"bool"===e?(e="boolean",N("ms-duplex-bool已经更名为ms-duplex-boolean")):"text"===e&&(e="string",N("ms-duplex-text已经更名为ms-duplex-string")),a[e]&&(t=!0),P.Array.ensure(n,e)}),t||n.push("string"),r.param=n.join("-"),r.xtype||(r.xtype="SELECT"===i.tagName?"select":"checkbox"===i.type?"checkbox":"radio"===i.type?"radio":/^change/.test(i.getAttribute("data-duplex-event"))?"change":"input");var o=r.bound=function(e,t){i.addEventListener?i.addEventListener(e,t,!1):i.attachEvent("on"+e,t);var n=r.rollback;r.rollback=function(){i.avalonSetter=null,P.unbind(i,e,t),n&&n()}};function s(e){r.changed.call(this,e,r)}var c=!1;var l=function(e){var t=i.value;if(!c&&t!==r.oldValue&&null!==r.pipe){var n=r.pipe(t,r,"get");try{r.oldValue=t,r.setter(n),s.call(i,n)}catch(e){N(e)}}};switch(r.xtype){case"radio":r.bound("click",function(){var e=r.pipe(i.value,r,"get");try{r.setter(e),s.call(i,e)}catch(e){N(e)}});break;case"checkbox":o(v?"change":"click",function(){var e=i.checked?"ensure":"remove",t=r.getter.apply(0,r.vmodels);Array.isArray(t)||(N("ms-duplex应用于checkbox上要对应一个数组"),t=[t]);var n=r.pipe(i.value,r,"get");P.Array[e](t,n),s.call(i,t)});break;case"change":o("change",l);break;case"input":b?(8<b?(9===b&&o("keyup",l),o("input",l)):o("propertychange",function(e){"value"===e.propertyName&&l()}),o("dragend",function(){setTimeout(function(){l()},17)})):(o("input",l),o("compositionstart",function(){c=!0}),o("compositionend",function(){c=!1,setTimeout(l)}),o("DOMAutoComplete",l));break;case"select":o("change",function(){var e=P(i).val();if((e=Array.isArray(e)?e.map(function(e){return r.pipe(e,r,"get")}):r.pipe(e,r,"get"))+""!==r.oldValue)try{r.setter(e)}catch(e){N(e)}}),o("datasetchanged",function(e){if("selectDuplex"===e.bubble){var t=r._value,n=Array.isArray(t)?t.map(String):t+"";P(i).val(n),i.oldValue=n+"",s.call(i,n)}})}"input"!==r.xtype||On.test(i.type)||("hidden"!==i.type&&(o("focus",function(){i.msFocus=!0}),o("blur",function(){i.msFocus=!1})),i.avalonSetter=l,Pn(function(){if(P.contains(m,i))this.msFocus||l();else if(!i.msRetain)return!1}))},update:function(e){var t,n=this.element,r=this;if(!this.init){for(var i in P.vmodels){P.vmodels[i].$fire("avalon-ms-duplex-init",r)}(r.pipe||(r.pipe=jn))(null,r,"init"),this.init=1}switch(this.xtype){case"input":case"change":if((t=this.pipe(e,this,"set"))!==this.oldValue){var a=!1;if(n.msFocus)try{var o=function(e){var t=NaN,n=NaN;if(e.setSelectionRange)t=e.selectionStart,n=e.selectionEnd;else if(document.selection&&document.selection.createRange){var r=document.selection.createRange();t=0-r.duplicate().moveStart("character",-1e5),n=t+r.text.length}return{start:t,end:n}}(n);o.start===o.end&&(o=o.start,a=!0)}catch(e){}n.value=r.oldValue=t,a&&function(e,t,n){if(!e.value||e.readOnly)return;if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.select()}else e.selectionStart=t,e.selectionEnd=n}(n,o,o)}break;case"radio":t=r.isChecked?!!e:e+""===n.value,6===b?setTimeout(function(){n.defaultChecked=t,n.checked=t},31):n.checked=t;break;case"checkbox":var s=[].concat(e);t=this.pipe(n.value,this,"get"),n.checked=-1<s.indexOf(t);break;case"select":r._value=e,n.msHasEvent?P.fireDom(n,"datasetchanged",{bubble:n.msHasEvent}):n.msHasEvent="selectDuplex"}}});function Mn(e){return null==e?"":e}function jn(n,r,i){return r.param.replace(u,function(e){var t=P.duplexHooks[e];t&&"function"==typeof t[i]&&(n=t[i](n,r))}),n}b&&P.bind(L,"selectionchange",function(e){var t=L.activeElement||{};!t.msFocus&&t.avalonSetter&&t.avalonSetter()}),P.duplexHooks={checked:{get:function(e,t){return!t.oldValue}},string:{get:function(e){return e},set:Mn},boolean:{get:function(e){return"true"===e},set:Mn},number:{get:function(e,t){var n=parseFloat(e+"");if(-e==-n)return n;switch((/strong|medium|weak/.exec(t.element.getAttribute("data-duplex-number"))||["medium"])[0]){case"strong":return 0;case"medium":return""===e?"":0;case"weak":return e}},set:Mn}};var Ln,Dn=[];function Hn(){for(var e=Dn.length-1;0<=e;e--){!1===(0,Dn[e])()&&Dn.splice(e,1)}Dn.length||clearInterval(Ln)}P.tick=function(e){1===Dn.push(e)&&(Ln=setInterval(Hn,60))};var Pn=$;new function(){try{var t={},e=HTMLInputElement.prototype,n=HTMLTextAreaElement.prototype;function r(e){t[this.tagName].call(this,e),!this.msFocus&&this.avalonSetter&&this.avalonSetter()}var i=HTMLInputElement.prototype;Object.getOwnPropertyNames(i),t.INPUT=Object.getOwnPropertyDescriptor(e,"value").set,Object.defineProperty(e,"value",{set:r}),t.TEXTAREA=Object.getOwnPropertyDescriptor(n,"value").set,Object.defineProperty(n,"value",{set:r})}catch(e){Pn=P.tick}},P.directive("effect",{priority:5,init:function(e){var t,n,r=e.expr,i=r.replace(ae,function(e){return e.replace(/./g,"0")}).indexOf(":");-1===i?(t=r,n=!0):(t=r.slice(0,i),n=r.slice(i+1)),t=ie.test(r)?Ot(t):Bt(t),e.expr="["+t+","+n+"]"},update:function(e){var t=e[0],n=this.element;if(n.getAttribute("data-effect-name")!==t){n.removeAttribute("data-effect-driver");var r=n.style,i=j.getComputedStyle?j.getComputedStyle(n):null,a=!1;if(i&&(Bn||In)){var o=r[Vn]||i[Vn];o&&"0s"!==o&&(n.setAttribute("data-effect-driver","t"),a=!0),a||(o=r[qn]||i[qn])&&"0s"!==o&&(n.setAttribute("data-effect-driver","a"),a=!0)}a||P.effects[t]&&(n.setAttribute("data-effect-driver","j"),a=!0),a&&n.setAttribute("data-effect-name",t)}}}),P.effects={};var Fn,Rn,Bn=!(P.effect=function(e,t){P.effects[e]=t}),In=!1,Vn=P.cssName("transition-duration"),qn=P.cssName("animation-duration");new function(){var e,t,n={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"};for(var r in n){if(j[r]){e=n[r];break}try{document.createEvent(r);e=n[r];break}catch(e){}}for(r in"string"==typeof e&&(Bn=!0,Fn=e),n={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"})if(j[r]){t=n[r];break}"string"==typeof t&&(Bn=!0,Rn=t)};var zn=[];function Wn(e,t){var n=e.getAttribute("data-effect-name");if(n){t.effectName=n,t.effectDriver=e.getAttribute("data-effect-driver");var r=+e.getAttribute("data-effect-stagger");t.effectLeaveStagger=+e.getAttribute("data-effect-leave-stagger")||r,t.effectEnterStagger=+e.getAttribute("data-effect-enter-stagger")||r,t.effectClass=e.className||NaN}}function Xn(e){return e.replace(/^[\S]/g,function(e){return e.toUpperCase()})}var Yn=new yn;function Gn(){}function Un(e,t){var n=e.callbacks[t+"Class"];return"string"==typeof n?n:"function"==typeof n?n():e.name+"-"+t}function Jn(e,t,n){var r=e.callbacks[t];r&&r.call(e,e.el,n)}Gn.prototype={contrustor:Gn,enterClass:function(){return Un(this,"enter")},leaveClass:function(){return Un(this,"leave")},actionFun:function(t,n,r){if(!document.hidden){var i=this,a=i.el,o="leave"===t;t=o?"leave":"enter",Jn(i,"abort"+Xn(o?"enter":"leave")),Jn(i,"before"+Xn(t)),o||n(a);var e=function(e){P.unbind(a,i.cssEvent,i.cssCallback),o?(n(a),P(a).removeClass(i.cssClass)):"a"===i.driver&&P(a).removeClass(i.cssClass),!0!==e&&(Jn(i,"after"+Xn(t)),r&&r(a)),i.dispose()};i.useCss?(i.cssCallback&&i.cssCallback(!0),i.cssClass=Un(i,t),i.cssCallback=e,i.update=function(){P.bind(a,i.cssEvent,i.cssCallback),o||"t"!==i.driver||P(a).removeClass(i.cssClass)},P(a).addClass(i.cssClass),Yn.render(!0),Yn.queue.push(i)):Jn(i,t,e)}},enter:function(e,t){this.actionFun.apply(this,["enter"].concat(P.slice(arguments)))},leave:function(e,t){this.actionFun.apply(this,["leave"].concat(P.slice(arguments)))},dispose:function(){this.update=this.cssCallback=null,100<zn.unshift(this)&&zn.pop()}};var Zn=function(e,t){var n=p.call(arguments,0);"function"!=typeof n[2]&&n.splice(2,0,$),"function"!=typeof n[3]&&n.splice(3,0,$);var r=n[2],i=n[3],a=function(e,t){if(!e||1!==e.nodeType)return null;if(t)var n=t.effectName,r=t.effectDriver;else n=e.getAttribute("data-effect-name"),r=e.getAttribute("data-effect-driver");if(!n||!r)return null;var i=zn.pop()||new Gn;return i.el=e,i.driver=r,i.useCss="j"!==r,i.useCss&&(t&&P(e).addClass(t.effectClass),i.cssEvent="t"===r?Fn:Rn),i.name=n,i.callbacks=P.effects[n]||{},i}(e,n[4]);if(!a)return r(),i(),!1;a[t?"enter":"leave"](r,i)};P.mix(P.effect,{apply:Zn,append:function(e,t,n,r){return Zn(e,1,function(){t.appendChild(e)},n,r)},before:function(e,t,n,r){return Zn(e,1,function(){t.parentNode.insertBefore(e,t)},n,r)},remove:function(e,t,n,r){return Zn(e,0,function(){e.parentNode===t&&t.removeChild(e)},n,r)}}),P.directive("html",{update:function(e){var t=this.element,n=1!==t.nodeType,r=n?t.parentNode:t;if(r){if(e=null==e?"":e,3===t.nodeType){var i=H("html");r.insertBefore(L.createComment(i),t),this.element=L.createComment(i+":end"),r.replaceChild(this.element,t),t=this.element}if("object"!=typeof e)var a=P.parseHTML(String(e));else if(11===e.nodeType)a=e;else if(1===e.nodeType||e.item){var o=1===e.nodeType?e.childNodes:e.item;for(a=D.cloneNode(!0);o[0];)a.appendChild(o[0])}if(o=P.slice(a.childNodes),n){for(var s=t.nodeValue.slice(0,-4);;){var c=t.previousSibling;if(!c||8===c.nodeType&&c.nodeValue===s)break;r.removeChild(c)}r.insertBefore(a,t)}else P.clearHTML(t).appendChild(a);cn(o,this.vmodels)}}}),P.directive("if",{priority:10,update:function(e){var t,n=this,r=this.element,i=n.stamp=+new Date,a=function(){i===n.stamp&&(n.recoverNode=null)};n.recoverNode&&n.recoverNode();try{if(!r.parentNode)return;t=r.parentNode}catch(e){return}if(e){function o(){r.getAttribute(n.name)&&(r.removeAttribute(n.name),Kt(r,n.vmodels)),n.rollback=null}if(8===r.nodeType){var s=n.keep,c=P.effect.apply(s,1,function(){i===n.stamp&&(r.parentNode.replaceChild(s,r),r=n.element=s,s.getAttribute("_required")&&(r.required=!0,r.removeAttribute("_required")),r.querySelectorAll&&P.each(r.querySelectorAll("[_required=true]"),function(e){e.required=!0,e.removeAttribute("_required")}),o())},a);c=!1===c}c||o()}else if(1===r.nodeType){!0===r.required&&(r.required=!1,r.setAttribute("_required","true"));try{P.each(r.querySelectorAll(":required"),function(e){r.required=!1,e.setAttribute("_required","true")})}catch(e){}var l=n.element=L.createComment("ms-if"),u=r.nextSibling;n.recoverNode=function(){n.recoverNode=null,l.parentNode!==t&&(t.insertBefore(l,u),n.keep=r)},P.effect.apply(r,0,function(){if(n.recoverNode=null,i===n.stamp){r.parentNode.replaceChild(l,r);try{n.getter()?N("directive:ms-if: never been here."):(n.keep=r,n.rollback=$)}catch(e){n.keep=r,C.appendChild(r),n.rollback=function(){r.parentNode===C&&C.removeChild(r)}}}},a)}}});var Kn=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/gim,Qn=/<noscript.*?>([\s\S]+?)<\/noscript>/im,er=function(){return new(j.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")},tr=P.templateCache={};function nr(e){for(var t=L.createDocumentFragment(),n=0,r=e.length;n<r;n++)t.appendChild(e[n]);return t}P.directive("include",{init:W.attr.init,update:function(d){var p=this,h=this.element,v=p.vmodels,m=p.includeRendered,y=p.effectName&&p.effectClass,g=p.templateCache,b=p.includeReplace,x=p.includeLoaded,$=b?h.parentNode:h,w=p._element;p.recoverNodes=p.recoverNodes||P.noop;var e=function(e){var t=p._stamp=+new Date;if(x){var n=x.apply($,[e].concat(v));"string"==typeof n&&(e=n)}m&&function t(n,r,i){var a=setTimeout(function(){var e=n.innerHTML;clearTimeout(a),e===i?r():t(n,r,e)})}($,function(){m.call($)},NaN);var r=p.includeLastID||"_default";p.includeLastID=d;var i=g&&g[r]||L.createElement(h.tagName||p._element.tagName);y&&(i.className=y,$.insertBefore(i,p.start)),(g||{})[r]=i;var a=p.recoverNodes();for(a&&$.insertBefore(a,p.end);;){var o=p.start.nextSibling;if(!o||o===i||o===p.end)break;i.appendChild(o)}P.effect.remove(i,$,function(){g&&t===p._stamp&&C.appendChild(i)},p);var s=$,c=P.noop,l=P.noop,u=function(e,t,n){var r=e.templateCache&&e.templateCache[t];if(r){for(var i,a=L.createDocumentFragment();i=r.firstChild;)a.appendChild(i);return a}return P.parseHTML(n)}(p,d,e),f=P.slice(u.childNodes);b&&y?((s=w).innerHTML="",s.setAttribute("ms-skip","true"),$.insertBefore(s,p.end.nextSibling),c=function(){s.insertBefore(u,null)},l=function(){p.recoverNodes=P.noop,t===p._stamp&&(u=nr(f),$.insertBefore(u,p.end),cn(f,v)),s.parentNode===$&&$.removeChild(s)},p.recoverNodes=function(){return p.recoverNodes=P.noop,nr(f)}):c=function(){$.insertBefore(u,p.end),cn(f,v)},P.effect.apply(s,"enter",c,l)};if("src"===p.param)if("string"==typeof tr[d])P.nextTick(function(){e(tr[d])});else if(Array.isArray(tr[d]))tr[d].push(e);else{var i=er();i.onreadystatechange=function(){if(4===i.readyState){var e=i.status;if(200<=e&&e<300||304===e||1223===e){for(var t,n=i.responseText,r=0;t=tr[d][r++];)t(n);tr[d]=n}else N("ms-include load ["+d+"] error")}},tr[d]=[e],i.open("GET",d,!0),"withCredentials"in i&&(i.withCredentials=!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(null)}else{var t=d&&1===d.nodeType?d:L.getElementById(d);if(t){if("NOSCRIPT"===t.tagName&&!t.innerHTML&&!t.fixIE78){(i=er()).open("GET",location,!1),i.send(null);for(var n=L.getElementsByTagName("noscript"),r=(i.responseText||"").match(Kn)||[],a=r.length,o=0;o<a;o++){var s=n[o];s&&(s.style.display="none",s.fixIE78=(r[o].match(Qn)||["","&nbsp;"])[1])}}P.nextTick(function(){e(t.fixIE78||t.value||t.innerText||t.innerHTML)})}}}});var rr=/\(([^)]*)\)/,ir=P.directive("on",{priority:3e3,init:function(e){var t=e.expr;e.type="on";var n=e.param.replace(/-\d+$/,"");if("function"==typeof ir[n+"Hook"]&&ir[n+"Hook"](e),0<t.indexOf("(")&&-1<t.indexOf(")")){var r=(t.match(rr)||["",""])[1].trim();""!==r&&"$event"!==r||(t=t.replace(rr,""))}e.expr=t},update:function(e){var t=this,n=this.element;e=function(e){return(t.getter||$).apply(this,t.args.concat(e))};var r=t.param.replace(/-\d+$/,"");if("scan"===r)e.call(n,{type:r});else if("function"==typeof t.specialBind)t.specialBind(n,e);else var i=P.bind(n,r,e);t.rollback=function(){"function"==typeof t.specialUnbind?t.specialUnbind():P.unbind(n,r,i)}}});function ar(e,t,n){for(var r,i=0;r=e[i++];)r.className===n.effectClass&&P.effect.apply(r,t,$,$,n)}function or(e,t,n){return e?setTimeout(t,++n*e):t(),n}function sr(e,t,n){for(var r=D.cloneNode(!1),i=e,a=i.nodeValue,o=t&&Math.max(+t.staggerIndex,0),s=P.slice(i.parentNode.childNodes),c=s.indexOf(i);;){var l=s[--c];if(!l||0===String(l.nodeValue).indexOf(a))break;!n&&t&&l.className===t.effectClass?function(e){t.staggerIndex=or(t.effectLeaveStagger,function(){P.effect.apply(e,0,$,function(){r.appendChild(e)},t)},o)}(e=l):r.insertBefore(l,r.firstChild)}return r.appendChild(i),r}function cr(e,t,n,r,i){var a=e.template.cloneNode(!0),o=P.slice(a.childNodes);a.appendChild(n.$anchor),i&&t.appendChild(a);n[e.param||"el"];var s={nodes:o,vmodels:[n].concat(e.vmodels),content:a};r.push(s)}function lr(e){var t=("object"===e.xtype?hr:dr)(e);return(t.$anchor||(t.$anchor=e.element.cloneNode(!1))).nodeValue=e.signature,t.$outer=e.$outer,t}function ur(n,r,e){if("array"===e){n.$remove=function(){r.$repeat.removeAt(n.$index)};var t=r.param;n.$watch(t,function(e){var t=n.$index;r.$repeat[t]=e})}else n.$watch("$val",function(e){r.$repeat[n.$key]=e})}P.directive("repeat",{priority:90,init:function(e){var t=e.type;e.cache={},e.enterCount=0;var n=e.element;if(1===n.nodeType){n.removeAttribute(e.name),Wn(n,e),e.param=e.param||"el",e.sortedCallback=Vt(n,"data-with-sorted",e.vmodels);var r=Vt(n,"data-"+t+"-rendered",e.vmodels),i=H(t),a=L.createComment(i+":start"),o=e.element=L.createComment(i+":end");if(e.signature=i,e.start=a,e.template=D.cloneNode(!1),"repeat"===t){var s=n.parentNode;s.replaceChild(o,n),s.insertBefore(a,o),e.template.appendChild(n)}else{for(;n.firstChild;)e.template.appendChild(n.firstChild);n.appendChild(a),n.appendChild(o),s=n}if(e.element=o,r)var c=P.bind(s,"datasetchanged",function(){r.apply(s,s.args),P.unbind(s,"datasetchanged",c),s.msRendered=r})}},update:function(e,t){var i=this,n=this.xtype;this.enterCount+=1;var a=!t;if(a){i.$outer={};var r="$key",o="$val";"array"===n&&(r="$first",o="$last");for(var s,c=0;s=i.vmodels[c++];)if(s.hasOwnProperty(r)&&s.hasOwnProperty(o)){i.$outer=s;break}}var l=this.track;if(i.sortedCallback){var u=i.sortedCallback.call(b,l);u&&Array.isArray(u)&&(l=u)}var f="move";i.$repeat=e;var d=[],p=a&&D.cloneNode(!1),h=[],v=this.param,m=P.mix({},this.cache),y=this.element,g=l.length,b=y.parentNode,x=0;for(c=0;c<g;c++){var $=l[c];m[$]||x++}var w=0;for(c in m)w++;var C,N=(!g||x===g)&&10<w;if(N)for(var k=y.previousSibling,T=i.start;k!==T;)b.removeChild(k),k=y.previousSibling;for(c=0;c<g;c++){var A=m[$=l[c]];if(A)d.push({}),m[$]=!0;else{if((A=lr(this)).$up=null,"array"===n){f="add",A.$id=$;var E=e[c];A[v]=E,Object(E)===E&&(E.$ups=E.$ups||{},E.$ups[v]=A)}else f="append",A.$key=$,A.$val=e[$],A[v]={$key:A.$key,$val:A.$val};((this.cache[$]=A).$anchor||(A.$anchor=y.cloneNode(!1))).nodeValue=this.signature,cr(i,p,A,d,a&&!i.effectDriver),ur(A,i,n)}1===this.enterCount&&(A.$active=!1,A.$oldIndex=A.$index,A.$active=!0,A.$index=c),"array"===n?(A.$first=0===c,A.$last=c===g-1):A.$val=Ne(e[$]),h.push(A)}if(this.proxies=h,a&&!i.effectDriver)b.insertBefore(p,y),d.forEach(function(e){cn(e.nodes||[],e.vmodels),e.nodes=e.vmodels=null});else{var _=i.staggerIndex=0;for($ in m)!0!==m[$]&&(f="del",!N&&sr(m[$].$anchor,i,!0),vr(this.cache,$,v),m[$]=null);for(c=0;c<g;c++){A=h[c],$="array"===n?A.$id:A.$key;var S=h[c-1],O=S?S.$anchor:i.start;m[$]?A.$index!==A.$oldIndex&&function(n,r){_=or(i.effectEnterStagger,function(){var e=sr(n.$anchor),t=P.slice(e.childNodes);b.insertBefore(e,r.nextSibling),ar(t,1,i)},_)}(A,O):function(e,t){var n=e.nodes,r=e.vmodels;n&&(_=or(i.effectEnterStagger,function(){b.insertBefore(e.content,t.nextSibling),cn(n,r),!a&&ar(n,1,i)},_)),e.nodes=e.vmodels=null}(d[c],O)}}if(!e.$track)for($ in this.cache)vr(this.cache,$,v);C=te.newWatch?arguments:[f],b.args=C,b.msRendered&&b.msRendered.apply(b,C);var M=setTimeout(function(){clearTimeout(M),P.fireDom(b,"datasetchanged",{bubble:b.msHasEvent})});this.enterCount-=1}}),"with,each".replace(o,function(e){W[e]=P.mix({},W.repeat,{priority:1400})});var fr=[];function dr(e,t){for(var n=e.param||"el",r=0,i=fr.length;r<i;r++){var a=fr[r];if(a&&a.hasOwnProperty(n)){fr.splice(r,1),t=a;break}}return t||(t=function(e){var t={$outer:{},$index:0,$oldIndex:0,$anchor:null,$first:!1,$last:!1,$remove:P.noop};t[e]=NaN;var n={$last:1,$first:1,$index:1};n[e]=1;var r=me(t,{force:n});return r.$id=H("$proxy$each"),r}(n)),t}var pr=[];function hr(e){var t=e.param||"el";return pr.pop()||function(e){var t={$key:"",$val:NaN,$index:0,$oldIndex:0,$outer:{},$anchor:null};t[e]=NaN;var n={$key:1,$val:1,$index:1};n[e]=1;var r=me(t,{force:n});return r.$id=H("$proxy$with"),r}(t)}function vr(e,t,n){var r=e[t];if(r){var i=0===r.$id.indexOf("$proxy$each")?fr:pr;for(var a in r.$outer={},r.$events){var o=r.$events[a];Array.isArray(o)&&(o.length=0,a===n?r[n]=NaN:"$val"===a&&(r.$val=NaN))}i.unshift(r)>te.maxRepeatSize&&i.pop(),delete e[t]}}function mr(e,t){var n="_"+e;if(!mr[n]){var r=L.createElement(e);m.appendChild(r),t=v?getComputedStyle(r,null).display:r.currentStyle.display,m.removeChild(r),mr[n]=t}return mr[n]}P.directive("text",{update:function(e){var t=this.element;if(e=null==e?"":e,3===t.nodeType)try{t.data=e}catch(e){}else"textContent"in t?t.textContent=e:t.innerText=e}}),P.parseDisplay=mr,P.directive("visible",{init:function(e){Wn(e.element,e)},update:function(e){var t,n=this,r=this.element,i=!this.effectName;if(!this.stamp)return t=this.stamp=+new Date,void(e?(r.style.display=n.display||"","none"===P(r).css("display")&&(r.style.display=n.display=mr(r.nodeName))):r.style.display="none");t=this.stamp=+new Date,e?P.effect.apply(r,1,function(){if(t===n.stamp){var e=r.getAttribute("data-effect-driver")||"a";i&&(r.style.display=n.display||""),"a"!==e&&"t"!==e||"none"===P(r).css("display")&&(r.style.display=n.display||mr(r.nodeName))}}):P.effect.apply(r,0,function(){t===n.stamp&&(r.style.display="none")})}});var yr=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,gr=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,br=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,xr={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi},$r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wr=/([^\#-~| |!])/g;function Cr(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i,a,o,s=isFinite(+e)?+e:0,c=isFinite(+t)?Math.abs(t):3,l=r||",",u=n||".",f="";return 3<(f=(c?(i=s,a=c,o=Math.pow(10,a),""+(Math.round(i*o)/o).toFixed(a)):""+Math.round(s)).split("."))[0].length&&(f[0]=f[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,l)),(f[1]||"").length<c&&(f[1]=f[1]||"",f[1]+=new Array(c-f[1].length+1).join("0")),f.join(u)}var Nr=P.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,n){return t=t||30,n="string"==typeof n?n:"...",e.length>t?e.slice(0,t-n.length)+n:String(e)},$filter:function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t],i=P.filters[r[0]];if("function"==typeof i){var a=[e].concat(r.slice(1));e=i.apply(null,a)}}return e},camelize:Qe,sanitize:function(e){return e.replace(yr,"").replace(br,function(e,t){var n=e.toLowerCase().match(/<(\w+)\s/);if(n){var r=xr[n[1]];r&&(e=e.replace(r,function(e,t,n){var r=n.charAt(0);return t+"="+r+"javascript:void(0)"+r}))}return e.replace(gr," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace($r,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(wr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,t,n){return(t||"¥")+Cr(e,isFinite(n)?n:2)},number:Cr};new function(){function h(e){return parseInt(e,10)||0}function o(e,t,n){var r="";for(e<0&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function e(n,r,i,a){return function(e){var t=e["get"+n]();return(0<i||-i<t)&&(t+=i),0===t&&-12===i&&(t=12),o(t,r,a)}}function t(r,i){return function(e,t){var n=e["get"+r]();return t[(i?"SHORT"+r:r).toUpperCase()][n]}}var v={yyyy:e("FullYear",4),yy:e("FullYear",2,0,!0),y:e("FullYear",1),MMMM:t("Month"),MMM:t("Month",!0),MM:e("Month",2,1),M:e("Month",1,1),dd:e("Date",2),d:e("Date",1),HH:e("Hours",2),H:e("Hours",1),hh:e("Hours",2,-12),h:e("Hours",1,-12),mm:e("Minutes",2),m:e("Minutes",1),ss:e("Seconds",2),s:e("Seconds",1),sss:e("Milliseconds",3),EEEE:t("Day"),EEE:t("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e){var t=-1*e.getTimezoneOffset(),n=0<=t?"+":"";return n+=o(Math[0<t?"floor":"ceil"](t/60),2)+o(Math.abs(t%60),2)}},m=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,y=/^\/Date\((\d+)\)\/$/;Nr.date=function(t,e){var n,r,i=Nr.date.locate,a="",o=[];if(e=i[e=e||"mediumDate"]||e,"string"==typeof t)if(/^\d+$/.test(t))t=h(t);else if(y.test(t))t=+RegExp.$1;else{var s=t.trim(),c=[0,0,0,0,0,0,0],l=new Date(0);s=s.replace(/^(\d+)\D(\d+)\D(\d+)/,function(e,t,n,r){var i=4===r.length?[r,t,n]:[t,n,r];return c[0]=h(i[0]),c[1]=h(i[1])-1,c[2]=h(i[2]),""});var u=l.setFullYear,f=l.setHours;s=s.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(e,t,n,r,i){return c[3]=h(t),c[4]=h(n),c[5]=h(r),i&&(c[6]=Math.round(1e3*parseFloat("0."+i))),""});var d=0,p=0;s=s.replace(/Z|([+-])(\d\d):?(\d\d)/,function(e,t,n,r){return u=l.setUTCFullYear,f=l.setUTCHours,t&&(d=h(t+n),p=h(t+r)),""}),c[3]-=d,c[4]-=p,u.apply(l,c.slice(0,3)),f.apply(l,c.slice(3)),t=l}if("number"==typeof t&&(t=new Date(t)),"date"===P.type(t)){for(;e;)(r=m.exec(e))?e=(o=o.concat(r.slice(1))).pop():(o.push(e),e=null);return o.forEach(function(e){a+=(n=v[e])?n(t,i):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}};var n={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss",short:"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};n.SHORTMONTH=n.MONTH,Nr.date.locate=n};var kr,Tr=[],Ar=function(e){kr=!0;var t=P.require;for(t&&t.checkDeps&&(modules["domReady!"].state=4,t.checkDeps());e=Tr.shift();)e(P)};if("complete"===L.readyState)setTimeout(Ar);else if(v)L.addEventListener("DOMContentLoaded",Ar);else{L.attachEvent("onreadystatechange",function(){"complete"===L.readyState&&Ar()});try{var Er=null===j.frameElement}catch(e){}m.doScroll&&Er&&j.external&&function t(){try{m.doScroll("left"),Ar()}catch(e){setTimeout(t)}}()}P.bind(j,"load",Ar),P.ready=function(e){kr?e(P):Tr.push(e)},P.config({loader:!0}),P.ready(function(){P.scan(L.body)}),"function"==typeof define&&define.amd&&define("avalon",[],function(){return P});var _r=j.avalon;return P.noConflict=function(e){return e&&j.avalon===P&&(j.avalon=_r),P},void 0===e&&(j.avalon=P),P});