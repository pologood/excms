(function(Z){var h=Z.$LAB,m="UseLocalXHR",j="AlwaysPreserveOrder",x="AllowDuplicates",Y="CacheBust",W="BasePath",U=/^[^?#]*\//.exec(location.href)[0],T=/^\w+\:\/\/\/?[^\/]+/.exec(U)[0],aa=document.head||document.getElementsByTagName("head"),g=(Z.opera&&Object.prototype.toString.call(Z.opera)=="[object Opera]")||("MozAppearance" in document.documentElement.style),X=document.createElement("script"),R=typeof X.preload=="boolean",V=R||(X.readyState&&X.readyState=="uninitialized"),w=!V&&X.async===true,d=!V&&!w&&!g;function v(o){return Object.prototype.toString.call(o)=="[object Function]"}function p(o){return Object.prototype.toString.call(o)=="[object Array]"}function c(q,r){var o=/^\w+\:\/\//;if(/^\/\/\/?/.test(q)){q=location.protocol+q}else{if(!o.test(q)&&q.charAt(0)!="/"){q=(r||"")+q}}return o.test(q)?q:((q.charAt(0)=="/"?T:U)+q)}function S(q,r){for(var o in q){if(q.hasOwnProperty(o)){r[o]=q[o]}}return r}function b(q){var r=false;for(var o=0;o<q.scripts.length;o++){if(q.scripts[o].ready&&q.scripts[o].exec_trigger){r=true;q.scripts[o].exec_trigger();q.scripts[o].exec_trigger=null}}return r}function Q(q,s,o,r){q.onload=q.onreadystatechange=function(){if((q.readyState&&q.readyState!="complete"&&q.readyState!="loaded")||s[o]){return}q.onload=q.onreadystatechange=null;r()}}function n(o){o.ready=o.finished=true;for(var q=0;q<o.finished_listeners.length;q++){o.finished_listeners[q]()}o.ready_listeners=[];o.finished_listeners=[]}function a(t,r,s,q,o){setTimeout(function(){var y,z=r.real_src,u;if("item" in aa){if(!aa[0]){setTimeout(arguments.callee,25);return}aa=aa[0]}y=document.createElement("script");if(r.type){y.type=r.type}if(r.charset){y.charset=r.charset}if(o){if(V){s.elem=y;if(R){y.preload=true;y.onpreload=q}else{y.onreadystatechange=function(){if(y.readyState=="loaded"){q()}}}y.src=z}else{if(o&&z.indexOf(T)==0&&t[m]){u=new XMLHttpRequest();u.onreadystatechange=function(){if(u.readyState==4){u.onreadystatechange=function(){};s.text=u.responseText+"\n//@ sourceURL="+z;q()}};u.open("GET",z);u.send()}else{y.type="text/cache-script";Q(y,s,"ready",function(){aa.removeChild(y);q()});y.src=z;aa.insertBefore(y,aa.firstChild)}}}else{if(w){y.async=false;Q(y,s,"finished",q);y.src=z;aa.insertBefore(y,aa.firstChild)}else{Q(y,s,"finished",q);y.src=z;aa.insertBefore(y,aa.firstChild)}}},0)}function k(){var q={},u=V||d,z=[],y={},o;q[m]=true;q[j]=false;q[x]=false;q[Y]=false;q[W]="";function t(B,E,A){var D;function C(){if(D!=null){D=null;n(A)}}if(y[E.src].finished){return}if(!B[x]){y[E.src].finished=true}D=A.elem||document.createElement("script");if(E.type){D.type=E.type}if(E.charset){D.charset=E.charset}Q(D,A,"finished",C);if(A.elem){A.elem=null}else{if(A.text){D.onload=D.onreadystatechange=null;D.text=A.text}else{D.src=E.real_src}}aa.insertBefore(D,aa.firstChild);if(A.text){C()}}function s(H,A,G,E){var F,D,C=function(){A.ready_cb(A,function(){t(H,A,F)})},B=function(){A.finished_cb(A,G)};A.src=c(A.src,H[W]);A.real_src=A.src+(H[Y]?((/\?.*$/.test(A.src)?"&_":"?_")+~~(Math.random()*1000000000)+"="):"");if(!y[A.src]){y[A.src]={items:[],finished:false}}D=y[A.src].items;if(H[x]||D.length==0){F=D[D.length]={ready:false,finished:false,ready_listeners:[C],finished_listeners:[B]};a(H,A,F,((E)?function(){F.ready=true;for(var I=0;I<F.ready_listeners.length;I++){F.ready_listeners[I]()}F.ready_listeners=[]}:function(){n(F)}),E)}else{F=D[0];if(F.finished){B()}else{F.finished_listeners.push(B)}}}function r(){var H,G=S(q,{}),F=[],E=0,J=false,D;function C(K,L){K.ready=true;K.exec_trigger=L;I()}function B(L,M){L.ready=L.finished=true;L.exec_trigger=null;for(var K=0;K<M.scripts.length;K++){if(!M.scripts[K].finished){return}}M.finished=true;I()}function I(){while(E<F.length){if(v(F[E])){try{F[E++]()}catch(K){}continue}else{if(!F[E].finished){if(b(F[E])){continue}break}}E++}if(E==F.length){J=false;D=false}}function A(){if(!D||!D.scripts){F.push(D={scripts:[],finished:true})}}H={script:function(){for(var K=0;K<arguments.length;K++){(function(M,O){var L;if(!p(M)){O=[M]}for(var N=0;N<O.length;N++){A();M=O[N];if(v(M)){M=M()}if(!M){continue}if(p(M)){L=[].slice.call(M);L.unshift(N,1);[].splice.apply(O,L);N--;continue}if(typeof M=="string"){M={src:M}}M=S(M,{ready:false,ready_cb:C,finished:false,finished_cb:B});D.finished=false;D.scripts.push(M);s(G,M,D,(u&&J));J=true;if(G[j]){H.wait()}}})(arguments[K],arguments[K])}return H},wait:function(){if(arguments.length>0){for(var K=0;K<arguments.length;K++){F.push(arguments[K])}D=F[F.length-1]}else{D=false}I();return H}};return{script:H.script,wait:H.wait,setOptions:function(K){S(K,G);return H}}}o={setGlobalDefaults:function(A){S(A,q);return o},setOptions:function(){return r().setOptions.apply(null,arguments)},script:function(){return r().script.apply(null,arguments)},wait:function(){return r().wait.apply(null,arguments)},queueScript:function(){z[z.length]={type:"script",args:[].slice.call(arguments)};return o},queueWait:function(){z[z.length]={type:"wait",args:[].slice.call(arguments)};return o},runQueue:function(){var B=o,D=z.length,A=D,C;for(;--A>=0;){C=z.shift();B=B[C.type].apply(null,C.args)}return B},noConflict:function(){Z.$LAB=h;return o},sandbox:function(){return k()}};return o}Z.$LAB=k();(function(q,r,o){if(document.readyState==null&&document[q]){document.readyState="loading";document[q](r,o=function(){document.removeEventListener(r,o,false);document.readyState="complete"},false)}})("addEventListener","DOMContentLoaded")})(this);var Ls=window.Ls||{},__Ls_CONFIG__=window.__Ls_CONFIG__||{};(function(){var c=window,d=c.document;if(c.__Ls_LOADED__){return}c.__Ls_LOADED__=true})();Ls.config={debug:false,AJAX_SERVER_PATH:"Server/",AJAX_CONTENTTYPE:"application/json",AJAX_DATATYPE:"json",APPNAME:"",rootDir:"/assets/",addVersion:false,useCombine:false,cookieDomain:"lonsun.cn",documentDomain:"lonsun.cn",iframeProxyUrl:"/iframeproxy.html",defaultServer:"http://192.168.18.101:8200",servers:["http://192.168.18.101:8200"],fileVersions:{},fileCombines:{},fileCodes:{jquery:"core/jquery.min.js"},cdnFiles:{"tool/webim/js/webim.cmb.js":1,"tool/webim_v2/js/webim.cmb.js":1}};Ls.config.getRootDir=function(){return Ls.config.rootDir};Ls.config.setRootDir=function(a){Ls.config.rootDir=a};Ls.guid="$Ls$";Ls.debug=false;Ls.logInConsole=true;Ls.ajaxCharset="utf-8";Ls.loginUrl="/login";Ls.miniLoginUrl="/login/miniLogin";Ls.getVer=function(){return Ls.version};Ls.path=Ls.path||{};Ls.gloalVar={font_icon:false,font_icon1:false,bootstrap_ver:"2.3.1",bt_css:false,bootstrap_js:false,ace_css:false,ace_js:false,responsive:false,miniui:false,kendo:false,kendo_skin:"silver",knockout_ver:"2.2.1",knockout:false,metroJs:false};Ls.module={empty:"empty.js",html5shiv:"utils/html5shiv.js",json2:"utils/json2.min.js",respond:"utils/respond.min.js",excanvas:"utils/excanvas.min.js",fonticon:{path:"css/fontIcon/",css:"fontello.css",css1:"animation.css",ie7:"fontello-ie7.css"},fonticon1:{path:"css/iconfont/",css:"iconfont.css"},kendo:{ver:"2013.3.1119",path:"ui/kendo/",js:"js/kendo.web.min.js",lang:"js/cultures/kendo.culture.zh-CN.min.js",commoncss:"styles/kendo.common.min.css",rtl:"styles/kendo.rtl.min.css",skin:{def:"styles/kendo.default.min.css",black:"styles/kendo.black.min",blueopal:"styles/kendo.blueopal.min.css",flat:"styles/kendo.flat.min.css",bootstrap:"styles/kendo.bootstrap.min.css",highcontrast:"styles/kendo.highcontrast.min.css",metro:"styles/kendo.metro.min.css",metroblack:"styles/kendo.metroblack.min.css",moonlight:"styles/kendo.moonlight.min.css",silver:"styles/kendo.silver.min.css",uniform:"styles/kendo.uniform.min.css"}},metroJs:{path:"ui/metroJs",js:"MetroJs.min.js",css:"MetroJs.min.css"},knockout:{ver:"2.3.0",path:"mvc/knockout/",js:"knockout.js",tmpl:"jquery.tmpl.js",mapping:"knockout.mapping.js",multimodels:"knockout.multimodels.min.js",livequery:"jquery.livequery.js"},bootstrap:{ver:"2.3.1",path:"ui/bootstrap/",css:"css/bootstrap-noicon",js:"js/bootstrap",fixie6:{js:"bootstrap-ie6",css:"bootstrap-ie6"},responsive:{css:"css/bootstrap-responsive"},ext:{ace:{path:"ui/bootstrap/ext/ace/",css0:"ace.css",css1:"ace-rtl.css",css2:"ace-skin.css",fixie8:"ace-ie.css",css3:"css/font-awesome.min.css",css4:"font-awesome-ie7.min.css",js0:"ace-extra.js",js1:"ace-el.js",js2:"ace.js"}},plugin:{jq_bt:{ver:"",path:"",js:"",css:""}}},dialog:{lhgdialog:{path:"dialog/lhgdialog/",js:"lhgdialog"}},tpl:{artTpl:{path:"tpl/art/",js:"tpl.js",minjs:"tpl.min.js"},jsmart:{path:"tpl/jsmart/",js:"",minjs:"jsmart.min.js"}},form:{ajaxform:{path:"form/ajaxform/",js:"jquery.form.js",minjs:"jquery.form.min.js"},textRemindAuto:{path:"form/textRemindAuto/",js:"jquery.textRemindAuto.js",minjs:"jquery.textRemindAuto.min.js"},autocomplete:{path:"form/autocomplete/",js:"jquery.autocomplete.min.js",css:"jquery.autocomplete.css"},placeholder:{path:"form/placeholder/",js:"jquery.placeholder.min.js"}},miniui:{ver:"3.2",path:"ui/miniui/",js:"miniui.js",src:"miniui.js",lang_zh:"locale/zh_CN.js",icons:"themes/icons.css",skin:{def:"themes/default/miniui.css",blue:"themes/blue/skin.css"}},dhtmlx:{ver:"3.6",path:"ui/dhtmlx/",imgs:"imgs/",common:"core/dhtmlxcommon.js",container:"core/dhtmlxcontainer.js",skin:{skyblue:"skins/skyblue.css",web:"skins/web.css",blue:"skins/blue.css",black:"skins/black.css",terrace:"skins/terrace.css"},ui:{layout:{js:"ui/layout/dhtmlxlayout.js",css:"ui/layout/dhtmlxlayout.css"},grid:{path:"ui/grid/",js:"dhtmlxgrid",css:"dhtmlxgrid",celljs:"dhtmlxgridcell",ext:{pgn:"ext/dhtmlxgrid_pgn.js",filter:"ext/dhtmlxgrid_filter.js"}},toolbar:{path:"ui/toolbar/",js:"dhtmlxtoolbar"},accordion:{path:"ui/accordion/",js:"dhtmlxaccordion"},tabbar:{path:"ui/tabbar/",js:"dhtmlxtabbar",css:"dhtmlxtabbar"}}}};Ls.__getJSPath=function(d){var j=document.getElementsByTagName("script");var n="";var g=d+".min.js";var b=d+".source.js";var d=d+".js";for(var k=0,h=j.length;k<h;k++){var a=j[k].src;_debug=j[k].attributes.debug,_fontIcon=j[k].attributes["font-icon"],_fontIcon1=j[k].attributes["font-icon1"],_bootstrapjs=j[k].attributes["bt-js"],_bootstrapcss=j[k].attributes["bt-css"],_miniui=j[k].attributes.miniui,_acecss=j[k].attributes["ace-css"],_acejs=j[k].attributes["ace-js"],_kojs=j[k].attributes.ko,_kendo=j[k].attributes.kendo,_metrojs=j[k].attributes.metrojs,_kendo_skin=j[k].attributes["kendo-skin"],_responsive=j[k].attributes["bt-fluid"];if(a.indexOf(d)!=-1||a.indexOf(g)!=-1||a.indexOf(b)!=-1){var m=a.split(d);if(a.indexOf(g)!=-1){m=a.split(g)}if(a.indexOf(b)!=-1){m=a.split(b)}n=m[0];if((_debug)&&(_debug.value.toLowerCase()=="true"||_debug.value=="1")){Ls.debug=true}if((_responsive)&&(_responsive.value.toLowerCase()=="true"||_responsive.value=="1")){Ls.gloalVar.responsive=true}if((_bootstrapjs)&&(_bootstrapjs.value.toLowerCase()=="true"||_bootstrapjs.value=="1")){Ls.gloalVar.bootstrap_js=true}if((_bootstrapcss)&&(_bootstrapcss.value.toLowerCase()=="true"||_bootstrapcss.value=="1")){Ls.gloalVar.bt_css=true}if((_miniui)&&(_miniui.value.toLowerCase()=="true"||_miniui.value=="1")){Ls.gloalVar.miniui=true}if((_acecss)&&(_acecss.value.toLowerCase()=="true"||_acecss.value=="1")){Ls.gloalVar.ace_css=true}if((_acejs)&&(_acejs.value.toLowerCase()=="true"||_acejs.value=="1")){Ls.gloalVar.ace_js=true}if((_kojs)&&(_kojs.value.toLowerCase()=="true"||_kojs.value=="1")){Ls.gloalVar.knockout=true}if((_kendo)&&(_kendo.value.toLowerCase()=="true"||_kendo.value=="1")){Ls.gloalVar.kendo=true}if((_metrojs)&&(_metrojs.value.toLowerCase()=="true"||_metrojs.value=="1")){Ls.gloalVar.metroJs=true}if(_kendo_skin){Ls.gloalVar.kendo_skin=_kendo_skin.value.toLowerCase()}break}}var c=location.href;c=c.split("#")[0];c=c.split("?")[0];var m=c.split("/");m.length=m.length-1;c=m.join("/");if(n.indexOf("https:")==-1&&n.indexOf("http:")==-1&&n.indexOf("file:")==-1&&n.indexOf("/")!=0){n=c+"/"+n}return n};Ls.__getJSSrc=function(c){var h=document.getElementsByTagName("script");var k="";var d=c+".min.js";var b=c+".source.js";var c=c+".js";for(var j=0,g=h.length;j<g;j++){var a=h[j].src;if(a.indexOf(c)!=-1||a.indexOf(d)!=-1||a.indexOf(b)!=-1){var m=a.split(c);k=a;break}}return k};Ls.__getRelativePath=function(a){var c=a;c=c||document.URL;c=c.replace(/^.*?\:\/\/[^\/]+/,"").replace(/[^\/]+$/,"");if(!a){return c}if(!/\/$/.test(c)){c+="/"}if(/^\.\.\//.test(a)){var d=new RegExp("^\\.\\.\\/"),g=0;while(d.exec(a)!=null){a=a.replace(d,"");g++}for(var b=0;b<g;b++){c=c.replace(/[^\/]+\/$/,"")}if(c==""){return"/"}return c}a=a.replace(/^\.\//,"");return c};Ls.__getPathRelativePublic=function(j){var c=Ls.__getRelativePath(Ls.path.BOOTJS_PATH);if(j>-1){return c}if(/\/$/.test(c)){c=c.substring(0,c.length-1)}var a=c.split("/");var h=a.length-1;var g="";var d=h+(j);if(d<0){return"/"}for(var b=0;b<h;b++){g+=a[b]+"/";if(d==b){break}if(d>h){return"/"}}return g};Ls.path.BOOTJS_PATH=Ls.__getJSPath("boot");Ls.path.ASSETS_PATH=Ls.__getPathRelativePublic(-1);Ls.path.RES_PATH=Ls.path.ASSETS_PATH+"res/";Ls.path.CORE_PATH=Ls.path.ASSETS_PATH+"core/";Ls.path.ROOT_PATH=Ls.__getPathRelativePublic(-99);Ls.path.CUR_PATH=Ls.__getJSPath();Ls.path.APP_PATH=Ls.path.ROOT_PATH+"app/";Ls.path.AJAX_SRV_URL="";Ls.__getAjaxDataUrl=function(){return Ls.config.AJAX_SERVER_PATH};Ls.__getAjaxDataType=function(){if(Ls.config.AJAX_SERVER_PATH.toLowerCase().indexOf("http://")>-1){return"jsonp"}return Ls.config.AJAX_DATATYPE};Ls.__getAjaxContentType=function(){return Ls.config.AJAX_CONTENTTYPE};Ls.__loadJs=function(b,a){a=a||"1.0";document.write('<script src="'+b+"?v="+a+'" charset="utf-8"><\/script>')};Ls.__loadCss=function(c,a){a=a||"1.0";c=c+"?v="+a;var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("href",c);document.getElementsByTagName("head")[0].appendChild(b)};Ls.__loadAppJs=function(b,a){a=a||"1.0";b=Ls.path.CUR_PATH+b;Ls.__loadJs(b,a)};Ls.__loadAppCss=function(b,a){a=a||"1.0";b=Ls.path.CUR_PATH+b;Ls.__loadCss(b,a)};Ls.__loadResJs=function(b,a){a=a||"1.0";b=Ls.path.RES_PATH+b;Ls.__loadJs(b,a)};Ls.__loadResCss=function(b,a){a=a||"1.0";b=Ls.path.RES_PATH+b;Ls.__loadCss(b,a)};Ls.__loadCoreJs=function(b,a){a=a||"1.0";b=Ls.path.CORE_PATH+b;Ls.__loadJs(b,a)};Ls.__loadCoreCss=function(b,a){a=a||"1.0";b=Ls.path.CORE_PATH+b;Ls.__loadCss(b,a)};Ls.browser={IS_IE:navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("rv:11")>=0,IS_LSCLIENT:navigator.userAgent.indexOf("LonsunCloudClient")>=0,IS_IE6:navigator.userAgent.indexOf("MSIE 6")>=0,IS_IE7:navigator.userAgent.indexOf("MSIE 7")>=0,IS_IE8:navigator.userAgent.indexOf("MSIE 8")>=0,IS_IE9:navigator.userAgent.indexOf("MSIE 9")>=0,IS_IE10:navigator.userAgent.indexOf("MSIE 10")>=0,IS_IE11:navigator.userAgent.indexOf("rv:11")>=0,IS_QUIRKS:navigator.userAgent.indexOf("MSIE")>=0&&(document.documentMode==null||document.documentMode==5),IS_NS:navigator.userAgent.indexOf("Mozilla/")>=0&&navigator.userAgent.indexOf("MSIE")<0,IS_OP:navigator.userAgent.indexOf("Opera/")>=0,IS_OT:navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0,IS_SF:navigator.userAgent.indexOf("AppleWebKit/")>=0&&navigator.userAgent.indexOf("Chrome/")<0,IS_GC:navigator.userAgent.indexOf("Chrome/")>=0,IS_MT:(navigator.userAgent.indexOf("Firefox/")>=0&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0)||(navigator.userAgent.indexOf("Iceweasel/")>=0&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0)||(navigator.userAgent.indexOf("SeaMonkey/")>=0&&navigator.userAgent.indexOf("SeaMonkey/1.")<0)||(navigator.userAgent.indexOf("Iceape/")>=0&&navigator.userAgent.indexOf("Iceape/1.")<0),IS_TOUCH:navigator.userAgent.toUpperCase().indexOf("IPAD")>0||navigator.userAgent.toUpperCase().indexOf("IPOD")>0||navigator.userAgent.toUpperCase().indexOf("IPHONE")>0||navigator.userAgent.toUpperCase().indexOf("ANDROID")>0,IS_LOCAL:document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0};var _userAgent=navigator.userAgent.toLowerCase();var _explorerType;(_explorerType=_userAgent.match(/msie ([\d.]+)/))?Ls.browser.ie=_explorerType[1]:(_explorerType=_userAgent.match(/firefox\/([\d.]+)/))?Ls.browser.firefox=_explorerType[1]:(_explorerType=_userAgent.match(/chrome\/([\d.]+)/))?Ls.browser.chrome=_explorerType[1]:(_explorerType=_userAgent.match(/opera.([\d.]+)/))?Ls.browser.opera=_explorerType[1]:(_explorerType=_userAgent.match(/version\/([\d.]+).*safari/))?Ls.browser.safari=_explorerType[1]:0;try{if(Ls.browser.ie){console.log("IE: "+Ls.browser.ie);if(parseInt(Ls.browser.ie)==7){console.log("\u6d4f\u89c8\u5668\u7248\u672c\uff1aIE7")}}if(Ls.browser.firefox){console.log("Firefox: "+Ls.browser.firefox)}if(Ls.browser.chrome){console.log("Chrome: "+Ls.browser.chrome)}if(Ls.browser.opera){console.log("Opera: "+Ls.browser.opera)}if(Ls.browser.safari){console.log("Safari: "+Ls.browser.safari)}}catch(e){}function __loadFontCss(){}function __loadFontCss1(){}function __loadMetroJs(){var a=Ls.module.metroJs,d=a.path+"/",c=d+a.js,b=d+a.css;Ls.__loadResCss(b);Ls.__loadResJs(c)}function __loadBtCss(){var a=Ls.module.bootstrap,c=a.path+a.ver+"/"+a.css;if(Ls.debug){c+=".min"}c+=".css";Ls.__loadResCss(c,a.ver);if(Ls.browser.ie){if(parseInt(Ls.browser.ie)<7){var b=a.path+a.ver+"/"+a.fixie6.css;if(Ls.debug){b+=".min"}b+=".css";Ls.__loadResCss(b,a.ver)}if(parseInt(Ls.browser.ie)<9){Ls.__loadResJs(Ls.module.html5shiv,"3.6.2")}}}function __loadBtRespCss(){var a=Ls.module.bootstrap,b=a.path+a.ver+"/"+a.responsive.css;if(!Ls.debug){b+=".min"}b+=".css";Ls.__loadResCss(b,a.ver)}function __loadAceCss(){var a=Ls.module.bootstrap.ext.ace,b=a.path;Ls.__loadResCss(a.css3);Ls.__loadResCss(b+a.css0);Ls.__loadResCss(b+a.css1);Ls.__loadResCss(b+a.css2);if(Ls.browser.ie){if(parseInt(Ls.browser.ie)<9){Ls.__loadResCss(a.css4);Ls.__loadResCss(b+a.fixie8)}}}function __loadAceJs(){var a=Ls.module.bootstrap.ext.ace,b=a.path;Ls.__loadResJs(b+a.js0);Ls.__loadResJs(b+a.js1);Ls.__loadResJs(b+a.js2);if(Ls.browser.ie){if(parseInt(Ls.browser.ie)<9){Ls.__loadResJs(Ls.module.respond)}}}function __loadBtjs(){var a=Ls.module.bootstrap,c=a.path+a.ver+"/"+a.js;if(Ls.debug){c+=".min"}c+=".js";Ls.__loadResJs(c,a.ver);if(Ls.browser.ie){if(parseInt(Ls.browser.ie)<7){var b=a.path+a.ver+"/"+a.fixie6.js;if(Ls.debug){b+=".min"}b+=".js";Ls.__loadResJs(b,a.ver)}}}function __loadMiniUI(){var a=Ls.module.miniui,b=a.path+a.ver+"/";if(Ls.debug){Ls.__loadResJs(b+a.src,a.ver)}else{Ls.__loadResJs(b+a.js,a.ver)}Ls.__loadResCss(b+a.icons,a.ver);Ls.__loadResCss(b+a.skin.def,a.ver);Ls.__loadResCss(b+a.skin.blue,a.ver)}function __loadKo(){var a=Ls.module.knockout,b=a.path+a.ver+"/";Ls.__loadResJs(b+a.tmpl,a.ver);Ls.__loadResJs(b+a.js,a.ver);Ls.__loadResJs(b+a.mapping,a.ver);Ls.__loadResJs(b+a.livequery,a.ver);Ls.__loadResJs(b+a.multimodels,a.ver)}function __loadKenko(){var a=Ls.module.kendo,c=a.path+a.ver+"/";Ls.__loadResCss(c+a.commoncss,a.ver);Ls.__loadResCss(c+a.rtl,a.ver);try{console.log("Ls.gloalVar.kendo_skin = "+Ls.gloalVar.kendo_skin)}catch(b){}switch(Ls.gloalVar.kendo_skin){case"silver":Ls.__loadResCss(c+a.skin.silver,a.ver);break;case"default":Ls.__loadResCss(c+a.skin.def,a.ver);break;case"black":Ls.__loadResCss(c+a.skin.black,a.ver);break;case"blueopal":Ls.__loadResCss(c+a.skin.blueopal,a.ver);break;case"flat":Ls.__loadResCss(c+a.skin.flat,a.ver);break;case"bootstrap":Ls.__loadResCss(c+a.skin.bootstrap,a.ver);break;case"highcontrast":Ls.__loadResCss(c+a.skin.highcontrast,a.ver);break;case"metro":Ls.__loadResCss(c+a.skin.metro,a.ver);break;case"metroblack":Ls.__loadResCss(c+a.skin.metroblack,a.ver);break;case"moonlight":Ls.__loadResCss(c+a.skin.moonlight,a.ver);break;case"uniform":Ls.__loadResCss(c+a.skin.uniform,a.ver);break;default:Ls.__loadResCss(c+a.skin.silver,a.ver);break}Ls.__loadResJs(c+a.js,a.ver)}if(Ls.gloalVar.kendo){__loadKenko()}if(Ls.gloalVar.bt_css){__loadBtCss();if(Ls.gloalVar.responsive){__loadBtRespCss()}if(Ls.gloalVar.ace_css){__loadAceCss()}}if(Ls.gloalVar.bootstrap_js){__loadBtjs();if(Ls.gloalVar.ace_js){__loadAceJs()}}if(Ls.gloalVar.font_icon){__loadFontCss()}if(Ls.gloalVar.font_icon1){__loadFontCss1()}if(Ls.gloalVar.miniui){__loadMiniUI()}if(Ls.browser.ie){if(parseInt(Ls.browser.ie)<9){Ls.__loadResJs(Ls.module.json2)}}if(Ls.gloalVar.knockout){__loadKo()}if(Ls.gloalVar.metroJs){__loadMetroJs()}Ls.loading='<img src="'+Ls.path.RES_PATH+'images/loading.gif" /> \u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u5019...';Ls.nodata="\u6682\u65e0\u6570\u636e";Ls.lang=Ls.lang||{};Ls.lang.forminitTip="\u6b63\u5728\u521d\u59cb\u5316\u8868\u5355,\u8bf7\u7a0d\u5019...";Ls.lang.submitTip="\u6b63\u5728\u63d0\u4ea4\u6570\u636e,\u8bf7\u7a0d\u5019...";Ls.lang.submitOkImg='<img src="'+Ls.path.RES_PATH+'images/icons/ok-30.png" /> ';Ls.lang.errorTip="\u7f51\u7edc\u7e41\u5fd9,\u8bf7\u7a0d\u5019\u518d\u8bd5!";window.__flash__removeCallback=(function(){return function(a,b){}})();window.__flash__removeCallback=function(a,b){try{if(a){a[b]=null}}catch(c){}};$(document).ready(function(){if(Ls.browser.IS_IE6){}});(function(){var g={};var b={zh_CN:""};var h={};function a(o,p){var m=false;var n=document.createElement("script");n.src=o;n.charset=Ls.page.charset;n.onload=n.onreadystatechange=function(){if(!m&&(!n.readyState||n.readyState=="loaded"||n.readyState=="complete")){m=true;n.onload=n.onreadystatechange=null;if($.isFunction(p)){p.call(n)}}};document.getElementsByTagName("head")[0].appendChild(n)}function d(m,n){a(m,function(){var o=this;document.getElementsByTagName("head")[0].removeChild(this);if($.isFunction(n)){n.call(o)}})}function j(m,o){var n=document.createElement("link");n.rel="stylesheet";n.href=m;n.charset=Ls.page.charset;document.getElementsByTagName("head")[0].appendChild(n);if($.isFunction(o)){o.call(n)}}function c(n,s){h[n]="loading";var q=Ls.page.modules[n];var r="loading";var p=(Ls.page.css&&q.css)?"loading":"loaded";if(Ls.page.css&&q.css){var m=q.css;j(m,function(){p="loaded";if(r=="loaded"&&p=="loaded"){o()}})}if(q.js){var m=q.js;a(m,function(){r="loaded";if(r=="loaded"&&p=="loaded"){o()}})}function o(){var t=this;h[n]="loaded";Ls.page.onProgress(n);if($.isFunction(s)){s.call(t)}}}function k(m,t){var p=[];var o=false;if(typeof m=="string"){u(m)}else{for(var r=0;r<m.length;r++){u(m[r])}}function u(v){if(!Ls.page.modules[v]){return}var x=Ls.page.modules[v]["dependencies"];if(x){for(var w=0;w<x.length;w++){u(x[w])}}p.push(v)}function s(){var v=this;if($.isFunction(t)){t.call(v)}Ls.page.onLoad(m)}var n=0;function q(){if(p.length){var v=p[0];if(!h[v]){o=true;c(v,function(){p.shift();q()})}else{if(h[v]=="loaded"){p.shift();q()}else{if(n<Ls.page.timeout){n+=10;setTimeout(arguments.callee,10)}}}}else{if(Ls.page.locale&&o==true&&b[Ls.page.locale]){var w=Ls.page.base+"locale/"+b[Ls.page.locale];d(w,function(){s()})}else{s()}}}q()}Ls.page={charset:"utf-8",queues:h,modules:g,locales:b,base:".",theme:"default",css:true,locale:null,timeout:10000,load:function(m,n){if(/\.css$/i.test(m)){j(m,n)}else{if(/\.js$/i.test(m)){a(m,n)}else{k(m,n)}}},onProgress:function(m){},onLoad:function(m){}};window.using=Ls.page.load})();(function(){var c=window,d=c.document;Ls.each=function(b,k){if(Ls.isFunction(k)){var j,a,h;if(Ls.isArray(b)){for(j=0,a=b.length;j<a;j++){h=k(b[j],j);if(h===false){break}}}else{if(Ls.isObject(b)){for(j in b){if(b.hasOwnProperty(j)){h=k(b[j],j);if(h===false){break}}}}}}};Ls.map=function(b,g){var a=[];Ls.each(b,function(j,h){a.push(g(j,h))});return a};Ls.inArray=function(b,g){var a=-1;Ls.each(g,function(j,h){if(j===b){a=h;return false}});return a};Ls.addEvent=function(a,b,g){if(a.addEventListener){a.addEventListener(b,g,false)}else{if(a.attachEvent){a.attachEvent("on"+b,g)}}};Ls.removeEvent=function(a,b,g){if(a.removeEventListener){a.removeEventListener(b,g,false)}else{if(a.detachEvent){a.detachEvent("on"+b,g)}}};Ls.getCookie=function(g){var b=document,a=null,h;if(b.cookie){h=b.cookie.match(new RegExp("(^| )"+g+"=([^;]*)(;|$)"));if(h!=null){a=decodeURIComponent(h[2])}}return a};Ls.setCookie=function(n,b,o,a,j,m){if(Ls.isUndefined(document.cookie)){return false}o=!Ls.isNumber(o)?0:parseInt(o);if(o<0){b=""}var k=new Date();k.setTime(k.getTime()+1000*o);document.cookie=n+"="+encodeURIComponent(b)+((o)?"; expires="+k.toGMTString():"")+"; path="+(a||"/")+"; domain="+(j||Ls.config.cookieDomain)+((m)?"; secure":"");return true};Ls.removeCookie=function(g,a,b){return Ls.setCookie(g,"",-1,a,b)};(function(){var a=0;Ls.guid=function(g){var h=new Date().getTime()+""+Math.random();return(g?g:"guid_")+a+++"_"+h.replace(/\./g,"_")};var b={};Ls.getCache=function(g){return !Ls.isUndefined(b[g])?b[g]:null};Ls.setCache=function(g,h){if(arguments.length==1){h=g;g=Ls.guid()}b[g]=h;return g};Ls.removeCache=function(g){if(!Ls.isUndefined(b[g])){delete b[g]}};Ls.clearCache=function(){b={}}})();(function(){var a=window,b=document,n=false,k=[],p,m=false,o=function(){if(m){return}m=true;o=Function.prototype;n=true;for(var g=0;g<k.length;g++){k[g]()}k.length=0;m=false};if("readyState" in b){p=b.readyState;n=p=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(p=="loaded"||p=="interactive"))}else{n=!!b.body}if(!n){if(a.addEventListener){b.addEventListener("DOMContentLoaded",o,false)}else{b.attachEvent("onreadystatechange",function(){if(b.readyState=="complete"){o()}});if(b.documentElement.doScroll&&a===top){(function q(){if(n){return}try{b.documentElement.doScroll("left")}catch(g){setTimeout(q,1);return}o()}())}}Ls.addEvent(a,"load",o)}Ls.onDomReady=function(g,h){if(n){g.call(h);return}k.push(function(){g.call(h)})}})();(function(){Ls.errorStack=[];var b=!Ls.config.debug&&parseInt(Math.random()*51)===1;var g=0;Ls.wrap=function(j,k){if(typeof k==="function"&&/^function/.test(k.toString())){return j(k)}return k};Ls.guard=function(j,k){return function(){try{return j.apply(this,arguments)}catch(m){try{Ls.errorStack.push({type:k||"Ls_GUARD",message:m.message||m.toString(),stack:m.stack,fn:j.toString().substr(0,200)})}catch(n){}throw m}}};Ls.goTry=function(j,k){return Ls.guard(k,j)};var a;Ls.errorManager={send:function(j,k,m){Ls.errorStack.push({type:m,message:j,loc:k});clearTimeout(a);a=setTimeout(h,3000)}};function h(){if(!b){return}if(g===Ls.errorStack.length){return}}})();+function(){Ls.Deferred=function(){var a="pending";var b={done:[],fail:[],always:[]};var g=[];function h(m,n){if(typeof n==="function"){if(a===m||(m==="always"&&a!=="pending")){setTimeout(function(){n.apply({},g)},0)}else{b[m].push(n)}}else{if(a==="pending"){a=m;var k=b[m];var o=b.always;while((n=k.shift())||(n=o.shift())){setTimeout((function(j){return function(){j.apply({},g)}})(n),0)}}}}return{state:function(){return a},done:function(j){if(typeof j==="function"){h("done",j)}else{g=[].slice.call(arguments);h("done")}return this},fail:function(j){if(typeof j==="function"){h("fail",j)}else{g=[].slice.call(arguments);h("fail")}return this},always:function(j){if(typeof j==="function"){h("always",j)}return this},promise:function(){return{done:function(j){if(typeof j==="function"){h("done",j)}return this},fail:function(j){if(typeof j==="function"){h("fail",j)}return this},always:function(j){if(typeof j==="function"){h("always",j)}return this},state:function(){return a}}}}};Ls.when=function(){var j=Ls.Deferred(),a=[].slice.call(arguments),k=a.length,b=0;if(!k){return j.done().promise()}for(var h=a.length-1;h>=0;h--){a[h].fail(function(){j.fail()}).done(function(){if(++b===k){j.done()}})}return j.promise()}}();+function(){var C=document.getElementsByTagName("head")[0],P=Ls.config;var L=P.fileVersions,G=P.fileCodes,S=P.fileCombines;var F=Ls.config.debug?true:false;var b={};var R=[];var H=+new Date;Ls.defers=b;Ls.eventList=R;var Q={ERROR:-2,FAILED:-1,FETCHING:1,FETCHED:2,SAVED:3,READY:4,COMPILING:5,PAUSE:6,COMPILED:7};var M=function(g){g=M.resolve(g)[0];if(M.cache[g]&&M.cache[g].status===Q.COMPILED){return M.cache[g].exports}else{throw new Error(g+"\u5c1a\u672a\u52a0\u8f7d")}};M.resolve=function(g){var h=[];if(G[g]){if(typeof G[g]==="string"){G[g]=[G[g]]}Ls.each(G[g],function(j){Ls.each(M.resolve(j),function(k){h.push(k)})})}else{h.push(g)}return h};M.cache={};Ls.Module={STATUS:Q,fileLoaders:{".js":K,".css":I},find:function(g){return M.cache[M.resolve(g)]}};var D=function(g,k){var m=g.toLowerCase();if(m.indexOf("http:")===0||m.indexOf("https:")===0){return g}if(g.indexOf("./")===0||g.indexOf("../")===0){var h=window.location,j=(h.port?":"+h.port:"");return h.protocol+"//"+h.host+j+"/"+g}else{if(!k){if(P.cdnFiles[g]){k="http://stacdn201.ganjistatic1.com"}else{k=Ls.config.defaultServer}}if(k.indexOf("http")!==0){k="http://"+k}return k+P.rootDir+g.replace(/(\.(js|css|html?|swf|gif|png|jpe?g))$/i,".__"+J(g)+"__$1")}};var J=function(g){var h=+new Date/1000;if(P.fileVersions){h=P.fileVersions[g]||parseInt(h-(h%604800))}return h};Ls.getFormatUrl=function(k,j){var h=M.resolve(k),g=[];var g=Ls.map(h,function(m){return D(m,j)});return g.length===1?g[0]:g};Ls.require=function(k,m){var j=document;var h=B(k);var g=[];if(F){Ls.each(h,function(n){if(S[n.uri]){Ls.each(B(S[n.uri]),function(o){g.push(o)})}else{g.push(n)}})}else{g=h}Ls.each(g,function(n){var o=n.uri;n.status=Q.FETCHING;if(Ls.isFunction(m)){b[n.id].fail(m)}if(/\.css$/i.test(o)){j.write(unescape("%3Clink href='"+D(o)+"' type='text/css' rel='stylesheet' /%3E"))}else{j.write(unescape("%3Cscript src='"+D(o)+"' type='text/javascript'%3E%3C/script%3E"))}})};Ls.use=function(m,n,g){var h=Ls.guid();m=B(m);var k=M.cache[h]={id:h,dependencies:m,status:Q.SAVED,factory:n,onError:g};var j=b[h]=Ls.Deferred();if(Ls.isFunction(g)){j.fail(g)}R.push([-(H-new Date),"use",h]);O(h)};M.async=Ls.use;Ls.add=function(m,j,n,g){var k=M.cache[m],h=b[m];if(k&&k.status>=Q.SAVED){Ls.log.add(m+" \u91cd\u590d\u8f7d\u5165["+k.status+"]");return}if(Ls.isFunction(j)){g=n;n=j;j=[]}j=B(j);if(k){k.dependencies=j;k.status=Q.SAVED;k.factory=n;k.onError=g;k.exports={}}else{M.cache[m]={id:m,uri:m,dependencies:j,status:Q.SAVED,factory:n,onError:g,exports:{}};k=M.cache[m]}if(!h){h=b[m]=Ls.Deferred()}R.push([-(H-new Date),"add",m]);if(Ls.isFunction(g)){h.fail(g)}O(m)};function O(g){var j=M.cache[g];var h=[];R.push([-(H-new Date),"waiting",g]);Ls.each(j.dependencies,function(m){if(m.status<Q.FETCHING){h.push(m.uri)}});Ls.each(h,function(m){z(m)});var k=Ls.map(j.dependencies,function(m){return b[m.id]});Ls.when.apply({},k).done(function(){a(g)})}function a(j){R.push([-(H-new Date),"ready",j]);var k=M.cache[j],h=b[j];k.exports={};k.status=Q.READY;if(Ls.isFunction(k.factory)){k.status=Q.COMPILING;try{if(k.uri){k.pause=function(){k.status=Q.PAUSE};k.resume=function(){delete k.pause;delete k.resume;k.status=Q.COMPILED;h.done()};var o=k.factory.call(window,M,k.exports,k);if(o){k.exports=o}}else{var g=Ls.map(k.dependencies,function(p){return p.exports});k.factory.apply(window,g)}}catch(n){Ls.log.add("MOD: "+j);Ls.log.add("DEP: "+Ls.jsonEncode(Ls.map(k.dependencies,function(p){return p.id})));Ls.log.add("ERR: "+n.message);k.status=Q.ERROR;h.fail();var m=k.factory.toString();m=m.length>150?m.substr(0,150):m;Ls.errorStack.push({type:"Ls_MODULE_CALLBACK_ERROR",message:n.message,uri:j,dependencies:Ls.jsonEncode(Ls.map(k.dependencies,function(p){return p.id})),stack:n.stack,fn:m});throw n}}if(k.status===Q.PAUSE){return}else{k.status=Q.COMPILED;h.done()}}function I(j){var q=navigator.userAgent;var o=Number(q.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"))<536;var g=q.indexOf("Firefox")>0&&!("onload" in document.createElement("link"));var k=M.cache[j];var h=d.createElement("link");var m;h.setAttribute("type","text/css");h.setAttribute("href",D(j));h.setAttribute("rel","stylesheet");if(o||g){setTimeout(function(){p(h,n)},1)}else{h.onload=n;h.onerror=function(){clearTimeout(m);C.removeChild(h);A(j,"Load Fail")}}k.status=Q.FETCHING;C.appendChild(h);m=setTimeout(function(){C.removeChild(h);A(j,"Load timeout")},30000);function n(){clearTimeout(m);R.push([-(H-new Date),"loaded",j]);if(k.status===Q.FETCHING){k.status=Q.FETCHED}a(j)}function p(s,r){var u;if(o){if(s.sheet){u=true}}else{if(s.sheet){try{if(s.sheet.cssRules){u=true}}catch(t){if(t.name==="NS_ERROR_DOM_SECURITY_ERR"){u=true}}}}setTimeout(function(){if(u){r()}else{p(s,r)}},1)}return h}function K(m,g){var k=M.cache[m];var h;j();function j(){var n=setTimeout(function(){C.removeChild(o);A(m,"Load timeout")},30000);var o=d.createElement("script");var p=false;o.setAttribute("type","text/javascript");o.setAttribute("src",D(m));o.setAttribute("async",true);o.onload=o.onreadystatechange=function(){if(!p&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){p=true;clearTimeout(n);R.push([-(H-new Date),"loaded",m]);if(k.status===Q.FETCHING){k.status=Q.FETCHED}if(Ls.isFunction(g)){g()}if(k.status<Q.SAVED){Ls.log.add("This is not a Ls module, maybe wrong Ls.add?: "+m);a(m)}}};o.onerror=function(q){clearTimeout(n);C.removeChild(o);A(m,"Load Fail")};k.status=Q.FETCHING;C.appendChild(o)}}function E(g){var j=S[g];var h;if(!j){throw new Error(g+"is not a combined js file")}j=B(j);if(!F){Ls.each(j,function(k){if(k.status<Q.FETCHING&&k.uri.indexOf(".js")!==-1){k.status=Q.FETCHING}});if(g.indexOf(".css")===-1){h=K}else{h=I}h(g,function(){Ls.add(g,S[g])})}else{Ls.add(g,S[g])}}function z(j){R.push([-(H-new Date),"fetching",j]);if(S[j]){return E(j)}var h=Ls.Module.fileLoaders;for(var g in h){if(h.hasOwnProperty(g)){if(j.indexOf(g)!==-1){return h[g](j)}}}return h[".js"].call({require:M,defers:b},j)}var T={},N=0;function A(h,g){if(T[h]){M.cache[h].status=Q.FAILED;b[h].fail();Ls.errorStack.push({type:"Ls_MODULE_FAIL",message:g,uri:h});throw new Error(g+": "+D(h))}else{T[h]=true;N=N+1>=Ls.config.servers.length?0:N+1;Ls.config.defaultServer=Ls.config.servers[N];Ls.setCookie("STA_DS",N);z(h)}}function B(h){var g=[];if(h&&typeof h==="string"){h=h.replace(/^ */,"");h=h.split(/[, \r\n\t\f]+/)}Ls.each(h,function(j){Ls.each(M.resolve(j),function(k){if(Ls.inArray(k,g)===-1){g.push(k)}})});g=Ls.map(g,function(j){if(!M.cache[j]){M.cache[j]={id:j,uri:j,dependencies:[],status:0};b[j]=Ls.Deferred()}return M.cache[j]});return g}}()})();Ls.$$=window[Ls.guid]=window[Ls.guid]||{global:{}};Ls.$$._counter=Ls.$$._counter||1;window[Ls.guid]._instances=window[Ls.guid]._instances||{};Ls.textAreaToDb=function(b){var a=new RegExp("\n","g");b=b.replace(a,"<br/>");return b};Ls.dbToTextArea=function(b){var a=new RegExp("<br/>","g");b=b.replace(a,"\n");return b};Ls.object=Ls.object||{};Ls.extend=Ls.object.extend=function(c,a){for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}return c};Ls.echo=function(a){document.write(a)};Ls.goUrl=function(b,a){a=a||false;if(a){if(b.indexOf("?")>-1){b+="&etc="+new Date().getTime()}else{b+="?etc="+new Date().getTime()}}if(!Ls.isNul(b)&&b.toLowerCase().indexOf(".txt")==-1&&b.toLowerCase().indexOf(".json")==-1&&b.toLowerCase().indexOf(".html")==-1&&b.toLowerCase().indexOf(".htm")==-1&&!Ls.string.startWith(b.toLowerCase(),"http://")&&!Ls.string.startWith(b.toLowerCase(),"https://")){b=window.WEBCONTEXT?window.WEBCONTEXT+b:b}location.replace(b)};Ls.regexEnum={intege:"^-?[1-9]\\d*$",intege1:"^[1-9]\\d*$",intege2:"^-[1-9]\\d*$",num:"^([+-]?)\\d*\\.?\\d+$",num1:"^[1-9]\\d*|0$",num2:"^-[1-9]\\d*|0$",decmal:"^([+-]?)\\d*\\.\\d+$",decmal1:"^[1-9]\\d*.\\d*|0.\\d*[1-9]\\d*$",decmal2:"^-([1-9]\\d*.\\d*|0.\\d*[1-9]\\d*)$",decmal3:"^-?([1-9]\\d*.\\d*|0.\\d*[1-9]\\d*|0?.0+|0)$",decmal4:"^[1-9]\\d*.\\d*|0.\\d*[1-9]\\d*|0?.0+|0$",decmal5:"^(-([1-9]\\d*.\\d*|0.\\d*[1-9]\\d*))|0?.0+|0$",email:"^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$",color:"^[a-fA-F0-9]{6}$",url:"^http[s]?:\\/\\/([\\w-]+\\.)+[\\w-]+([\\w-./?%&=]*)?$",chinese:"^[\\u4E00-\\u9FA5\\uF900-\\uFA2D]+$",ascii:"^[\\x00-\\xFF]+$",zipcode:"^\\d{6}$",mobile:"^13[0-9]{9}|15[012356789][0-9]{8}|18[012356789][0-9]{8}|147[0-9]{8}$",ip4:"^(25[0-5]|2[0-4]\\d|[0-1]\\d{2}|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|[0-1]\\d{2}|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|[0-1]\\d{2}|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|[0-1]\\d{2}|[1-9]?\\d)$",notempty:"^\\S+$",picture:"(.*)\\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$",rar:"(.*)\\.(rar|zip|7zip|tgz)$",date:"^\\d{4}(\\-|\\/|.)\\d{1,2}\\1\\d{1,2}$",qq:"^[1-9]*[1-9][0-9]*$",tel:"^(([0\\+]\\d{2,3}-)?(0\\d{2,3})-)?(\\d{7,8})(-(\\d{3,}))?$",username:"^\\w+$",letter:"^[A-Za-z]+$",letter_u:"^[A-Z]+$",letter_l:"^[a-z]+$",idcard:"^[1-9]([0-9]{14}|[0-9]{17})$"};Ls.lang=Ls.lang||{};Ls.lang.guid=function(){return"Ls$"+Ls.$$._counter++};Ls.lang.instance=function(a){return window[Ls.guid]._instances[a]||null};Ls.lang.Class=function(){this.guid=Ls.lang.guid();!this.__decontrolled&&(Ls.$$._instances[this.guid]=this)};Ls.$$._instances=Ls.$$._instances||{};Ls.lang.Class.prototype.dispose=function(){delete Ls.$$._instances[this.guid];for(var a in this){typeof this[a]!="function"&&delete this[a]}this.disposed=true};Ls.lang.Class.prototype.toString=function(){return"[object "+(this.__type||this._className||"Object")+"]"};window.LYInstance=function(a){return Ls.$$._instances[a]};Ls.lang.Class.prototype.un=Ls.lang.Class.prototype.removeEventListener=function(d,c){var b,a=this.__listeners;if(!a){return}if(typeof d=="undefined"){for(b in a){delete a[b]}return}d.indexOf("on")&&(d="on"+d);if(typeof c=="undefined"){delete a[d]}else{if(a[d]){typeof c=="string"&&(c=a[d][c])&&delete a[d][c];for(b=a[d].length-1;b>=0;b--){if(a[d][b]===c){a[d].splice(b,1)}}}}};Ls.lang.Class.prototype.addEventListeners=function(c,d){if(typeof d=="undefined"){for(var b in c){this.addEventListener(b,c[b])}}else{c=c.split(",");var b=0,a=c.length,g;for(;b<a;b++){this.addEventListener(Ls.trim(c[b]),d)}}};Ls.lang.createClass=function(b,m){m=m||{};var j=m.superClass||Ls.lang.Class;var k=function(){var p=this;m.decontrolled&&(p.__decontrolled=true);j.apply(p,arguments);for(n in k.options){p[n]=k.options[n]}b.apply(p,arguments);for(var n=0,o=k["\x06r"];o&&n<o.length;n++){o[n].apply(p,arguments)}};k.options=m.options||{};var a=function(){},h=b.prototype;a.prototype=j.prototype;var d=k.prototype=new a();for(var c in h){d[c]=h[c]}var g=m.className||m.type;typeof g=="string"&&(d.__type=g);d.constructor=h.constructor;k.extend=function(o){for(var n in o){k.prototype[n]=o[n]}return k};return k};Ls.lang.isString=function(a){return"[object String]"==Object.prototype.toString.call(a)};Ls.isString=Ls.lang.isString;Ls.lang.isFunction=function(a){return"[object Function]"==Object.prototype.toString.call(a)};Ls.isFunction=Ls.lang.isFunction;Ls.lang.isNul=function(a){return(Ls.lang.isUndefined(a)||a==""||a==null)?true:false};Ls.isNul=Ls.lang.isNul;Ls.lang.isUndefined=function(a){return typeof a=="undefined"?true:false};Ls.isUndefined=Ls.lang.isUndefined;Ls.lang.isNumber=function(a){return"[object Number]"==Object.prototype.toString.call(a)&&isFinite(a)};Ls.isNumber=Ls.lang.isNumber;Ls.lang.isObject=function(a){return !!(a&&"object"==typeof a)};Ls.isObject=Ls.lang.isObject;Ls.lang.isElement=function(a){return !!(a&&a.nodeName&&a.nodeType==1)};Ls.isElement=Ls.lang.isElement;Ls.lang.isDate=function(a){return{}.toString.call(a)==="[object Date]"&&a.toString()!=="Invalid Date"&&!isNaN(a)};Ls.isDate=Ls.lang.isDate;Ls.lang.isBoolean=function(a){return typeof a==="boolean"};Ls.isBoolean=Ls.lang.isBoolean;Ls.lang.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)};Ls.isArray=Ls.lang.isArray;Ls.lang.string=Ls.lang.string||{};Ls.string=Ls.lang.string;Ls.lang.string.highlight=Ls.lang.string.highlight||{};Ls.lang.string.highlight.snippet=function(h,g,d,k){g=g||"html";var a={clipboard:Ls.path.RES_PATH+"images/ZeroClipboard.swf"};var c=$.extend({},a,d);try{b(h,g,c,k)}catch(j){Ls.page.load("snippet",function(){b(h,g,c,k)})}function b(p,n,m,q){var o=this;$(p).snippet(n,m);if($.isFunction(q)){q.call(o)}}};Ls.string.highlight=Ls.lang.string.highlight;Ls.string.highlight.snippet=Ls.lang.string.highlight.snippet;Ls.string.safeStringFilter=function(d,h){var a=h?h:"[`~\\\\!@#$%^&*+<>?:\"{},./;'[\\]=|]";var g=new RegExp(a,"im");var b="";for(var c=0;c<d.length;c++){b=b+d.substr(c,1).replace(g,"")}return b};Ls.string.trimAll=function(b){var a="";b=""+b;splitstring=b.split(" ");for(i=0;i<splitstring.length;i++){a+=splitstring[i]}return a};Ls.safeStringFitlerObject=function(h,j){if(!Ls.isObject(h)){return}var d=j&&Ls.isString(j)?j.split(","):null;var c=$.extend(true,{},h);for(var g in c){if(Ls.isString(c[g])){if(d!=null){for(var b=0,a=d.length;b<a;b++){if(d[b].toLowerCase()!=g.toLowerCase()){c[g]=Ls.string.safeStringFilter(c[g])}}}else{c[g]=Ls.string.safeStringFilter(c[g])}}}return c};Ls.trimAllObject=function(h,j){if(!Ls.isObject(h)){return}var d=j&&Ls.isString(j)?j.split(","):null;var c=$.extend(true,{},h);for(var g in c){if(Ls.isString(c[g])){if(d!=null){for(var b=0,a=d.length;b<a;b++){if(d[b].toLowerCase()!=g.toLowerCase()){c[g]=Ls.string.trimAll(c[g])}}}else{c[g]=Ls.string.trimAll(c[g])}}}return c};Ls.safeStringFitlerTrimAllObject=function(h,j){if(!Ls.isObject(h)){return}var d=j&&Ls.isString(j)?j.split(","):null;var c=$.extend(true,{},h);for(var g in c){if(Ls.isString(c[g])){if(d!=null){for(var b=0,a=d.length;b<a;b++){if(d[b].toLowerCase()!=g.toLowerCase()){c[g]=Ls.string.trimAll(Ls.string.safeStringFilter(c[g]))}}}else{c[g]=Ls.string.trimAll(Ls.string.safeStringFilter(c[g]))}}}return c};Ls.lang.string.xqkinput=function(d,h,c,k){var a={words:h};var b=$.extend({},a,c);try{g(d,b,k)}catch(j){Ls.page.load("xqkinput",function(){g(d,b,k)})}function g(o,m,p){var n=this;$(o).xqkinput(m);if($.isFunction(p)){p.call(n)}}};Ls.string.xqkinput=Ls.lang.string.xqkinput;Ls.lang.string.autocomplete=function(d,h,c,k){var a={minChars:1,selectFirst:false,width:125,matchCase:false,matchContains:true,autoFill:false};var b=$.extend({},a,c);try{g(d,h,b,k)}catch(j){Ls.page.load("autocomplete",function(){g(d,h,b,k)})}function g(p,q,n,r){var o=this,m=$(p);m.autocomplete(q,n);if($.isFunction(r)){r.call(o,m)}}};Ls.string.autocomplete=Ls.lang.string.autocomplete;(function(){var a=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g");Ls.string.trim=function(b){return String(b).replace(a,"")}})();Ls.trim=Ls.string.trim;Ls.string.encode=function(a){if(a==""){return a}return encodeURIComponent(encodeURIComponent(a))};Ls.string.decode=function(a){if(a==""){return a}return decodeURIComponent(decodeURIComponent(a))};Ls.string.decodeHTML=function(a){var b=String(a).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return b.replace(/&#([\d]+);/g,function(d,c){return String.fromCharCode(parseInt(c,10))})};Ls.decodeHTML=Ls.string.decodeHTML;Ls.string.encodeHTML=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};Ls.encodeHTML=Ls.string.encodeHTML;Ls.lang.string.endWith=function(b,a){return a.length>0&&b.substring(b.length-a.length,b.length)===a};Ls.string.endWith=Ls.lang.string.endWith;Ls.lang.string.startWith=function(b,a){return a.length>0&&b.substring(0,a.length)===a};Ls.string.startWith=Ls.lang.string.startWith;Ls.string.textSearch=function(h,g,b,n){var k={_js:Ls.path.RES_PATH+"utils/jquery.textSearch.min.js",nullReport:false};var m=$.extend({},k,b);Ls.page.modules.textSearch={js:m._js};try{a(h,g,m,n)}catch(j){Ls.page.load("textSearch",function(){a(h,g,m,n)})}function a(p,d,c,q){var o=this;$(p).textSearch(d,c);if($.isFunction(q)){q.call(o)}}};Ls.convert=Ls.convert||{};Ls.convert.objToInt=function(a){return isNaN(parseInt(a))?0:parseInt(a)};Ls.log=Ls.log||{};Ls.log.add=function(c,a,g){a=a||"info";function d(n,j,o){if(window.LYLogObj){var h=window.LYLogObj}else{window.LYLogObj=log4javascript.getLogger("LYLogPop");var h=window.LYLogObj;var m=this;var k=new log4javascript.PopUpAppender();k.setFocusPopUp(true);k.setNewestMessageAtTop(false);k.setReopenWhenClosed(true);h.addAppender(k)}switch(j){case"info":h.info(n);break;case"debug":h.debug(n);break;case"trace":h.trace(n);break;case"warn":h.warn(n);break;case"error":h.error(n);break;case"fatal":h.fatal(n);break;case"dir":h.dir(n);break}if($.isFunction(o)){o.call(m,k)}}try{if(Ls.debug){if(!Ls.logInConsole||Ls.browser.ie<=7){try{d(c,a,g)}catch(b){}}else{switch(a){case"log":console.log(c);break;case"info":console.info(c);break;case"debug":console.debug(c);break;case"trace":console.trace(c);break;case"warn":console.warn(c);break;case"error":console.error(c);break;case"fatal":console.log(c);break;case"dir":console.dir(c);break;case"assert":console.assert(c);break}}}}catch(b){}};Ls.log.info=function(a,b){Ls.log.add(a,"info",b)};Ls.log.debug=function(a,b){Ls.log.add(a,"debug",b)};Ls.log.trace=function(a,b){Ls.log.add(a,"trace",b)};Ls.log.warn=function(a,b){Ls.log.add(a,"warn",b)};Ls.log.error=function(a,b){Ls.log.add(a,"error",b)};Ls.log.fatal=function(a,b){Ls.log.add(a,"fatal",b)};Ls.log.dir=function(a,b){Ls.log.add(a,"dir",b)};Ls.fn=Ls.fn||{};Ls.fn.blank=function(){};Ls.fn.run=function(b,n){var g=this;try{if($.isFunction(n)){n.call(g)}}catch(j){if(Ls.isString(b)){Ls.page.load(b,function(){if($.isFunction(n)){n.call(g)}})}else{if(Ls.isArray(b)){var a=Ls.page.modules[b[0]];if(a){var k=a.dependencies;if(k){for(var c=1;c<b.length;c++){a.dependencies.push(b[c])}}else{var h={dependencies:[]};a=$.extend({},a,h);for(var c=1;c<b.length;c++){a.dependencies.push(b[c])}}}Ls.page.modules=$.extend({},{tempModule:a},Ls.page.modules);Ls.page.load("tempModule",function(){if($.isFunction(n)){n.call(g)}})}}}};Ls.fn.setTimeout=function(a,b){b=b||10;setTimeout(function(){var c=this;if($.isFunction(a)){a.call(c)}},b)};Ls.event=Ls.event||{};Ls.event.stopPropagation=function(a){if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}};Ls.page=Ls.page||{};Ls.page.reload=function(a){a=a||location.href;a=a.setUrl("etc",new Date().getTime());location.replace(a)};Ls.number=Ls.number||{};Ls.number.comma=function(b,a){if(!a||a<1){a=3}b=String(b).split(".");b[0]=b[0].replace(new RegExp("(\\d)(?=(\\d{"+a+"})+$)","ig"),"$1,");return b.join(".")};Ls.number.randomInt=function(b,a){return Math.floor(Math.random()*(a-b+1)+b)};Ls.echobr=function(a){document.writeln(a)};Ls.ui=Ls.ui||{};Ls.ui.tip=Ls.ui.tip||{};Ls.tip=Ls.tip||{};Ls.tip.tipped=Ls.tip.tipped||{};Ls.ui.tipped=Ls.ui.tipped||{};Ls.ui.tippedVer="2.5.6";Ls.ui.tipped.create=function(b,h,q,o){var j={skin:"yellow",_ver:"2.5.6",_path:"tip/tipped/",_js:"tipped.min.js",_css:"tipped.css",_excanvas:"excanvas.js",show:false};var k=$.extend({},j,q);var g={},a=Ls.path.RES_PATH+k._path+k._ver+"/";g.js=a+k._js;g.css=a+k._css;Ls.page.modules.tipped=g;Ls.page.modules.excanvas={js:a+k._excanvas};if($.browser.msie&&$.browser.version<9){Ls.page.modules.tipped.dependencies=["excanvas"]}if(window.Tipped){n(b,h,k,o)}else{Ls.page.load("tipped",function(){n(b,h,k,o)})}function n(p,m,c,r){var d=this;Tipped.create(p,m,c);if(c.show){Tipped.show(p)}if($.isFunction(r)){r.call(d,Tipped)}}};Ls.tip.tipped.create=Ls.ui.tipped.create;Ls.ui.tipped.remove=function(a){try{Tipped.remove(a)}catch(b){}};Ls.tip.tipped.remove=Ls.ui.tipped.remove;Ls.ui.tipped.show=function(a){try{Tipped.show(a)}catch(b){}};Ls.tip.tipped.show=Ls.ui.tipped.show;Ls.ui.tip.powerFloat=function(h,g,o){var k={_ver:"1.6.1",_path:"tip/jq-powerfloat/",_js:"jquery-powerFloat-min.js",_css:"powerFloat.css",position:"1-4"};var n=$.extend({},k,g);var a={},j=Ls.path.RES_PATH+n._path+n._ver+"/";a.css=j+n._css;a.js=j+n._js;Ls.page.modules.powerFloat=a;if($.powerFloat){b(h,n,o)}else{Ls.page.load("powerFloat",function(){b(h,n,o)})}function b(m,c,q){var d=this;var p=$(m).powerFloat(c);if($.isFunction(q)){q.call(d,p)}}};Ls.tip.powerFloat=Ls.ui.tip.powerFloat;Ls.ui.tip.powerFloat.hide=function(b){if($.powerFloat){a(b)}else{Ls.page.load("powerFloat",function(){a(b)})}function a(d){var c=this;$(d).powerFloat().hide()}};Ls.tip.powerFloat.hide=Ls.ui.tip.powerFloat.hide;Ls.ui.tip.show=function(options,callback){var me=this,timeout;var setting={msg:"",style:"info",times:3,animate:"",closeStyle:"",autoClose:true,callback:null};var opts=$.extend({},setting,options);var strVar='<div id="q_Msgbox" class="msgbox_layer_wrap" style="display:none">';strVar+='<div id="mode_tips_v2" class="msgbox_layer" style="z-index:10000;">';strVar+='<span class="gtl_ico_fail"></span>';strVar+="\u7531\u4e8e\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01";strVar+='<span class="gtl_end"></span>';strVar+=" </div>";strVar+="</div>";var infotip=$("#q_Msgbox");if(infotip.length<=0){$("body").append(strVar)}var mode_tips_v2=$("#mode_tips_v2")[0];var str="",style="gtl_ico_hits",animate_code="";switch(opts.style){case"info":style="gtl_ico_hits";break;case"success":style="gtl_ico_succ";break;case"error":style="gtl_ico_fail";break;default:style="gtl_ico_clear";break}str='<span  class="'+style+'"></span>';str+=opts.msg;str+='<span class="gtl_end"></span>';if(mode_tips_v2){mode_tips_v2.onclick=function(){eval(opts.jsfn)};mode_tips_v2.innerHTML=str}Ls.center("#q_Msgbox").show();window.clearTimeout(timeout);timeout=setTimeout(function(){Ls.ui.tip.hide(timeout);if(opts.callback&&"[object Function]"==Object.prototype.toString.call(opts.callback)){opts.callback.call(me)}if(callback&&"[object Function]"==Object.prototype.toString.call(callback)){callback.call(me)}window.clearTimeout(timeout)},opts.times*1000)};Ls.tip.show=function(c,a,b,d){c=c||"\u6d88\u606f\u63d0\u793a";a=a||"info";b=b||1;d=d||Ls.fn.blank();Ls.ui.tip.show({msg:c,style:a,times:b,callback:d})};Ls.tip.info=function(b,a,c){b=b||"\u64cd\u4f5c\u6210\u529f";Ls.tip.show(b,"info",a,c)};Ls.tip.success=function(b,a,c){b=b||"\u64cd\u4f5c\u6210\u529f";Ls.tip.show(b,"success",a,c)};Ls.tip.error=function(b,a,c){$("#pageLoading").hide();b=b||"\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5";Ls.tip.show(b,"error",a,c)};Ls.tip.loading=function(b,d){var a=this;var c='<img src="'+Ls.path.RES_PATH+'images/loading.gif"> ';b=b||"\u6b63\u5728\u5904\u7406\uff0c\u8bf7\u7a0d\u5019...";b=c+b;Ls.tip.show(b,"clear",666666,d);if($.isFunction(d)){d.call(a)}};Ls.ui.tip.hide=function(b){try{window.clearTimeout(b);var a=document.getElementById("q_Msgbox");a.style.display="none"}catch(c){}};Ls.tip.hide=Ls.ui.tip.hide;Ls.tip.tipped=Ls.ui.tipped;Ls.tip.tipped.create=Ls.ui.tipped.create;Ls.tip.tipped.remove=Ls.ui.tipped.remove;Ls.ui.createUI=function(c,m){m=m||{};var j=m.superClass||Ls.lang.Class,h=j==Ls.lang.Class?1:0,d,b,k=function(o,n){var p=this;o=o||{};j.call(p,!h?o:(o.guid||""),true);Ls.object.extend(p,k.options);Ls.object.extend(p,o);p.classPrefix=p.classPrefix||"Ls-"+p.uiType.toLowerCase();for(d in Ls.ui.behavior){if(typeof p[d]!="undefined"&&p[d]){Ls.object.extend(p,Ls.ui.behavior[d]);if(Ls.lang.isFunction(p[d])){p.addEventListener("onload",function(){Ls.ui.behavior[d].call(p[d].apply(p))})}else{Ls.ui.behavior[d].call(p)}}}c.apply(p,arguments);for(d=0,b=k._addons.length;d<b;d++){k._addons[d](p)}if(o.parent&&p.setParent){p.setParent(o.parent)}if(!n&&o.autoRender){p.render(o.element)}},a=function(){};a.prototype=j.prototype;var g=k.prototype=new a();for(d in Ls.ui.Base){g[d]=Ls.ui.Base[d]}k.extend=function(n){for(d in n){k.prototype[d]=n[d]}return k};k._addons=[];k.register=function(n){if(typeof n=="function"){k._addons.push(n)}};k.options={};return k};Ls.ui.behavior=Ls.ui.behavior||{};(function(){var a=Ls.ui.behavior.resizable=function(){};a.resizeableHandle=null;a.resizeCreate=function(b){var c=this,d;b=b||{};if(!c.resizable){return}Ls.object.extend(c,b);c._resizeOption={onresizestart:function(){c.dispatchEvent("onresizestart")},onresize:function(g){c.dispatchEvent("onresize",g)},onresizeend:function(){c.dispatchEvent("onresizeend")}};Ls.each(["minWidth","minHeight","maxWidth","maxHeight"],function(h,g){c[h]&&(c._resizeOption[h]=c[h])});c._resizeOption.classPrefix=b.classPrefix||c.classPrefix;d=b.target||c.getBody();c.direction&&(c._resizeOption.direction=c.direction);c.resizeableHandle=Ls.dom.resizable(d,c._resizeOption)};a.resizeUpdate=function(b){this.resizeableHandle.update(b)};a.resizeCancel=function(){this.resizeableHandle.cancel()};a.resizeEnable=function(){this.resizeableHandle.enable()}})();Ls.page.close=function(){if($.browser.msie){window.opener=null;window.open("","_self");window.close()}else{window.open("","_parent","");window.close()}};Ls.center=function(g,a,h){var c=$.extend({position:"absolute",top:"50%",left:"50%",zIndex:2009,relative:true},a||{});var d=this,b=$.each($(g),function(){var o=$(this);if(c.top=="50%"){c.marginTop=-o.outerHeight()/2}if(c.left=="50%"){c.marginLeft=-((o.outerWidth()/2))}var k=$("body").outerHeight(),j=o.outerHeight(),n=(/webkit/i.test(navigator.userAgent)?document.body:document.documentElement).scrollTop;clientHeight=document.documentElement.clientHeight;var m=((clientHeight-j)/2)+n;c.top=m+"px";c.marginTop=0;if(c.relative&&!o.parent().is("body")&&o.parent().css("position")=="static"){o.parent().css("position","relative")}delete c.relative;if(c.position=="fixed"&&$.browser.version=="6.0"){c.marginTop+=$(window).scrollTop();c.position="absolute";$(window).scroll(function(){o.stop().animate({marginTop:$(window).scrollTop()-o.outerHeight()/2})})}o.css(c)});if($.isFunction(h)){h.call(d,b)}return b};Ls.jsonEncode=function(s,g){var a=$.isFunction,h=Ls.isObject,j=Ls.isArray,t=Object.prototype.toString,A="undefined",k="object",z="null",p="string",r="number",n="boolean",b="date",c={"undefined":A,string:p,"[object String]":p,number:r,"[object Number]":r,"boolean":n,"[object Boolean]":n,"[object Date]":b,"[object RegExp]":k},v=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u=function(B){function o(C){return C<10?"0"+C:C}return B.getUTCFullYear()+"-"+o(B.getUTCMonth()+1)+"-"+o(B.getUTCDate())+"T"+o(B.getUTCHours())+":"+o(B.getUTCMinutes())+":"+o(B.getUTCSeconds())+"Z"};function x(C){var B=typeof C;return c[B]||c[t.call(C)]||(B===k?(C?k:z):A)}function m(o){if(!w[o]){w[o]="\\u"+("0000"+(+(o.charCodeAt(0))).toString(16)).slice(-4)}return w[o]}function d(o){return'"'+o.replace(v,m)+'"'}function y(o,B){return o.replace(/^/gm,B)}function q(G,E){if(G===undefined){return undefined}var C=null;var F=t.call(E).match(/String|Number/)||[],B=[];E=F[0]==="Number"?new Array(Math.min(Math.max(0,E),10)+1).join(" "):(E||"").slice(0,10);function D(I,O){var M=I[O],Q=x(M),L=[],K=E?": ":":",J,H,P,o,N;if(h(M)&&a(M.toJSON)){M=M.toJSON(O)}else{if(Q===b){M=u(M)}}if(M!==I[O]){Q=x(M)}switch(Q){case b:case k:break;case p:return d(M);case r:return isFinite(M)?M+"":z;case n:return M+"";case z:return z;default:return undefined}for(H=B.length-1;H>=0;--H){if(B[H]===M){throw new Error("JSON.stringify. Cyclical reference")}}J=j(M);B.push(M);if(J){for(H=M.length-1;H>=0;--H){L[H]=D(M,H)||z}}else{P=C||M;H=0;for(o in P){if(P.hasOwnProperty(o)){N=D(M,o);if(N){L[H++]=d(o)+K+N}}}}B.pop();if(E&&L.length){return J?"[\n"+y(L.join(",\n"),E)+"\n]":"{\n"+y(L.join(",\n"),E)+"\n}"}else{return J?"["+L.join(",")+"]":"{"+L.join(",")+"}"}}return D({"":G},"")}return q(s,g)};Ls.jsonDecode=function(s){var _UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_UNSAFE=/[^\],:{}\s]/,_escapeException=function(c){return"\\u"+("0000"+(+(c.charCodeAt(0))).toString(16)).slice(-4)},_parse=function(s,reviver){s=s.replace(_UNICODE_EXCEPTIONS,_escapeException);if(!_UNSAFE.test(s.replace(_ESCAPES,"@").replace(_VALUES,"]").replace(_BRACKETS,""))){return eval("("+s+")")}throw new SyntaxError("JSON.parse")};if(!Ls.isString(s)){s+=""}return _parse(s)};Ls.store=(function(){var d={},j=window,h=j.document,c="localStorage",b="globalStorage",k;d.set=function(m,n){};d.setJson=function(m,n){};d.get=function(m){};d.getJson=function(m){};d.remove=function(m){};d.clear=function(){};try{if(c in j&&j[c]){k=j[c];d.set=function(m,n){k.setItem(m,n)};d.setJson=function(m,n){k.setItem(m,Ls.jsonEncode(n))};d.get=function(m){return k.getItem(m)};d.getJson=function(n){var m=null;var o=k.getItem(n);if(o){m=$.parseJSON(o)}return m};d.remove=function(m){k.removeItem(m)};d.clear=function(){k.clear()}}else{if(b in j&&j[b]){k=j[b][j.location.hostname];d.set=function(m,n){k[m]=n};d.setJson=function(m,n){k[m]=Ls.jsonEncode(n)};d.get=function(m){return k[m]&&k[m].value};d.getJson=function(n){var m=null;var o=k[n]&&k[n].value;if(o){m=Ls.jsonDecode(o)}return m};d.remove=function(m){delete k[m]};d.clear=function(){for(var m in k){delete k[m]}}}else{if(h.documentElement.addBehavior){function a(){if(k){return k}k=h.body.appendChild(h.createElement("div"));k.style.display="none";k.addBehavior("#default#userData");k.load(c);return k}d.set=function(m,n){var o=a();o.setAttribute(m,n);o.save(c)};d.setJson=function(m,n){var o=a();o.setAttribute(m,Ls.jsonEncode(n));o.save(c)};d.get=function(m){var n=a();return n.getAttribute(m)};d.getJson=function(n){var m=null,p=a();var o=p.getAttribute(n);if(o){m=$.parseJSON(o)}return m};d.remove=function(m){var n=a();n.removeAttribute(m);n.save(c)};d.clear=function(){var p=a();var n=p.XMLDocument.documentElement.attributes;p.load(c);for(var o=0,m;m=n[o];o++){p.removeAttribute(m.name)}p.save(c)}}}}}catch(g){}return d})();Ls.localStorage=Ls.data={get:Ls.store.get,set:Ls.store.set,getJson:Ls.store.getJson,setJson:Ls.store.setJson,remove:Ls.store.remove,clear:Ls.store.clear};Ls.timer=(function(){var a={};return{time:function(b){a[b]=new Date().getTime()},timeEnd:function(b,d){if(!(b in a)){return}var c=new Date().getTime()-a[b];(d||function(g){var j=document.title,h=b+": "+g+"ms";document.title=(/\d+ms/.test(j)?j+"|":"")+h}).call(this,c);delete a[b]}}})();(function(){var c={};var h=c.separator||"&";var b=c.spaces===false?false:true;var m=c.suffix===false?"":"[]";var a=c.prefix===false?false:true;var d=a?c.hash===true?"#":"?":"";var j=c.numbers===false?false:true;var n=c.url||"";var k=function(q,p){return q!=undefined&&q!==null&&(!!p?q.constructor==p:true)};var g=function(u){var p,t=/\[([^[]*)\]/g,q=/^(\S+?)(\[\S*\])?$/.exec(u),r=q[1],s=[];while(p=t.exec(q[2])){s.push(p[1])}return[r,s]};var o=function(v,u,t){var w,s=u.shift();if(typeof v!="object"){v=null}if(s===""){if(!v){v=[]}if(k(v,Array)){v.push(u.length==0?t:o(null,u.slice(0),t))}else{if(k(v,Object)){var r=0;while(v[r++]!=null){}v[--r]=u.length==0?t:o(v[r],u.slice(0),t)}else{v=[];v.push(u.length==0?t:o(null,u.slice(0),t))}}}else{if(s&&s.match(/^\s*[0-9]+\s*$/)){var q=parseInt(s,10);if(!v){v=[]}v[q]=u.length==0?t:o(v[q],u.slice(0),t)}else{if(s){var q=s.replace(/^\s*|\s*$/g,"");if(!v){v={}}if(k(v,Array)){var p={};for(var r=0;r<v.length;++r){p[r]=v[r]}v=p}v[q]=u.length==0?t:o(v[q],u.slice(0),t)}else{return t}}}return v};Ls.queryObject=function(p){var q=this;q.keys={};if(p.isQueryObject){jQuery.each(p.get(),function(r,s){q.SET(r,s)})}else{jQuery.each(arguments,function(){var r=""+this;r=r.replace(/^[?#]/,"");r=r.replace(/[;&]$/,"");if(b){r=r.replace(/[+]/g," ")}jQuery.each(r.split(/[&;]/),function(){var s=this.split("=")[0];var u=this.split("=")[1];if(!s){return}if(j){if(/^[+-]?[0-9]+\.[0-9]*$/.test(u)){u=parseFloat(u)}else{if(/^[+-]?[0-9]+$/.test(u)){if(u.length<17){u=parseInt(u,10)}}}}u=(!u&&u!==0)?"":u;if(u!==false&&u!==true&&typeof u!="number"){try{u=decodeURIComponent(u)}catch(t){u=unescape(u)}}q.SET(s,u)})})}return q};Ls.queryObject.prototype={isQueryObject:true,has:function(p,q){var r=this.get(p);return k(r,q)},GET:function(q){if(!k(q)){return this.keys}var p=g(q),r=p[0],t=p[1];var s=this.keys[r];while(s!=null&&t.length!=0){s=s[t.shift()]}return typeof s=="number"?s:s||""},get:function(p){var q=this.GET(p);if(k(q,Object)){return jQuery.extend(true,{},q)}else{if(k(q,Array)){return q.slice(0)}}return q},SET:function(q,v){var s=!k(v)?null:v;var p=g(q),r=p[0],u=p[1];var t=this.keys[r];this.keys[r]=o(t,u.slice(0),s);return this},set:function(p,q){return this.copy().SET(p,q)},REMOVE:function(p){return this.SET(p,null).COMPACT()},remove:function(p){return this.copy().REMOVE(p)},EMPTY:function(){var p=this;jQuery.each(p.keys,function(q,r){delete p.keys[q]});return p},load:function(p){var r=p.replace(/^.*?[#](.+?)(?:\?.+)?$/,"$1");var q=p.replace(/^.*?[?](.+?)(?:#.+)?$/,"$1");return new Ls.queryObject(p.length==q.length?"":q,p.length==r.length?"":r)},empty:function(){return this.copy().EMPTY()},copy:function(){return new Ls.queryObject(this)},COMPACT:function(){function p(s){var r=typeof s=="object"?k(s,Array)?[]:{}:s;if(typeof s=="object"){function q(v,t,u){if(k(v,Array)){v.push(u)}else{v[t]=u}}jQuery.each(s,function(t,u){if(!k(u)){return true}q(r,t,p(u))})}return r}this.keys=p(this.keys);return this},compact:function(){return this.copy().COMPACT()},toString:function(){var r=0,u=[],t=[],q=this;var p=function(v,w,x){if(!k(x)||x===false){return}var y=[w];if(x!==true){y.push("=");y.push(encodeURIComponent(x))}v.push(y.join(""))};var s=function(w,v){var x=function(y){return !v||v==""?[y].join(""):[v,"[",y,"]"].join("")};jQuery.each(w,function(y,z){if(typeof z=="object"){s(z,x(y))}else{p(t,x(y),z)}})};s(this.keys);if(t.length>0){u.push(d)}u.push(t.join(h));return u.join("")}};Ls.url=function(q){if(!Ls.isNul(q)){var p="";if(q.indexOf("?")>-1){var r=q.split("?");p=r[1]}return new Ls.queryObject(p)}else{return new Ls.queryObject(location.search,location.hash)}};Ls.url.get=function(q,p){return Ls.url(p).get(q)};Ls.url.set=function(q,r,p){return new Ls.url(p).set(q,r)};Ls.url.getUrl=function(){var p=window.location.protocol+"//"+window.location.host+window.location.pathname;return p};Ls.url.getUrlPrefix=function(p){if(p){if(p.indexOf("?")>0){p=p.split("?")[0]}}else{p=window.location.protocol+"//"+window.location.host+window.location.pathname}return p};Ls.url.toString=function(p){if(p){var q=new Ls.queryObject(location.search,location.hash);var r=window.location.protocol+"//"+window.location.host+window.location.pathname+p;return r}else{return location.href}};Ls.url.remove=function(q,p){return Ls.url(p).remove(q)};Ls.url.splitFn=function(p){if(!p||p==""){p=location.href}var t="",r="",s="",w="";var q=p;var x=/http[s]?:\/\/([^\/]+)\//i;var v=p.match(x);if(v!=null){t=v[0];if(Ls.string.endWith(t,"/")){t=t.substring(0,t.length-1)}q=p.replace(t,"")}r=q.substring(0,q.lastIndexOf("/")+1);s=q.substring(q.lastIndexOf("/")+1,q.length);w=u(s);return{domain:t,fullFileName:q,filePath:r,fileName:s,fileExt:w};function u(y){if(y!=""){var z="."+y.replace(/.+\./,"");return z}}}})();Ls.url.query=function(d,a){var c=a||window.location.search;var b=new RegExp(""+d+"=([^&?]*)","ig");return((c.match(b))?(c.match(b)[0].substr(d.length+1)):null)};Ls.date=Ls.date||{};Ls.date.parse=function(c){var a=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+\x24");if("string"==typeof c){if(a.test(c)||isNaN(Date.parse(c))){var h=c.split(/ |T/),b=h.length>1?h[1].split(/[^\d]/):[0,0,0],g=h[0].split(/[^\d]/);return new Date(g[0]-0,g[1]-1,g[2]-0,b[0]-0,b[1]-0,b[2]-0)}else{return new Date(c)}}return new Date()};Ls.hotkeys=function(j,n,q){var o=$.Deferred();var g={_ver:"0.7.9",_path:"utils/hotkeys/",_js:"jquery.hotkeys.min.js"};var h=$.extend({},g,q);var b={},a=Ls.path.RES_PATH+h._path+h._ver+"/";b.js=a+h._js;Ls.page.modules.hotkeys=b;if(window.hotkeys){k(j,n,o)}else{Ls.page.load("hotkeys",function(){k(j,n,o)})}function k(d,p,c){var m=this;$(document).bind("keydown",d,function(){c.resolve(hotkeys);if($.isFunction(p)){p.call(m,hotkeys)}})}return o.promise()};Ls.holder=function(){var b=$.Deferred();var h={_path:"utils/holder/",_js:"holder.min.js"};var j=$.extend({},h,options),g=Ls.path.RES_PATH+j._path+"/";Ls.page.modules.Holder={js:g+j._js};if(window.Holder){a(callback,b)}else{Ls.page.load("Holder",function(){a(callback,b)})}function a(k,c){var d=this;c.resolve(Holder);if($.isFunction(k)){k.call(d,Holder)}}return b.promise()};Ls.cssFx=function(){var b=$.Deferred();var h={_path:"utils/cssFx/",_js:"cssfx.min.js"};var j=$.extend({},h,options),g=Ls.path.RES_PATH+j._path+"/";Ls.page.modules.cssFx={js:g+j._js};if(window.cssFx){a(callback,b)}else{Ls.page.load("cssFx",function(){a(callback,b)})}function a(k,c){var d=this;c.resolve(cssFx);if($.isFunction(k)){k.call(d,cssFx)}}return b.promise()};Ls.domFixed=function(h,g,n){var b=$.Deferred();var k={_path:"utils/",_js:"jquery.pos-fixed.js"};var m=$.extend({},k,g),j=Ls.path.RES_PATH+m._path+"/";Ls.page.modules.domFixed={js:j+m._js};if($.fn.domFixed){a(h,m,n,b)}else{Ls.page.load("domFixed",function(){a(h,m,n,b)})}function a(p,d,q,c){var o=this;$(p).domFixed(d);c.resolve();if($.isFunction(q)){q.call(o)}}return b.promise()};Ls.getDomain4Str=function(b){if(b==""){return}var a=/http[s]?:\/\/([^\/]+)\//i;domain=b.match(a);return domain};Ls.isCrossDomainUrl=function(c){var b=document.createElement("a");b.href=c;if(Ls.browser.IS_IE){b.href=b.href}return !(b.protocol==location.protocol&&b.hostname==location.hostname&&(b.port==location.port||(b.port=="80"&&location.port=="")||(b.port==""&&location.port=="80")))};jQuery.extend({evalJSON:function(strJson){return eval("("+strJson+")")}});jQuery.extend({toJSON:function(a){var d=typeof a;if("object"==d){if(Array==a.constructor){d="array"}else{if(RegExp==a.constructor){d="regexp"}else{d="object"}}}switch(d){case"undefined":case"unknown":return;break;case"function":case"boolean":case"regexp":return a.toString();break;case"number":return isFinite(a)?a.toString():"null";break;case"string":return'"'+a.replace(/(\\|\")/g,"\\$1").replace(/\n|\r|\t/g,function(){var j=arguments[0];return(j=="\n")?"\\n":(j=="\r")?"\\r":(j=="\t")?"\\t":""})+'"';break;case"object":if(a===null){return"null"}var c=[];for(var h in a){var g=jQuery.toJSON(a[h]);if(g!==undefined){c.push(jQuery.toJSON(h)+":"+g)}}return"{"+c.join(",")+"}";break;case"array":var c=[];for(var b=0;b<a.length;b++){var g=jQuery.toJSON(a[b]);if(g!==undefined){c.push(g)}}return"["+c.join(",")+"]";break}}});String.prototype.trim=function(){return this.replace(/^\s+/g,"").replace(/\s+$/g,"")};String.prototype.setUrl=function(b,d){var a=this;if(Ls.isNul(d)&&!Ls.isNumber(d)){d=""}var g=Ls.url.set(b,d,a);var c=Ls.url.getUrlPrefix(a)+g;return c};String.prototype.setUrlParam=String.prototype.setUrl;String.prototype.getLen=function(){var d=this;var g=0,a=d.length,b=-1;for(var c=0;c<a;c++){b=d.charCodeAt(c);if(b>=0&&b<=128){g+=1}else{g+=2}}return g};String.prototype.toDate=function(s){pattern=s.replace(/(yyyy)/g,"([0-9]{4})").replace(/(yy)|(MM)|(dd)|(hh)|(mm)|(ss)/g,"([0-9]{2})").replace(/[Mdhms]/g,"([0-9]{1,2})");getIndex=function(w,v){var m=s.indexOf(w);if(m==-1){m=s.indexOf(v)}return m};var p=new Date();var a;if(new RegExp(pattern).test(this)){var b=getIndex("yyyy","yy");var d=getIndex("MM","M");var o=getIndex("dd","d");var k=getIndex("hh","h");var t=getIndex("mm","m");var r=getIndex("ss","s");var h={y:0,m:0,d:0,h:0,mi:0,s:0};var q=new Array(b+",y",d+",m",o+",d",k+",h",t+",mi",r+",s").sort(function(v,m){v=parseInt(v.split(",")[0]);m=parseInt(m.split(",")[0]);return v>m});var u=0;var n=new Array();for(var g=0;g<q.length;g++){if(parseInt(q[g].split(",")[0])!=-1){n[u]=q[g];u++}}var c=this.match(pattern);for(var g=1;g<c.length;g++){if(g==0){return}var j=n[g-1].split(",")[1];h[j]=c[g]}h.y=h.y||p.getFullYear();h.d=h.d||p.getDate();if(h.y.toString().length==2){h.y=parseInt("20"+h.y)}h.m-=1;a=new Date(h.y,h.m,h.d,h.h,h.mi,h.s)}a=a||p;return a};Date.prototype.DateDiff=function(a,b){var c=this;if(typeof b=="string"){b=Ls.date.parse(b)}switch(a){case"s":return parseInt((b-c)/1000);case"n":return parseInt((b-c)/60000);case"h":return parseInt((b-c)/3600000);case"d":return parseInt((b-c)/86400000);case"w":return parseInt((b-c)/(86400000*7));case"m":return(b.getMonth()+1)+((b.getFullYear()-c.getFullYear())*12)-(c.getMonth()+1);case"y":return b.getFullYear()-c.getFullYear()}};Date.prototype.DateAdd=function(b,a){var c=this;switch(b){case"s":return new Date(Date.parse(c)+(1000*a));case"n":return new Date(Date.parse(c)+(60000*a));case"h":return new Date(Date.parse(c)+(3600000*a));case"d":return new Date(Date.parse(c)+(86400000*a));case"w":return new Date(Date.parse(c)+((86400000*7)*a));case"q":return new Date(c.getFullYear(),(c.getMonth())+a*3,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds());case"m":return new Date(c.getFullYear(),(c.getMonth())+a,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds());case"y":return new Date((c.getFullYear()+a),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds())}};Date.prototype.DatePart=function(c){var d=this;var b="";var a=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"];switch(c){case"y":b=d.getFullYear();break;case"m":b=d.getMonth()+1;break;case"d":b=d.getDate();break;case"w":b=a[d.getDay()];break;case"ww":b=d.WeekNumOfYear();break;case"h":b=d.getHours();break;case"n":b=d.getMinutes();break;case"s":b=d.getSeconds();break}return b};Date.prototype.MaxDayOfDate=function(){var b=this;var c=b.toArray();var g=(new Date(c[0],c[1]+1,1));var d=g.dateAdd(1,"m",1);var a=DateDiff(g.Format("yyyy-MM-dd"),d.Format("yyyy-MM-dd"));return a};Date.prototype.Format=function(c){var d=c;var b=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"];var a=this.getMonth()+1;d=d.replace(/yyyy|YYYY/,this.getFullYear());d=d.replace(/yy|YY/,(this.getYear()%100)>9?(this.getYear()%100).toString():"0"+(this.getYear()%100));d=d.replace(/MM/,a>9?a.toString():"0"+a);d=d.replace(/M/g,a);d=d.replace(/w|W/g,b[this.getDay()]);d=d.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate());d=d.replace(/d|D/g,this.getDate());d=d.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():"0"+this.getHours());d=d.replace(/h|H/g,this.getHours());d=d.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes());d=d.replace(/m/g,this.getMinutes());d=d.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds());d=d.replace(/s|S/g,this.getSeconds());return d};Date.prototype.format=Date.prototype.Format;function lambda(c){var d=c.match(/\((.*)\)\s*=>\s*(.*)/);var h=[];var a="";if(d.length>0){d.shift()}if(d.length>0){a=d.pop()}if(d.length>0){h=d.pop().replace(/^\s*|\s(?=\s)|\s*$|,/g,"").split(" ")}d=((!/\s*return\s+/.test(a))?"return ":"")+a;h.push(d);try{return Function.apply({},h)}catch(g){return null}}Ls.arrayWhere=function(a,h){var g=h;if(typeof h=="string"){if((g=lambda(g))==null){throw"Syntax error in lambda string: "+h}}var d=[];var b=a.length;var j=[0,0,d];for(var c=2;c<arguments.length;c++){j.push(arguments[c])}for(var c=0;c<b;c++){if(typeof a[c]=="undefined"){continue}j[0]=a[c];j[1]=c;if(!!g.apply(a,j)){d.push(a[c])}}return d};(function(){Ls.errorStack=[];var a=!Ls.config.debug&&parseInt(Math.random()*51)===1;var b=0;Ls.errorManager={send:function(j,c,d){Ls.errorStack.push({type:d,message:j,loc:c});clearTimeout(f);f=setTimeout(g,3000)}};function g(){if(!a){return}if(b===Ls.errorStack.length){return}b=Ls.errorStack.length;Ls.ajax.post(Ls.errorActionUrl,{data:Ls.jsonEncode({stack:Ls.errorStack,url:window.location.href,referrer:document.referrer})},{error:function(){Ls.LogTracker.trackEvent("javascript@atype=view@LOC="+encodeURIComponent(window.location.href)+"@ERR="+encodeURIComponent("jslogs interface is not reachable!")+"@TYPE="+encodeURIComponent("JSLOG_NOT_REACHABLE"))}})}})();Ls.check=Ls.check||function(){};Ls.array=Ls.array||{};Ls.array.remove=function(a,b){var c=a.length;while(c--){if(a[c]===b){a.splice(c,1)}}return a};Ls.array.removeAt=function(a,b){return a.splice(b,1)[0]};if(location.search.indexOf("debug")>-1){Ls.debug=true}Ls.fixedPlaceholder=function(){var b=window.document,a=b.createElement("input");if(typeof a.placeholder=="undefined"){$("input,textarea").each(function(g){var d=$(this),c=d.attr("class");var h=d.attr("placeholder");if(Ls.browser.IS_IE6||Ls.browser.IS_IE7){if(h&&Ls.isNul(d.val())){d.val(h).css("color","#aaa").css("line-height",d.css("height"))}d.on("focus",function(){if(d.val()===h){d.val(null).css("color","")}}).on("blur",function(){if(Ls.isNul(d.val())){d.val(h).css("color","#aaa").css("line-height",d.css("height"))}})}else{if(c&&c.indexOf("mini-")>-1){}else{if(h&&Ls.isNul(d.val())){d.val(h).css("color","#aaa").css("line-height",d.css("height"))}d.on("focus",function(){if(d.val()===h){d.val(null).css("color","")}}).on("blur",function(){if(Ls.isNul(d.val())){d.val(h).css("color","#aaa").css("line-height",d.css("height"))}})}}})}};Ls.ajax=function(options){Ls.log.add(">>> Ls.ajax <<<");var deferred=$.Deferred();function _error(XMLHttpRequest,textStatus,errorThrown){}function _complete(){}var setting={type:"get",cache:false,contentType:"application/json",dataType:Ls.__getAjaxDataType(),charset:Ls.ajaxCharset,loadingStr:"\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u5019...",isShowLoading:true,error:_error,complete:_complete,statusCode:{404:function(){}},isMvc:Ls.ajax.isMvc,isRest:window.LS_AJAX_ISREST?true:false,isCheckLogin:true,safeStringFilter:false,trimAll:false,ignoreFieldNames:""};var opts=$.extend({},setting,options);if(!opts.beforeSend){opts.beforeSend=function(){Ls.log.add("opts.isShowLoading="+opts.isShowLoading);if(opts.isShowLoading){Ls.tip.loading("\u6b63\u5728\u5904\u7406,\u8bf7\u7a0d\u5019...","",666666)}else{Ls.tip.hide()}}}if(!opts.url||opts.url==""){opts.url=Ls.__getAjaxDataUrl();if(Ls.ajax.getUrl()!=""){opts.url=Ls.ajax.getUrl()}}Ls.log.add("opts.url >>>");Ls.log.add(opts.url);opts.contentType+="; charset="+opts.charset;if(opts.isMvc){if(opts.data.areas){Ls.ajax.mvcAreas=opts.data.areas}if(opts.data.controller){Ls.ajax.mvcController=opts.data.controller}if(opts.data.action){Ls.ajax.mvcAction=opts.data.action}if(Ls.ajax.mvcAreas!=""){if(Ls.string.endWith(opts.url,"/")){opts.url+=Ls.ajax.mvcAreas+"/"}else{opts.url+="/"+Ls.ajax.mvcAreas+"/"}}if(Ls.ajax.mvcController!=""){opts.url+=Ls.ajax.mvcController+"/"}if(opts.data.action){opts.url+=opts.data.action}delete opts.data.action}else{if(!Ls.isNul(opts.url)){opts.url=opts.url.setUrlParam("etc",new Date().getTime());if(opts.url.toString().indexOf(".asmx")>-1){opts.dataFilter=function(data){var json=eval("("+data+")");return json.hasOwnProperty("d")?json.d:data};opts.beforeSend=function(){opts.data=JSON.stringify(opts.data)}}}}if(opts.type.toLowerCase()=="post"){opts.loadingStr="\u6b63\u5728\u63d0\u4ea4\u6570\u636e\uff0c\u8bf7\u7a0d\u5019...";if(!Ls.isNul(opts.url)&&opts.url.indexOf(".asmx")>0){ajax_config.processData=false}if(Ls.isObject(opts.data)){opts.contentType="application/x-www-form-urlencoded; charset="+opts.charset;if(opts.safeStringFilter&&!opts.trimAll){opts.data=Ls.safeStringFitlerObject(opts.data,ignoreFieldNames)}if(!opts.safeStringFilter&&opts.trimAll){opts.data=Ls.trimAllObject(opts.data,ignoreFieldNames)}if(opts.safeStringFilter&&opts.trimAll){opts.data=Ls.safeStringFitlerTrimAllObject(opts.data,ignoreFieldNames)}}}Ls.log.add("start ajaxUrl="+opts.url);if(!Ls.isNul(opts.url)&&opts.url.toLowerCase().indexOf(".txt")==-1&&opts.url.toLowerCase().indexOf(".json")==-1&&opts.url.toLowerCase().indexOf(".html")==-1&&opts.url.toLowerCase().indexOf(".htm")==-1&&!Ls.string.startWith(opts.url.toLowerCase(),"http://")&&!Ls.string.startWith(opts.url.toLowerCase(),"https://")){opts.url=window.WEBCONTEXT?window.WEBCONTEXT+opts.url:opts.url}Ls.log.add("end ajaxUrl="+opts.url);return $.ajax(opts)};Ls.ajax.url="";Ls.ajax.getUrl=function(){return Ls.ajax.url};Ls.ajax.isMvc=false;Ls.ajax.mvcAreas="Srv";Ls.ajax.mvcController="Index";Ls.ajax.mvcAction="Index";Ls.ajax.isReturnData=false;Ls.ajax._success=function(b,d,h,c,a){var g=c;Ls.tip.hide();if(b===null){return}if(Ls.ajax.isReturnData){a.resolve(b);if($.isFunction(d)){d.call(g,b)}}else{if(b.status){a.resolve(b);if($.isFunction(d)){d.call(g,b)}}else{Ls.ajax.checkLogin(b.data);if($.isFunction(h)){h.call(g,b)}else{if(b.data!=-1){Ls.tip.error(b.desc)}}}}};Ls.ajax._error=function(d,h,g,a,b){var c=b;if($.isFunction(a)){a.call(c,d,h,g)}else{if(Ls.debug){Ls.ui.tip.show({msg:h,style:"error"})}else{Ls.ui.tip.show({msg:"\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5...",style:"error"})}}};Ls.ajax.checkLogin=function(a,k){var j=window;var d=this;if(a==-9){var b=Ls.dialog.get();var c=null;var h=null;if(b){h=b;c=b.get("login",1)}if(c===null){Ls.log.add("Ls.miniLoginUrl="+Ls.miniLoginUrl);var g=Ls.miniLoginUrl.setUrlParam("etc",new Date().getTime());Ls.dialog.create({id:"login",title:"\u7528\u6237\u767b\u5f55",self:false,width:400,height:350,zIndex:999999,max:false,parent:h,resize:false,close:function(){var m=this.data;if(m&&m==1){if($.isFunction(k)){k.call(d)}else{try{j.location.reload()}catch(n){}}}},lock:true,min:false,content:"url:"+g})}else{c.show()}}};Ls.ajax._getpost=function(b,g,d,k,c,o,j){var h=this;var m=$.Deferred();var n={type:j,success:function(p,q){Ls.ajax._success.call(h,p,d,k,h,m)},error:function(p,r,q){Ls.ajax._error.call(h,p,r,q,c,h,m)}};var a=$.extend({},n,o);if(Ls.isObject(d)){Ls.log.add("okFn is object >>>");a=$.extend({},n,d)}if(Ls.isObject(k)){Ls.log.add("failFn is object >>>");a=$.extend({},n,k)}if(Ls.isObject(c)){Ls.log.add("failFn is errFn >>>");a=$.extend({},n,c)}if(Ls.isObject(b)){a.data=b;if($.isFunction(g)){a.success=function(p){Ls.ajax._success.call(h,p,g,d,h,m)};if($.isFunction(k)){a.error=function(p,r,q){Ls.ajax._error.call(h,p,r,q,k,h,m)}}}}if(Ls.isString(b)){a.url=b;if(Ls.isObject(g)||Ls.isString(g)){a.data=g}if($.isFunction(g)){a.success=function(p){Ls.ajax._success.call(h,p,g,d,h,m)};if($.isFunction(k)){a.error=function(p,r,q){Ls.ajax._error.call(h,p,r,q,k,h,m)}}}}Ls.ajax(a);return m.promise()};Ls.ajax.get=function(c,h,d,g,a,b){return Ls.ajax._getpost(c,h,d,g,a,b,"get")};Ls.ajax.post=function(c,h,d,g,a,b){return Ls.ajax._getpost(c,h,d,g,a,b,"post")};Ls.ajax.pager=function(b,j,h){var n={ver:"1.1",path:"page/pagination/",js:"jquery.pagination.min.js",css:"page.css",page:0,pagesize:10,totalcount:0,onClick:function(c,d){}};var o=$.extend({},n,j);var g={},a=Ls.path.RES_PATH+o.path+o.ver+"/";g.js=a+o.js;g.css=a+o.css;Ls.page.modules.pagination=g;try{q(b,o,h)}catch(k){Ls.page.load("pagination",function(){q(b,o,h)})}function q(d,m,c){jQuery(d).pagination(m.totalcount,{items_per_page:m.pagesize,current_page:m.page,callback:m.onClick})}};Ls.dialog=Ls.dialog||{};Ls.dialog.lhgdialogVer="4.2.0";Ls.dialog.lhgdialog=Ls.dialog.lhgdialog||{};Ls.dialog.create=Ls.dialog.lhgdialog.create=function(q,n){var o=$.Deferred();var h={id:"dg_"+new Date().getTime(),_ver:"4.2.0",_path:"dialog/lhgdialog/",_js:"lhgdialog.js",_skin:"default",winType:1,self:true,ext:false,extName:"alert",promptValue:"",ajax:false,width:500,height:300,min:false,reload:false};var j=$.extend({},h,q);var b={},a=Ls.path.RES_PATH+j._path+j._ver+"/";if(j.self){j._js+="?self=true"}else{j._js+="?self=false"}b.js=a+j._js;b.css=a+"skins/"+j._skin+".css";j._js+="&skin="+j.skin;if(Ls.string.startWith(j.content.trim().toLowerCase(),"url:")){var g=j.content.substring(4);if(!Ls.isNul(g)&&g.indexOf(".txt")==-1&&g.indexOf(".json")==-1&&g.indexOf(".html")==-1&&g.indexOf(".htm")==-1&&!Ls.string.startWith(g.toLowerCase(),"http://")&&!Ls.string.startWith(g.toLowerCase(),"https://")){g=window.WEBCONTEXT?window.WEBCONTEXT+g:g}j.content="url:"+g}Ls.page.modules.lhgdialogDg=b;if(j.winType===2){Ls.dialog.modalDialog.create(j);return}if(j.winType===3){Ls.dialog.windowOpen(j,n);return}if(j.winType===4){Ls.dialog.desktopWin(j,n);return}if(Ls.string.startWith(j.content.trim().toLowerCase(),"url:")){j.content=j.content.setUrlParam("etc",new Date().getTime())}if(window.lhgdialog){k(j,n,o)}else{Ls.page.load("lhgdialogDg",function(){k(j,n,o)})}function k(w,u,v){var p=w.domid||null,r=this;var s=null;var t=window;if(w.ext){var m='<div style="font-size:15px;font-weight:bold; line-height:180%;">'+w.content+"</div>";switch(w.extName){case"alert":$.dialog.alert(m,w.ok);break;case"confirm":$.dialog.confirm(m,w.ok,w.cancel);break;case"prompt":$.dialog.prompt(m,w.ok,w.promptValue,w.title,w.parent);break;case"tips":$.dialog.tips(m,w.time,w.icon,w.ok);break;default:$.dialog.alert(m,w.ok);break}}else{if(p===null){if(w.ajax){$.ajax({url:w.content,async:false,success:function(x){w.content=x}})}if(w.parent){w.zIndex=parseInt(w.parent.config.zIndex)+1}s=window.lhgdialog(w);if(w.reload){var d=s.iframe;if(w.content&&Ls.string.startWith(w.content,"url:")){var c=config.content.substring(4);if(d){d.src=c}}}}}Ls.fn.setTimeout(function(){v.resolve(s);if($.isFunction(u)){u.call(r,s)}})}return o.promise()};Ls.dialog.get=Ls.dialog.lhgdialog.get=function(a){var b=null;try{if(window.lhgDG){b=window.lhgDG}else{if(window.frameElement&&window.frameElement.lhgDG){b=window.frameElement.lhgDG}}if(b==null){if(window.lhgdialog){if(lhgdialog.focus){b=lhgdialog.focus}}if(window.frameElement&&window.frameElement.api){b=window.frameElement.api}}if(a&&b!=null){alert(a);b=b.get(a,1)}return b}catch(c){return null}};Ls.dialog.tips=function(a){var b={content:"\u6b63\u5728\u5904\u7406,\u8bf7\u7a0d\u5019...",time:600,extName:"tips",icon:"loading01.gif",ok:null};var g=$.extend({},b,a);Ls.dialog.create(g)};Ls.dialog.close=Ls.dialog.lhgdialog.close=function(a){var c=Ls.dialog.get();Ls.log.add("Ls.dialog.close >>> oWnd");Ls.log.add(c);if(c!=null){c.data=null;if(a){if(c.ver){if($.isFunction(a)){c.afterClose(a)}else{c.data=a;c.close()}}else{c.setArgs(a);c.close()}}else{c.close()}}else{if(a){window.returnValue=a;var b=window.opener;Ls.log.add("window.opener >>>");Ls.log.add(window.opener);if(b){b.window.windowOpenArg=a;b.window.__windowOpenOnClose(a,b.window)}}window.close()}};function __windowOpenOnClose(a,c){var b=this;var b=this;Ls.log.add(window.__openWindowOnCloseFn);Ls.log.add(!Ls.isNul(window.__openWindowOnCloseFn));Ls.log.add($.isFunction(window.__openWindowOnCloseFn));if(!Ls.isNul(window.__openWindowOnCloseFn)){if($.isFunction(window.__openWindowOnCloseFn)){window.__openWindowOnCloseFn.call(b,a)}}}Ls.dialog.art=Ls.dialog.art||{};Ls.dialog.art.create=function(h,o){var g=$.Deferred();var k={ver:"4.1.7",path:"dialog/artdialog/",js:"artDialog.js",skin:"default"};var n=$.extend({},k,h);var a={},j=Ls.path.RES_PATH+n.path+n.ver+"/";a.js=j+n.js;a.css=j+"skins/"+n.skin+".css";Ls.page.modules.artDialog=a;if(window.artDialog){b(n,o,g)}else{Ls.page.load("artDialog",function(){b(n,o,g)})}function b(d,q,c){var p=art.dialog(d),m=this;c.resolve(p);if($.isFunction(q)){q.call(m,p)}}return g.promise()};Ls.dialog.modalDialog=Ls.dialog.modalDialog||{};Ls.dialog.modalDialog.create=function(r){var n=this;var k={id:"dg_"+new Date().getTime(),title:"\u7a97\u53e3",content:"/blank.html",width:500,height:300,status:false,resize:false,lock:true,data:null,close:null};var m=$.extend({},k,r);var g="",h="",o="",j="",a="",q="",b="";if(!Ls.isNul(m.content)&&m.content.indexOf("url:")>-1){q=m.content.substring(4);Ls.log.add("pUrl:"+q)}else{alert("\u6253\u5f00\u7a97\u53e3\u7684\u9875\u9762\u5730\u5740\u53c2\u6570\u9519\u8bef,\u8bf7\u4fee\u6b63!");return}if($.isNumeric(m.width)){h="dialogWidth:"+m.width+"px;"}else{h="dialogWidth:"+m.width+";"}if($.isNumeric(m.height)){o="dialogHeight:"+m.height+"px;"}else{o="dialogHeight:"+m.height+";"}if(m.resize){j="resize:1;"}else{j="resize:0;"}if(m.status){j="status:1;"}else{j="status:0;"}pConfig=h+o+j+b;pParams={pWin:window,opener:window,data:m.data,winType:2};if(Ls.browser.IS_IE){if(m.lock){a=window.showModalDialog(q,pParams,pConfig)}else{a=window.showModelessDialog(q,pParams,pConfig)}}else{a=window.showModalDialog(q,pParams,pConfig)}if($.isFunction(m.close)){m.close.call(n,a)}};Ls.dialog.windowHandar=null;Ls.openWinList=[];Ls.WINDOW=window;Ls.dialog.windowOpen=function(a,k){var g=this;var h={width:766,height:480,top:0,left:0,toolbar:"no",menubar:"no",scrollbars:"yes",resizable:"yes",location:"no",status:"yes",close:null,id:new Date().getTime(),content:"url:/blank.html"};var j=$.extend({},h,a),b="";if(j.top==0){j.top=(window.screen.availHeight-30-j.height)/2}if(j.left==0){j.left=(window.screen.availWidth-10-j.width)/2}if(!Ls.isNul(j.content)&&j.content.indexOf("url:")>-1){b=j.content.substring(4);Ls.log.add("pUrl:"+b)}else{alert("\u6253\u5f00\u7a97\u53e3\u7684\u9875\u9762\u5730\u5740\u53c2\u6570\u9519\u8bef,\u8bf7\u4fee\u6b63!");return}if(Ls.isNul(b)){alert("\u6253\u5f00\u7a97\u53e3\u7684\u9875\u9762\u5730\u5740\u53c2\u6570\u9519\u8bef,\u8bf7\u4fee\u6b63!");return}winParam="height="+j.height+",width="+j.width+",top="+j.top+",left="+j.left+",toolbar="+j.toolbar+",menubar="+j.menubar+",scrollbars="+j.scrollbars+", resizable="+j.resizable+",location="+j.location+", status="+j.status+",alwaysRaised=yes,z-look=yes";Ls.dialog.windowHandar=window.open(b,j.id,winParam);setTimeout(function(){try{Ls.dialog.windowHandar.focus()}catch(c){}},200);Ls.openWinList.push(Ls.dialog.windowHandar);if($.isFunction(j.close)){j.close.call(g,Ls.dialog.windowHandar,j.close)}return Ls.dialog.windowHandar};function __onbeforeunload_handler(){}function __onunload_handler(){if(Ls.openWinList.length>0){for(var a=0;l=Ls.openWinList.length,a<l;a++){Ls.openWinList[a].close()}}}Ls.dialog.desktopWin=function(m,h){var g=this,a={id:"desktopWin",title:"\u7a97\u53e3",content:"url:/blank.html",winMgr:null,status:false,max:true,resize:true,min:true,lock:true,data:null,top:null,left:null,showInTaskbar:true,openAsMax:false,close:null,sizeModel:"Adaptation"};var c=$.extend({},a,m),j="",d=c.winMgr,k="";if(c.winMgr==null){alert("\u684c\u9762\u5bf9\u8c61\u4e0d\u5b58\u5728,\u4e0d\u80fd\u4f7f\u7528\u6b64\u7a97\u53e3!");return}if(!Ls.isNul(c.content)&&c.content.indexOf("url:")>-1){j=c.content.substring(4);Ls.log.add("pUrl:"+j)}else{alert("\u6253\u5f00\u7a97\u53e3\u7684\u9875\u9762\u5730\u5740\u53c2\u6570\u9519\u8bef,\u8bf7\u4fee\u6b63!");return}if(Ls.isNul(j)){alert("\u6253\u5f00\u7a97\u53e3\u7684\u9875\u9762\u5730\u5740\u53c2\u6570\u9519\u8bef,\u8bf7\u4fee\u6b63!");return}var b=c.winMgr.GetWindowByName(c.title);Ls.log.add("\u68c0\u67e5\u7a97\u53e3\u662f\u5426\u5df2\u7ecf\u5b58\u5728 >>> _win:");if(b==null){if(c.sizeModel&&c.sizeModel=="Adaptation"){c.width=parseInt(c.winMgr.Desktop.Background.offsetWidth*0.9);c.height=parseInt(c.winMgr.Desktop.Background.offsetHeight*0.8);Ls.log.add("sizeModel\u4e3a\u81ea\u9002\u5e94\u5927\u5c0f,widht="+c.width+",height="+c.height)}b=c.winMgr.CreateWindow(j,null,c.title,c.icon,c.width,c.height);if(c.min===false){b.Minimizeable=false}if(c.max===false){b.Maximizeable=false}if(c.resize===false){b.Resizeable=false}if(c.showInTaskbar===false){b.ShowInTaskbar=false}b.CenterScreen();b.Show();if(c.openAsMax===true){b.Maximize()}}else{b.ContentIframe.src=j;b.Focus()}};Ls.openWin=function(d,g,j,h){var b=this;if(d){d.addEtc()}var a={winType:1,self:false,width:800,height:460,self:false,max:true,resize:true,lock:true,content:"url:"+d,close:function(m,o){var k=null;if($.isFunction(o)){try{m.focus()}catch(n){}Ls.WINDOW.__openWindowOnCloseFn=o}if(Ls.isNul(this.winType)){k=m}else{k=this.data}if($.isFunction(j)){j.call(b,k,j)}}};var c=$.extend({},a,g);return Ls.dialog.create(c,h)};Ls.closeWin=function(a){Ls.dialog.close(a)};Ls.getWin=function(b){var a=Ls.dialog.get(b);if(a){return a}if(window.dialogArguments&&window.dialogArguments.opener){return window.dialogArguments}if(window.opener){return window}return null};Ls.form=Ls.form||{};Ls.form.validform=function(h,g,o){var k={ver:"5.3.2",path:"form/validform/",js:"validform.js",css:"css/style.css"};var n=$.extend({},k,g);var a={},j=Ls.path.RES_PATH+n.path+n.ver+"/";a.js=j+n.js;a.css=j+n.css;Ls.page.modules.Validform=a;if(window.Validform){b(h,n,o)}else{Ls.page.load("Validform",function(){b(h,n,o)})}function b(m,c,q){var d=this;var p=$(m).Validform(c);if($.isFunction(q)){q.call(d,p)}}};Ls.form.niceValidatorVer="0.7.0";Ls.form.niceValidator=function(h,o){var g=$.Deferred();var k={_ver:Ls.form.niceValidatorVer,_path:"form/niceValidator/",_lang:"local/zh_CN.js",_js:"jquery.validator.js",_css:"jquery.validator.css",formId:"#form1",theme:"yellow_right_effect",stopOnError:true};var n=$.extend({},k,h);var a={},j=Ls.path.RES_PATH+n._path+n._ver+"/";a.js=j+n._js;a.css=j+n._css;Ls.page.modules.niceValidator=a;Ls.page.modules.niceValidatorCN={js:j+n._lang,dependencies:["niceValidator"]};if(window.$.validator){b(n,o,g)}else{Ls.page.load("niceValidatorCN",function(){b(n,o,g)})}function b(d,q,c){var m=this,p;p=$(d.formId).validator(d);c.resolve(p);if($.isFunction(q)){q.call(m,p)}}return g.promise()};Ls.form.ajaxformVer="3.14";Ls.form.ajaxform=function(g,h,j){var k={url:"Server/",type:"post",before:null,loginUrl:Ls.loginUrl,formId:"#form1",dataType:"json",charset:"utf8",success:function(c){Ls.tip.hide();var d=this;if(c==null){return}if(c.status){if($.isFunction(h)){Ls.ajax.checkLogin(c.data);h.call(d,c)}}else{if($.isFunction(j)){Ls.ajax.checkLogin(c.data);j.call(d,c)}else{Ls.ajax.checkLogin(c.data);if(c.data!=-1){Ls.tip.error(c.desc)}}}},error:function(c,n,d){if(Ls.debug){Ls.tip.error(n)}else{Ls.tip.error(Ls.lang.errorTip)}}};var m=$.extend({},k,g);var b=Ls.module.form.ajaxform.minjs;if(Ls.debug){b=Ls.module.form.ajaxform.js}Ls.page.modules.ajaxForm={};Ls.page.modules.ajaxForm.js=Ls.path.RES_PATH+Ls.module.form.ajaxform.path+Ls.form.ajaxformVer+"/"+b;Ls.page.load("ajaxForm",function(){a(m.formId,m)});function a(d,c){var o=this,n=$(d);$(d).ajaxFormUnbind();$(d).on("submit",function(p){if($.isFunction(c.before)){c.before.call(o)}p.preventDefault();$(d).ajaxSubmit(c);return false})}};Ls.form.select=function(h,g,n){var b=$.Deferred();var k={_ver:"1.0.0",_path:"form/chosen/",_js:"chosen.min.js",_css:"chosen.min.css"};var m=$.extend({},k,g),j=Ls.path.RES_PATH+m._path+m._ver+"/";Ls.page.modules.chosen={js:j+m._js,css:j+m._css};if($.fn.chosen){a(h,m,n,b)}else{Ls.page.load("chosen",function(){a(h,m,n,b)})}function a(p,d,q,c){var o=this;$(p).chosen(d);c.resolve();if($.isFunction(q)){q.call(o)}}return b.promise()};Ls.form.editFormInit=function(c,j,b,h){var g={action:"getEntity"};var a=$.extend({},g,c);b=b||"tpl";h=h||"#form1";Ls.ajax.get(a,function(d){var k=this;Ls.tpl.render(b,h,d.data,function(){if($.isFunction(j)){j.call(k,d)}})},{beforeSend:function(){Ls.tip.info(Ls.lang.forminitTip,666666)}})};Ls.form.submitOk=function(a,k){var b=this;var h={formid:"#form1",extOkStr:"",isDialog:false};var j=$.extend({},h,a);var g='<h3 class="pl30 f20"> ';g+=Ls.lang.submitOkImg+" \u64cd\u4f5c\u6210\u529f\uff01 ";g+=' <a href="javascript:location.href=location.href;">\u7ee7\u7eed\u64cd\u4f5c</a> ';if(j.extOkStr!=""){g+=j.extOkStr}if(j.isDialog){g+=' <a href="javascript:Ls.dialog.close(1);">\u5173\u95ed\u7a97\u53e3</a> '}g+="</h3>";$(j.formid).hide().after(g);if($.isFunction(k)){k.call(b)}};Ls.form.textField=function(b,q,n){var o=$.Deferred();var h={_ver:"",_path:"form/textField/",_js:"jquery.textField.js"};var j=$.extend({},h,q);var g={},a=Ls.path.RES_PATH+j._path+j._ver+"/";g.js=a+j._js;Ls.page.modules.textField=g;if($.fn.textField){k(b,j,n,o)}else{Ls.page.load("textField",function(){k(b,j,n,o)})}function k(p,d,r,c){var m=this;$(p).textField(d);c.resolve();if($.isFunction(r)){r.call(m)}}return o.promise()};Ls.form.textRemindAutoVer="1.0";Ls.form.textRemindAuto=function(h,g,k){var b={};var d=$.extend({},b,g);var c=Ls.module.form.textRemindAuto.minjs;if(Ls.debug){c=Ls.module.form.textRemindAuto.js}Ls.page.modules.textRemindAuto={};Ls.page.modules.textRemindAuto.js=Ls.path.RES_PATH+Ls.module.form.textRemindAuto.path+Ls.form.textRemindAutoVer+"/"+c;try{a(h,d,k)}catch(j){Ls.page.load("textRemindAuto",function(){a(h,d,k)})}function a(o,m,p){var n=this;$(o).textRemindAuto(m);if($.isFunction(p)){p.call(n)}}};Ls.form.textSearch=function(h,g,d,k){var b={nullReport:false};var c=$.extend({},b,d);try{a(h,g,c,k)}catch(j){Ls.page.load("textSearch",function(){a(h,g,c,k)})}function a(p,n,m,q){var o=this;$(p).textSearch(n,m);if($.isFunction(q)){q.call(o)}}};Ls.form.multiselect=function(d,c,j){var a={};var b=$.extend({},a,c);try{if(Ls.debug){}g(d,b,j)}catch(h){if(Ls.debug){}Ls.page.load("multiselect",function(){g(d,b,j)})}function g(n,k,o){var m=this;$(n).multiselect(k);if($.isFunction(o)){o.call(m)}}};Ls.form.autocomplete=function(g,h,b,n){var k={_ver:"1.1",_path:"form/autocomplete/",_js:"jquery.autocomplete.min.js",_css:"jquery.autocomplete.css",minChars:1,selectFirst:false,width:125,matchCase:false,matchContains:true,autoFill:false};var m=$.extend({},k,b);var j=Ls.path.RES_PATH+m._path+m._ver+"/";Ls.page.modules.autocomplete={js:j+m._js,css:j+m._css};if($.Autocompleter){a(g,h,m,n)}else{Ls.page.load("autocomplete",function(){a(g,h,m,n)})}function a(p,q,d,r){var o=this,c=$(p);c.autocomplete(q,d);if($.isFunction(r)){r.call(o,c)}}};Ls.form.placeholder=function(g){var c=Ls.module.form.placeholder,d={};var b=Ls.path.RES_PATH+c.path;d.js=b+c.js;Ls.page.modules.placeholder=d;function a(){if(Ls.browser.ie&&parseInt(Ls.browser.ie)<10){Ls.page.load("placeholder",function(){$.Placeholder.init();if($.isFunction(g)){g.call(me,$domid)}})}}};Ls.form.datePicker=function(o,h){var g=$.Deferred();var k={_ver:"4.8",_path:"form/datePicker/my97/",_js:"WdatePicker.js"};var n=$.extend({},k,h);var a={},j=Ls.path.RES_PATH+n._path+n._ver+"/";a.js=j+n._js;Ls.page.modules.my97DatePicker=a;if(window.WdatePicker){b(o,g)}else{Ls.page.load("my97DatePicker",function(){b(o,g)})}function b(m,c){var d=this;if($.isFunction(m)){setTimeout(function(){m.call(d,WdatePicker);c.resolve(WdatePicker)},50)}}return g.promise()};Ls.form.SWFUploadPath="";Ls.form.SWFUploadGetPath=function(){return Ls.form.SWFUploadPath};Ls.form.__fixSWFUpload_OnWinUnload=function(){try{$("object.swfupload").parent().empty()}catch(a){}};Ls.form.__fixSWFUpload2IE=function(){window.onbeforeunload=function(){Ls.log.add("window.onbeforeunload >>>");Ls.form.__fixSWFUpload_OnWinUnload()};window.onunload=function(){Ls.log.add("window.onunload >>>");Ls.form.__fixSWFUpload_OnWinUnload()}};Ls.form.__fileQueueError=function(a,d,c){var b="";switch(d){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:if(c>0){b="\u60a8\u53ea\u80fd\u4e0a\u4f20"+c+"\u4e2a\u6587\u4ef6!"}else{b="\u60a8\u4e0d\u53ef\u7ee7\u7eed\u4e0a\u4f20\u6587\u4ef6!"}break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:b="\u60a8\u4e0d\u53ef\u4e0a\u4f200\u5b57\u8282\u7684\u6587\u4ef6";break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:b="\u6587\u4ef6\u8d85\u51fa\u5927\u5c0f";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:default:alert(c);break}if(b!==""){alert(b);return}};Ls.form.SWFUpload=function(s,g,n,b,q){Ls.log.add(">>> Ls.form.SWFUpload <<<");var r=$.Deferred();var j={_ver:"2.5.0",_path:"upload/SWFUpload/",_js:"swfupload.js",_cookiejs:"swfupload.cookies.js",_queuejs:"swfupload.queue.js",_speedjs:"swfupload.speed.js",_proxyjs:"swfupload.proxy.js",queue:false,speed:false,proxy:false,cookie:false,url:"Server/?action=SWFUpload",params:{savePath:"/uploadFile/"},file_size_limit:"20480",file_types:"*.*",file_upload_limit:"0",cookie:false,queueError:function(c,m,d){Ls.form.__fileQueueError(c,m,d)},fileDialogComplete:function(c,m){Ls.log.add("fileDialogComplete >>>");try{if(m>0){this.startUpload()}}catch(d){this.debug(d)}},before:function(){Ls.log.add("before >>>")},progress:function(d,c){Ls.log.add("progress >>>")},error:function(c,p,m){Ls.log.add("error >>>");var d=this;if($.isFunction(b)){b.call(d,m,c,p)}else{Ls.tip.error(m,3)}},success:function(m,c){Ls.log.add("success >>>");Ls.log.add(c);var p=this;try{json=$.parseJSON(c);if(json.status){if($.isFunction(g)){g.call(p,json,m)}}else{if($.isFunction(n)){n.call(p,json,m)}else{Ls.tip.error(json.desc,3)}}}catch(d){this.debug(d)}},complete:function(c){Ls.log.add("complete >>>")},btnId:"uploadBtnWrap",btnWidth:55,btnHeight:30,btnTextTopPadding:0,btnTextLeftPadding:0,debug:false};var k=$.extend({},j,s);var h={},a=Ls.path.RES_PATH+k._path+k._ver+"/";Ls.form.SWFUploadPath=a;h.js=Ls.path.RES_PATH+"empty.js";h.dependencies=["SWFUploadCore"];Ls.page.modules.SWFUploadCore={js:a+k._js};if(k.queue){Ls.page.modules.SWFUploadQueue={js:a+k._queuejs};h.dependencies.push("SWFUploadQueue")}if(k.cookie){Ls.page.modules.SWFUploadCookie={js:a+k._cookiejs};h.dependencies.push("SWFUploadCookie")}if(k.speed){Ls.page.modules.SWFUploadSpeed={js:a+k._speedjs};h.dependencies.push("SWFUploadSpeed")}if(k.proxy){Ls.page.modules.SWFUploadProxy={js:a+k._proxyjs};h.dependencies.push("SWFUploadProxy")}Ls.page.modules.SWFUpload=h;k.flash_url=a+"swfupload.swf";if(Ls.browser.ie&&Ls.browser.ie>9){k.flash_url=a+"swfupload_fp10.swf"}k.flash9_url=a+"swfupload_fp9.swf";k.upload_start_handler=k.before;k.upload_success_handler=k.success;k.upload_error_handler=k.error;k.upload_complete_handler=k.complete;k.upload_progress_handler=k.progress;k.file_queue_error_handler=k.queueError;k.file_dialog_complete_handler=k.fileDialogComplete;k.button_image_url=k.btnImg;k.button_placeholder_id=k.btnId;k.button_width=k.btnWidth;k.button_height=k.btnHeight;k.button_text_top_padding=k.btnTextTopPadding;k.button_text_left_padding=k.btnTextLeftPadding;k.upload_url=k.url;k.post_params=k.params;if(window.SWFUpload){o(k,q)}else{Ls.page.load("SWFUpload",function(){o(k,q)})}function o(d,p){d.button_window_mode=SWFUpload.WINDOW_MODE.TRANSPARENT;d.button_cursor=SWFUpload.CURSOR.HAND;var c=new SWFUpload(d),m=this;Ls.form.__fixSWFUpload2IE();r.resolve(c);if(k.cookie){c.refreshCookies()}if($.isFunction(k.callback)){k.callback.call(m,c)}}return r.promise()};Ls.upload=Ls.upload||{};Ls.upload.createUploadBtn4Kd=function(g,r,o){var q=$.Deferred();var h={_ver:"4.1.10",_path:"editor/kindeditor/",_js:"kindeditor.min.js",_css:"themes/default/default.css",_lang:"lang/zh_CN.js",url:"",fieldName:"imgFile",button:$(g)[0],curdir:""};var j=$.extend({},h,r);if(!Ls.isNul(j.curdir)){var k=Ls.url.set("curdir",j.curdir,j.url).toString();j.url=Ls.string.decode(Ls.url.getUrlPrefix(j.url)+k)}var b={},a=Ls.path.RES_PATH+j._path+j._ver+"/";Ls.page.modules.kindeditorCore={js:a+j._js,css:a+j._css};Ls.page.modules.kindeditor={js:a+j._lang,dependencies:["kindeditorCore"]};if(window.KindEditor){n(j,o,q)}else{Ls.page.load("kindeditor",function(){n(j,o,q)})}function n(d,s,c){var p=this;var m=KindEditor.uploadbutton(d);m.fileBox.change(function(t){m.submit()});c.resolve(m);if($.isFunction(s)){s.call(p,m)}}return q.promise()};Ls.dhtmlx=Ls.dhtmlx||{};Ls.dhtmlx.ver=Ls.module.dhtmlx.ver||"3.6";Ls.dhtmlx.path=Ls.path.RES_PATH+Ls.module.dhtmlx.path+Ls.dhtmlx.ver+"/";Ls.dhtmlx.addPlug=function(n,k){k=k||Ls.fn.blank;var j=Ls.module.dhtmlx,g=j.ui,o=g.grid,m=Ls.dhtmlx.path;if(Ls.isString(n)){switch(n){case"grid":var p=m+o.path+o.js+".js",b=m+o.path+o.celljs+".js",h=m+o.path+o.ext.pgn,d=m+o.path+o.ext.filter,c=m+o.path+o.css+".css";Ls.page.load(c);$LAB.script(p,h,d,b).wait(k);break;case"toolbar":var a=g.toolbar,p=m+a.path+a.js+".js";$LAB.script(p).wait(k);break}}};Ls.dhtmlx.grid=Ls.dhtmlx.grid||{};Ls.dhtmlx.treegrid=function(b,r,o){var q=$.Deferred();var j={_ver:Ls.dhtmlx.ver,_path:"ui/dhtmlx/",_commonjs:"core/dhtmlxcommon.js",_containerjs:"core/dhtmlxcontainer.js",_js0:"ui/grid/dhtmlxgrid.js",_js1:"ui/grid/dhtmlxgridcell.js",_js2:"ui/grid/ext/dhtmlxgrid_json.js",_js6:"ui/treegrid/dhtmlxtreegrid.js",_js7:"ui/treegrid/ext/dhtmlxtreegrid_filter.js",_js8:"ui/treegrid/ext/dhtmlxtreegrid_lines.js",_js9:"ui/treegrid/ext/dhtmlxtreegrid_lines.js",_js10:"ui/treegrid/ext/dhtmlxtreegrid_property.js",_css0:"ui/grid/dhtmlxgrid.css",_css10:"ui/treegrid/ext/dhtmlxtreegrid_property.css",_skin:"skyblue"};var k=$.extend({},j,r);var g={},a=Ls.path.RES_PATH+k._path+k._ver+"/";Ls.page.modules.dhtmlxcommon={js:a+k._commonjs,css:a+"skins/"+k._skin+".css"};Ls.page.modules.dhtmlxcontainer={js:a+k._containerjs,dependencies:["dhtmlxcommon"]};Ls.page.modules.dhtmlxgrid={js:a+k._js0,dependencies:["dhtmlxcontainer"]};Ls.page.modules.dhtmlxgridcell={js:a+k._js1,dependencies:["dhtmlxgrid"]};Ls.page.modules.dhtmlxgridjson={js:a+k._js2,dependencies:["dhtmlxgridcell"]};Ls.page.modules.dhtmlxtreegrid={js:a+k._js6,dependencies:["dhtmlxgridjson"]};var h=a+"imgs/";if(window.dhtmlXGridObject){n(b,o,q)}else{Ls.page.load("dhtmlxtreegrid",function(){n(b,o,q)})}function n(d,s,m){var p=this,c=null;c=new dhtmlXGridObject(d);if($.isFunction(s)){s.call(p,c,h)}m.resolve(c,h)}return q.promise()};Ls.dhtmlx.tabbar=function(s,n){var q=$.Deferred();var h={_ver:Ls.dhtmlx.ver,_path:"ui/dhtmlx/",_commonjs:"core/dhtmlxcommon.js",_containerjs:"core/dhtmlxcontainer.js",_js:"ui/tabbar/dhtmlxtabbar.js",_css:"ui/tabbar/dhtmlxtabbar.css",_skin:"skyblue",el:document.body,place:"top"};var j=$.extend({},h,s);var r={},o={},b={},a=Ls.path.RES_PATH+j._path+j._ver+"/";r.js=a+j._commonjs;r.css=a+"skins/"+j._skin+".css";Ls.page.modules.dhtmlxcommon=r;o.js=a+j._containerjs;Ls.page.modules.dhtmlxcontainer=o;b.js=a+j._js;b.css=a+j._css;var g=a+"imgs/";b.dependencies=["dhtmlxcommon","dhtmlxcontainer"];Ls.page.modules.dhtmlXTabBar=b;if(window.dhtmlXTabBar){k(j.el,j.place,n,q)}else{Ls.page.load("dhtmlXTabBar",function(){k(j.el,j.place,n,q)})}function k(p,d,u,m){var t=this,c=null;c=new dhtmlXTabBar(p,d);m.resolve(c);if($.isFunction(u)){u.call(t,c,g)}}return q.promise()};Ls.dhtmlx.skin="skyblue";Ls.dhtmlx.layout=function(t,n,o){var r=$.Deferred();if(o){Ls.dhtmlx.skin=o}var h={_ver:Ls.dhtmlx.ver,_path:"ui/dhtmlx/",_commonjs:"core/dhtmlxcommon.js",_containerjs:"core/dhtmlxcontainer.js",_js:"ui/layout/dhtmlxlayout.js",_css:"ui/layout/dhtmlxlayout.css",_skin:Ls.dhtmlx.skin,el:document.body,pattern:"2U",accordion:false,tabbar:false,menu:false,toolbar:false,tree:false,grid:false,gridCell:false,gridJson:false,gridTree:false,gridPager:true,plugs:{grid:{_js0:"ui/grid/dhtmlxgrid.js",_js1:"ui/grid/dhtmlxgridcell.js",_js2:"ui/grid/ext/dhtmlxgrid_json.js",_js6:"ui/treegrid/dhtmlxtreegrid.js",_js7:"ui/treegrid/ext/dhtmlxtreegrid_filter.js",_js8:"ui/treegrid/ext/dhtmlxtreegrid_lines.js",_js9:"ui/treegrid/ext/dhtmlxtreegrid_lines.js",_js10:"ui/treegrid/ext/dhtmlxtreegrid_property.js",_js11:"ui/grid/ext/dhtmlxgrid_pgn.js",_css0:"ui/grid/dhtmlxgrid.css",_css10:"ui/treegrid/ext/dhtmlxtreegrid_property.css"},tabbar:{_js:"ui/tabbar/dhtmlxtabbar.js",_css:"ui/tabbar/dhtmlxtabbar.css"},menu:{_js:"ui/menu/dhtmlxmenu.js",_extjs:"ui/menu/ext/dhtmlxmenu_ext.js"},toolbar:{_js:"ui/toolbar/dhtmlxtoolbar.js"},accordion:{_js:"ui/accordion/dhtmlxaccordion.js"},tree:{_js:"ui/tree/dhtmlxtree.js",_css:"ui/tree/dhtmlxtree.css",_ext_json:"ui/tree/ext/dhtmlxtree_json.js",_ext_dragin:"ui/tree/ext/dhtmlxtree_dragin.js",_ext_ed:"ui/tree/ext/dhtmlxtree_ed.js",_ext_er:"ui/tree/ext/dhtmlxtree_er.js",_ext_start:"ui/tree/ext/dhtmlxtree_start.js"}}};var j=$.extend({},h,t);var s={},q={},b={},a=Ls.path.RES_PATH+j._path+j._ver+"/";s.js=a+j._commonjs;s.css=a+"skins/"+j._skin+".css";Ls.page.modules.dhtmlxcommon=s;q.js=a+j._containerjs;Ls.page.modules.dhtmlxcontainer=q;b.js=a+j._js;b.css=a+j._css;var g=a+"imgs/";b.dependencies=["dhtmlxcommon","dhtmlxcontainer"];if(j.accordion){Ls.page.modules.dhtmlxAccordion={js:a+j.plugs.accordion._js};b.dependencies.push("dhtmlxAccordion")}if(j.tabbar){Ls.page.modules.dhtmlxTabbar={js:a+j.plugs.tabbar._js,css:a+j.plugs.tabbar._css};b.dependencies.push("dhtmlxTabbar")}if(j.grid){Ls.page.modules.dhtmlxGridBase={js:a+j.plugs.grid._js0};b.dependencies.push("dhtmlxGridBase");if(j.gridPager){Ls.page.modules.dhtmlxGridPager={js:a+j.plugs.grid._js11};b.dependencies.push("dhtmlxGridPager")}if(j.gridCell){Ls.page.modules.dhtmlxGridCell={js:a+j.plugs.grid._js1};b.dependencies.push("dhtmlxGridCell")}if(j.gridJson){Ls.page.modules.dhtmlxGridJson={js:a+j.plugs.grid._js2};b.dependencies.push("dhtmlxGridJson")}if(j.gridTree){Ls.page.modules.dhtmlxGridTree={js:a+j.plugs.grid._js6};b.dependencies.push("dhtmlxGridTree")}}if(j.menu){Ls.page.modules.dhtmlxMenuExt={js:a+j.plugs.menu._js};Ls.page.modules.dhtmlxMenu={js:a+j.plugs.menu._extjs,dependencies:["dhtmlxMenuExt"]};b.dependencies.push("dhtmlxMenu")}if(j.toolbar){Ls.page.modules.dhtmlxToolbar={js:a+j.plugs.toolbar._js};b.dependencies.push("dhtmlxToolbar")}if(j.tree){Ls.page.modules.dhtmlxTreeExtJson={js:a+j.plugs.tree._ext_json,dependencies:["dhtmlxTree"]};Ls.page.modules.dhtmlxTree={js:a+j.plugs.tree._js,css:a+j.plugs.tree._css};b.dependencies.push("dhtmlxTreeExtJson")}Ls.page.modules.dhtmlLayout=b;if(window.dhtmlXLayoutObject){k(j.el,j.pattern,n,r)}else{Ls.page.load("dhtmlLayout",function(){k(j.el,j.pattern,n,r)})}function k(m,u,v,d){var p=this,c=null;c=new dhtmlXLayoutObject(m,u);d.resolve(c);if($.isFunction(v)){v.call(p,c,g)}}return r.promise()};Ls.dhtmlx.setTarbarSkin=function(b,a){Ls.log.add("Ls.dhtmlx.setTarbarSkin >>> ");if(b){var c=a;if(c=="web"||c=="skyblue"||c=="blue"||c=="black"||c=="terrace"){c="dhx_"+a}Ls.log.add("skin="+c);b.setSkin(c)}};Ls.layout=Ls.layout||{};Ls.layout.create=Ls.dhtmlx.layout;Ls._getDhtmlxImgs=function(){return Ls.dhtmlx.path+Ls.module.dhtmlx.imgs};Ls._getDhtmlxSkin=function(j){j=j||"skyblue";var b=Ls.dhtmlx.path,a=b+Ls.module.dhtmlx.skin.skyblue,h=b+Ls.module.dhtmlx.skin.web,k=b+Ls.module.dhtmlx.skin.blue,c=b+Ls.module.dhtmlx.skin.black,g=b+Ls.module.dhtmlx.skin.terrace;var d=a;switch(j){case"terrace":case 5:d=g;break;case"black":case 4:d=c;break;case"blue":case 3:d=k;break;case"web":case 2:d=h;break;case"skyblue":case 1:d=a;break;default:d=a;break}return d};Ls.layout.dhtmlx=function(a,j,n,p,k){var o=Ls.dhtmlx.path,c=o+Ls.module.dhtmlx.common,b=o+Ls.module.dhtmlx.container,g=o+Ls.module.dhtmlx.ui.layout.js,h=o+Ls.module.dhtmlx.ui.layout.css;Ls.page.modules.dhtmlxcommon={js:c};Ls.page.modules.dhtmlxcontainer={js:b};Ls.page.modules.dhtmlxSkin={js:Ls.path.RES_PATH+Ls.module.empty,css:Ls._getDhtmlxSkin(p)};Ls.page.modules.dhtmlLayout={js:g,css:h,dependencies:["dhtmlxcommon","dhtmlxcontainer","dhtmlxSkin"]};try{m(a,j,n)}catch(d){Ls.page.load("dhtmlLayout",function(){m(a,j,n)})}function m(r,t,u){var s=this,q=null;q=new dhtmlXLayoutObject(r,t);if($.isFunction(u)){u.call(s,q)}}};Ls.tpl=Ls.tpl||{};Ls.tpl.art=Ls.tpl.art||{};Ls.tpl.art.ver="2.0.0";Ls.tpl.render=Ls.tpl.art.render=function(n,o,k,v,u,y){var w=$.Deferred();var q=n,t=o,g=k,x=v,j=u;var r={_ver:"2.0.0",_path:"tpl/art/",_js:"tpl.min.js",_js1:"tpl-ext.min.js",isNative:false,onRender:null,onBefore:null};var s=$.extend({},r,y);if(Ls.isObject(n)){s=$.extend({},s,n);q=s.tpl;t=s.contextId;g=s.data;x=s.onRender;j=s.onBefore}if(Ls.isObject(x)){s=$.extend({},s,v)}if(Ls.isObject(u)){s=$.extend({},s,u)}Ls.log.add("_tplId = "+q);Ls.log.add("_contextId = "+t);var h={},b=Ls.path.RES_PATH+s._path+s._ver+"/";h.js=b+s._js;Ls.page.modules.artTmpl=h;Ls.page.modules.artTmplExt={js:b+s._js1,dependencies:["artTmpl"]};var a=s.isNative?"artTmpl":"artTmplExt";if(s.isNative){if(window.template){Ls.tpl._artTemplateRender(q,t,g,x,j,w)}else{Ls.page.load(a,function(){Ls.tpl._artTemplateRender(q,t,g,x,j,w)})}}else{if(window.template&&window.template.extensions){Ls.tpl._artTemplateRender(q,t,g,x,j,w)}else{Ls.page.load(a,function(){Ls.tpl._artTemplateRender(q,t,g,x,j,w)})}}return w.promise()};Ls.tpl._artTemplateRender=function(c,d,b,n,k,o){var h=this,m="",a="",g="";b=b||{};if(Ls.string.endWith(c,".html")){function j(r,q,u,v,t,p){var s=this;return $.ajax({type:"get",async:false,url:r+"?etc="+new Date().getTime(),success:function(w){if($.isFunction(t)){t.call(s,template)}a=template.compile(w);g=a(u);if(q){jQuery(q).html(g)}p.resolve({data:u,render:a,html:g,template:template});if($.isFunction(v)){Ls.fn.setTimeout(function(){v.call(s,u,a,g,template)})}}})}return j(c,d,b,n,k,o)}else{if($.isFunction(k)){k.call(h,template)}if(Ls.string.startWith(c,"#")){c=c.substring(1)}m=c.length<50?document.getElementById(c).innerHTML:c;a=template.compile(m);g=a(b);if(d){jQuery(d).html(g)}o.resolve({data:b,render:a,html:g,template:template});if($.isFunction(n)){Ls.fn.setTimeout(function(){n.call(h,b,a,g,template)})}}};Ls.tpl.renderToHtml=function(b,d,g,c,a){return Ls.tpl.art.render(b,"",d,g,c,a)};Ls.tpl.loadArtTemplate=function(j,h){var g=$.Deferred();var n={_ver:"3.0",_path:"tpl/art/",_js:"template-native.js"};var o=$.extend({},n,h);var a={},k=Ls.path.RES_PATH+o._path+o._ver+"/";a.js=k+o._js;Ls.page.modules.artTmplV3=a;if(window.artTemplate){b(j,g)}else{Ls.page.load("artTmplV3",function(){b(j,g)})}return g.promise();function b(d,c){var m=this;if($.isFunction(d)){d.call(m,artTemplate)}c.resolve(artTemplate)}};Ls.tpl.art.addFn=function(j,h){var g=$.Deferred();var n={_ver:"2.0.0",_path:"tpl/art/",_js:"tpl.min.js"};var o=$.extend({},n,h);var a={},k=Ls.path.RES_PATH+o._path+o._ver+"/";a.js=k+o._js;Ls.page.modules.artTmpl=a;if(window.template){b(j,g)}else{Ls.page.load("artTmpl",function(){b(j,g)})}return g.promise();function b(d,c){var m=this;if($.isFunction(d)){d.call(m,template)}c.resolve(template)}};Ls.tpl.art.template=function(h,j,g,q,o,s){var r=$.Deferred();var k={_ver:"2.0.0",_path:"tpl/art/",_js:"tpl.min.js"};var n=$.extend({},k,s);var b={},a=Ls.path.RES_PATH+n._path+n._ver+"/";b.js=a+n._js;Ls.page.modules.artTmpl=b;if(window.template&&window.template.extensions){Ls.tpl._artTemplateRender(h,j,g,q,o,r)}else{Ls.page.load("artTmpl",function(){Ls.tpl._artTemplateRender(h,j,g,q,o,r)})}return r.promise()};Ls.tpl.addFun=function(d){var b=this,a=Ls.module.tpl.artTpl.minjs;if(Ls.debug){a=Ls.module.tpl.artTpl.js}Ls.page.modules.artTmpl={};Ls.page.modules.artTmpl.js=Ls.path.RES_PATH+Ls.module.tpl.artTpl.path+Ls.tpl.art.ver+"/"+a;if(window.template){c(d)}else{Ls.page.load("artTmpl",function(){c(d)})}function c(g){if($.isFunction(g)){g.call(b,template)}}};Ls.tpl.jsmart=Ls.tpl.jsmart||{};Ls.tpl.jsmart.ver="2.9";Ls.tpl.jsmart.render=function(d,b,g,h){var c=Ls.module.tpl.jsmart.minjs;Ls.page.modules.jsmart={};Ls.page.modules.jsmart.js=Ls.path.RES_PATH+Ls.module.tpl.jsmart.path+Ls.tpl.jsmart.ver+"/"+c;if(window.jSmart){a(d,b,g,h)}else{Ls.page.load("jsmart",function(){a(d,b,g,h)})}function a(k,m,j,s){var p=this,r="",n,o="";if(Ls.string.endWith(k,".html")){function q(u,t,v,w){$.ajax({type:"get",async:false,url:u+"?etc="+new Date().getTime(),success:function(x){n=new jSmart(x);o=n.fetch(v);if(t!=""){$(t).html(o)}if($.isFunction(w)){Ls.fn.setTimeout(function(){w.call(p,n,o)})}}})}q(k,m,j,s)}else{n=new jSmart(jQuery(k).html());o=n.fetch(j);if(m!=""){$(m).html(o)}if($.isFunction(s)){Ls.fn.setTimeout(function(){s.call(p,n,o)})}}}};Ls.tree=Ls.tree||{};Ls.tree.zTree=Ls.tree.zTree||{};Ls.tree.zTree.create=function(b,r,h,o){var j={_ver:"3.5",_path:"tree/ztree/",_corejs:"js/jquery.ztree.core.min.js",_alljs:"js/jquery.ztree.all.min.js",_checkjs:"js/jquery.ztree.excheck.min.js",_editjs:"js/jquery.ztree.exedit.min.js",_hidejs:"js/jquery.ztree.exhide.min.js",_css:"css/zTreeStyle/zTreeStyle.css",isCheck:false,isEdit:false,isHide:false,isAsync:false};var q=$.Deferred();var k=$.extend(true,j,r);if(k.isAsync){k.data.simpleData.enable=false;k.async={enable:true}}var g={},a=Ls.path.RES_PATH+k._path+k._ver+"/";Ls.page.modules.zTreeCore={js:a+k._corejs,css:a+k._css};g.js=Ls.path.RES_PATH+"empty.js";g.dependencies=["zTreeCore"];if(k.isCheck){Ls.page.modules.zTreeCheck={js:a+k._checkjs};g.dependencies.push("zTreeCheck")}if(k.isEdit){Ls.page.modules.zTreeEdit={js:a+k._editjs};g.dependencies.push("zTreeEdit")}if(k.isHide){Ls.page.modules.zTreeHide={js:a+k._hidejs};g.dependencies.push("zTreeHide")}Ls.page.modules.zTree=g;if($.fn.zTree){n(b,k,h,o,q)}else{Ls.page.load("zTree",function(){n(b,k,h,o,q)})}function n(t,m,u,v,c){var s=this,d=$(t);if(!d.hasClass("ztree")){d.addClass("ztree")}if(Ls.isNul(u)){$.fn.zTree.init(d,m)}else{$.fn.zTree.init(d,m,u)}var p=$.fn.zTree.getZTreeObj(t);c.resolve(p);if($.isFunction(v)){v.call(s,p)}}return q.promise()};Ls.tree.zTree.createSimpleTree=function(b,a,g,k){var h={data:{simpleData:{enable:true}},view:{nameIsHTML:true,showTitle:false}};var j=$.extend(true,h,a);return Ls.tree.zTree.create(b,j,g,k)};Ls.tree.create=Ls.tree.zTree.createSimpleTree;Ls.editor=Ls.editor||{};Ls.editor.kindeditor=Ls.editor.kindeditor||{ver:"4.1.10"};Ls.editor.kindeditor.itemsAll=["source","|","undo","redo","|","preview","print","template","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","flash","media","insertfile","table","hr","emoticons","pagebreak","link","unlink"];Ls.editor.kindeditor.items1=["source","|","undo","redo","|","copy","paste","plainpaste","wordpaste","|","clearhtml","quickformat","|","forecolor","bold","italic","underline","strikethrough","removeformat","|","image","insertfile","link","unlink"];Ls.editor.kindeditor.itemsMini=["source","|","undo","redo","|","copy","paste","plainpaste","wordpaste","|","clearhtml","quickformat","|","forecolor","bold","italic","underline","strikethrough","removeformat","|","link","unlink"];Ls.editor.create=Ls.editor.kindeditor.create=function(b,s,q){var r=$.Deferred();var j={_ver:"4.1.10",_path:"editor/kindeditor/",_js:"kindeditor.min.js",_css:"themes/default/default.css",_lang:"lang/zh_CN.js",uploadJson:"",curdir:"",items:Ls.editor.kindeditor.itemsAll,width:"100%",minHeight:200};var k=$.extend({},j,s);if(k.uploadJson.indexOf("?")<=0){k.uploadJson=k.uploadJson+"?autofoldre=1"}if(!Ls.isNul(k.curdir)){var n=Ls.url.set("curdir",k.curdir,k.uploadJson).toString();k.uploadJson=Ls.string.decode(Ls.url.getUrlPrefix(k.uploadJson)+n)}if(!Ls.isNul(k.savepath)){var h=Ls.url.set("savepath",k.savepath,k.uploadJson).toString();k.uploadJson=Ls.string.decode(Ls.url.getUrlPrefix(k.uploadJson)+h)}if(!Ls.isNul(k.uploadJson)&&!Ls.string.startWith(k.uploadJson.toLowerCase(),"http://")&&!Ls.string.startWith(k.uploadJson.toLowerCase(),"https://")){k.uploadJson=window.WEBCONTEXT?window.WEBCONTEXT+k.uploadJson:k.uploadJson}if(!Ls.isNul(k.fileManagerJson)&&!Ls.string.startWith(k.fileManagerJson.toLowerCase(),"http://")&&!Ls.string.startWith(k.fileManagerJson.toLowerCase(),"https://")){k.fileManagerJson=window.WEBCONTEXT?window.WEBCONTEXT+k.fileManagerJson:k.fileManagerJson}var g={},a=Ls.path.RES_PATH+k._path+k._ver+"/";Ls.page.modules.kindeditorCore={js:a+k._js,css:a+k._css};Ls.page.modules.kindeditor={js:a+k._lang,dependencies:["kindeditorCore"]};if(window.KindEditor){o(b,k,q,r)}else{Ls.page.load("kindeditor",function(){o(b,k,q,r)})}function o(p,d,u,c){var t,m=this;t=KindEditor.create(p,d);c.resolve(t);if($.isFunction(u)){u.call(m,t)}}return r.promise()};Ls.editor.UEditor=Ls.editor.UEditor||{};Ls.editor.UEditor.itemsSimple=[["source","undo","redo","|","pasteplain","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","autotypeset","|","fontsize","forecolor","bold","italic","underline","strikethrough","link","unlink","|","removeformat","|","simpleupload","insertimage","attachment"]];Ls.editor.UEditor.itemsAll=[[]];Ls.editor.UEditor.create=function(b,r,o){var q=$.Deferred();var h={_ver:"1.4.3",_path:"editor/ueditor/",_configJs:"ueditor.config.js",_js:"ueditor.all.min.js",_css:"themes/default/css/ueditor.min.css",_lang:"lang/zh-cn/zh-cn.js",uploadJson:"",curdir:"",toolbars:Ls.editor.UEditor.itemsSimple,autoHeightEnabled:false,initialFrameWidth:"100%",initialFrameHeight:300,minFrameHeight:300};var j=$.extend({},h,r);if(!Ls.isNul(j.curdir)){var k=Ls.url.set("curdir",j.curdir,j.uploadJson).toString();j.uploadJson=Ls.string.decode(Ls.url.getUrlPrefix(j.uploadJson)+k)}var g={},a=Ls.path.RES_PATH+j._path+j._ver+"/";window.UEDITOR_HOME_URL=a;Ls.page.modules.UEditorConfig={js:a+j._configJs};Ls.page.modules.UEditor={js:a+j._js,dependencies:["UEditorConfig"]};if(window.UE){n(b,j,o,q)}else{Ls.page.load("UEditor",function(){n(b,j,o,q)})}function n(p,d,t,c){var s,m=this;if(Ls.string.startWith(p,"#")){p=p.substring(1)}s=UE.getEditor(p,d);c.resolve(s);if($.isFunction(t)){t.call(m,s)}}return q.promise()};Ls.cookie=Ls.cookie||{};Ls.cookie._isValidKey=function(a){return(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+\x24')).test(a)};Ls.cookie.getRaw=function(b){if(Ls.cookie._isValidKey(b)){var c=new RegExp("(^| )"+b+"=([^;]*)(;|\x24)"),a=c.exec(document.cookie);if(a){return a[2]||null}}return null};Ls.cookie.get=function(a){var b=Ls.cookie.getRaw(a);if("string"==typeof b){b=decodeURIComponent(b);return b}return null};Ls.cookie.getChild=function(a,h){var g=Ls.cookie.get(a);var d="";if(g!=null){var c=g.split("&");for(var b=0;b<c.length;b++){if(c[b].Trim().substr(0,h.length)==h){d=c[b].Trim().substr(h.length+1);break}}}return d};Ls.cookie.setRaw=function(c,d,b){if(!Ls.cookie._isValidKey(c)){return}b=b||{};var a=b.expires;if("number"==typeof b.expires){a=new Date();a.setTime(a.getTime()+b.expires)}document.cookie=c+"="+d+(b.path?"; path="+b.path:"")+(a?"; expires="+a.toGMTString():"")+(b.domain?"; domain="+b.domain:"")+(b.secure?"; secure":"")};Ls.cookie.remove=function(b,a){a=a||{};a.expires=new Date(0);Ls.cookie.setRaw(b,"",a)};Ls.cookie.set=function(b,c,a){Ls.cookie.setRaw(b,encodeURIComponent(c),a)};Ls.date=Ls.date||{};Ls.number.pad=function(d,c){var g="",b=(d<0),a=String(Math.abs(d));if(a.length<c){g=(new Array(c-a.length+1)).join("0")}return(b?"-":"")+g+a};Ls.date.format=function(a,h){if("string"!=typeof h){return a.toString()}function d(p,o){h=h.replace(p,o)}var b=Ls.number.pad,j=a.getFullYear(),g=a.getMonth()+1,n=a.getDate(),k=a.getHours(),c=a.getMinutes(),m=a.getSeconds();d(/yyyy/g,b(j,4));d(/yy/g,b(parseInt(j.toString().slice(2),10),2));d(/MM/g,b(g,2));d(/M/g,g);d(/dd/g,b(n,2));d(/d/g,n);d(/HH/g,b(k,2));d(/H/g,k);d(/hh/g,b(k%12,2));d(/h/g,k%12);d(/mm/g,b(c,2));d(/m/g,c);d(/ss/g,b(m,2));d(/s/g,m);return h};Ls.date.parse=function(c){var a=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+\x24");if("string"==typeof c){if(a.test(c)||isNaN(Date.parse(c))){var h=c.split(/ |T/),b=h.length>1?h[1].split(/[^\d]/):[0,0,0],g=h[0].split(/[^\d]/);return new Date(g[0]-0,g[1]-1,g[2]-0,b[0]-0,b[1]-0,b[2]-0)}else{return new Date(c)}}return new Date()};Ls.fn.countdown=function(c,j,b,k){var h={startFontSize:"12px",endFontSize:"12px",duration:1000,startNumber:6,endNumber:0};var d=$.extend({},h,b);var a=$(c),g=this;return a.each(function(){if(!j&&j!=d.endNumber){j=d.startNumber}a.text(j).css("fontSize",d.startFontSize);a.animate({fontSize:d.endFontSize},d.duration,"",function(){if(j>d.endNumber){a.css("fontSize",d.startFontSize).text(j-1);Ls.fn.countdown(c,j-1,d)}else{if($.isFunction(k)){k.call(g)}}})})};Ls.copyTo=function(b,k){var h={_path:"utils/ZeroClipboard",_js:"ZeroClipboard.js",moviePath:"ZeroClipboard.swf"};var j=h;if(Ls.isObject(b)){j=$.extend({},h,b)}if(Ls.isFunction(b)){k=b}var g=Ls.path.RES_PATH+j._path+"/";j.moviePath=g+j.moviePath;Ls.page.modules.ZeroClipboard={js:g+j._js};if(window.ZeroClipboard){a(j,k)}else{Ls.page.load("ZeroClipboard",function(){a(j,k)})}function a(c,n){var m=this;ZeroClipboard.setMoviePath(c.moviePath);var d=new ZeroClipboard.Client();if(Ls.isFunction(n)){n.call(m,d)}}};Ls.contextMenu=Ls.contextMenu||{};Ls.contextMenu.create=function(j,g,n){var b=when.defer();var k={_ver:"2.0",_path:"res/contextmenu/jquery.contextmenu/",_js:"jquery.contextmenu.js",_css:"jquery.contextmenu.css"};var m;if(Ls.isObject(j)){m=$.extend({},k,j);if(Ls.isFunction(g)){n=g}}if(Ls.isString(j)&&Ls.isObject(g)){m=$.extend({},k,g);m.selector=j}var h=Ls.config.rootDir+m._path+m._ver+"/";Ls.page.modules.jQueryContextMenu={js:h+m._js,css:h+m._css};if($.contextMenu){a(m,n,b)}else{Ls.page.load("jQueryContextMenu",function(){a(m,n,b)})}function a(o,q,d){var p=this,c=$.contextMenu(o,q);d.resolve(c);if($.isFunction(q)){q.call(p,c)}}return b.promise};Ls.textAreaToDb=function(b){var a=new RegExp("[\n\r]","gi");b=b.replace(a,"<br/>");return b};Ls.dbToTextArea=function(b){var a=new RegExp("<br/>","gi");b=b.replace(a,"\r\n");return b};Ls.modalDialogPageReload=function(){try{reload.href=window.location.href.setUrlParam("random",Math.random());reload.click()}catch(a){}};Ls.chart=Ls.chart||{};Ls.chart.create=function(b,q,n){var o=when.defer();var h={ver:"4.0.3",path:"charts/highcharts/",js:"highcharts.js"};var j=$.extend({},h,q);var g={},a=Ls.path.RES_PATH+j.path+j.ver+"/";g.js=a+j.js;Ls.page.modules.highcharts=g;Ls.log.add("Ls.chart.create >>>");Ls.log.add(window.Highcharts);if(window.Highcharts){Ls.log.add("window.Highcharts isexist!");k(b,j,n,o)}else{Ls.log.add("window.Highcharts no load, starting load highcharts.js!");Ls.page.load("highcharts",function(){k(b,j,n,o)})}function k(p,d,s,c){var m=this;var r=$(p).highcharts(d);c.resolve(r);if($.isFunction(s)){s.call(m,r)}}return o.promise};Ls.pngFix=function(b,q,n){var o=when.defer();var h={ver:"",path:"utils/pngFix/",js:"DD_belatedPNG_0.0.8a-min.js"};var j=$.extend({},h,q);var g={},a=Ls.path.RES_PATH+j.path+j.ver+"/";g.js=a+j.js;Ls.page.modules.DD_belatedPNG=g;if(window.DD_belatedPNG){k(b,n,o)}else{Ls.page.load("DD_belatedPNG",function(){k(b,n,o)})}function k(m,p,c){var d=this;DD_belatedPNG.fix(m);c.resolve(window.DD_belatedPNG);if($.isFunction(p)){p.call(d,window.DD_belatedPNG)}}return o.promise};Ls.tab=Ls.tab||{};Ls.tab.kandytabs=function(h,g,n){Ls.log.add(">>> Ls.tab.kandytabs <<<");var b=$.Deferred();var k={_ver:"4.3",_path:"tab/kandytabs/",_js:"kandytabs.js",_css:"kandytabs.css"};var m=$.extend({},k,g),j=Ls.path.RES_PATH+m._path+m._ver+"/";Ls.page.modules.KandyTabs={js:j+m._js,css:j+m._css};if($.fn.KandyTabs){a(h,m,n,b)}else{Ls.page.load("KandyTabs",function(){a(h,m,n,b)})}function a(q,d,r,c){var p=this;var o=$(q).KandyTabs(d);c.resolve(o);if($.isFunction(r)){r.call(p,o)}}return b.promise()};Ls.tab.create=Ls.tab.kandytabs;Ls.photo=Ls.photo||{};Ls.photo.slider=Ls.photo.slider||{};Ls.photo.slider.nbspSlider=function(b,q,o){var j={_ver:"1.1",_path:"photo/nbspSlider/",_js:"jquery.nbspSlider.min.js",_css:"css/css.css"};var k=$.extend({},j,q);var g={},a=Ls.path.RES_PATH+k._path+k._ver+"/";Ls.page.modules.nbspSlider={js:a+k._js,css:a+k._css};try{n(b,k,o)}catch(h){Ls.page.load("nbspSlider",function(){n(b,k,o)})}function n(m,c,p){var d=this;$(m).nbspSlider(c);if($.isFunction(p)){p.call(d)}}};Ls.uploader=Ls.uploader||{};Ls.uploader.webUploader=function(h,n){var d=$.Deferred();var g={_ver:"",_path:"upload/webuploader/",_js:"webuploader.min.js",_jssrc:"webuploader.js",debug:false,type:"image",errMsgId:null,multiple:false,conId:null,hiddenInputId:"#webUploadHiddenInputId",showList:false,listSytle:"down",progress:false,progressHtml:'<div id="progress" class="progress-container"></div>',progressId:"",btnId:"#picker",btnLabel:"",btnInnerHtml:"",server:"/upload/uploadAttachment",swf:"/assets/res/upload/webuploader/Uploader.swf?v="+new Date().getTime(),pick:{id:"#picker",label:"\u4e0a\u4f20\u56fe\u7247",innerHTML:"\u4e0a\u4f20\u56fe\u7247",multiple:false},fileSizeLimit:100*1024*1024,fileSingleSizeLimit:20*1024*1024,fileNumLimit:5,fileCount:0,fileSize:0,accept:{title:"\u56fe\u7247\u6587\u4ef6",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"},resize:false,auto:false,fileVal:"Filedata",beforeFileQueued:Ls.fn.blank,uploadSuccess:Ls.fn.blank,uploadError:Ls.fn.blank,uploadComplete:Ls.fn.blank,onAllComplete:function(c){},onComplete:function(c){}};var k=$.extend(true,{},g,h);var a={},j=Ls.path.RES_PATH+k._path+k._ver+"/";a.js=k.debug?j+k._jssrc:j+k._js;Ls.page.modules.webUploader=a;if(k.type=="file"){k.accept.title="\u6587\u6863\u6587\u4ef6";k.accept.extensions="doc,docx,xls,xlsx,wps,zip,rar,txt,pdf,ppt,pptx,bpd,hfd,esp,lrm,pic";k.accept.mimeTypes="application/*,text/*";k.pick.label="\u4e0a\u4f20\u6587\u4ef6";k.pick.innerHTML="\u4e0a\u4f20\u6587\u4ef6"}if(k.type=="video"){k.accept.title="\u89c6\u9891\u6587\u4ef6";k.accept.extensions="mp4,flv";k.accept.mimeTypes="video/*";k.pick.label="\u4e0a\u4f20\u89c6\u9891";k.pick.innerHTML="\u4e0a\u4f20\u89c6\u9891"}if(k.type=="all"){k.accept.title="\u6587\u4ef6";k.accept.extensions="gif,jpg,jpeg,bmp,png,mp4,flv,doc,docx,xls,xlsx,wps,zip,rar,txt,pdf,ppt,pptx,bpd,hfd,esp,lrm,pic";k.accept.mimeTypes="image/*,video/*,application/*,text/*";k.pick.label="\u4e0a\u4f20\u6587\u4ef6";k.pick.innerHTML="\u4e0a\u4f20\u6587\u4ef6"}k.pick.multiple=k.multiple;if(!k.pick.multiple){k.fileSizeLimit=k.fileSingleSizeLimit;k.fileNumLimit=1}if(!Ls.isNul(k.server)&&!Ls.string.startWith(k.server.toLowerCase(),"http://")&&!Ls.string.startWith(k.server.toLowerCase(),"https://")){k.server=window.WEBCONTEXT?window.WEBCONTEXT+k.server:k.server}if(!Ls.isNul(k.btnLabel)){k.pick.label=k.btnLabel}if(!Ls.isNul(k.btnInnerHtml)){k.pick.innerHTML=k.btnInnerHtml}k.pick.id=k.btnId;if(window.WebUploader){b(k,n,d)}else{Ls.page.load("webUploader",function(){b(k,n,d)})}function b(p,s,F){var C=this,w,v,y,u;if(!WebUploader.Uploader.support()){alert("Web Uploader \u4e0d\u652f\u6301\u60a8\u7684\u6d4f\u89c8\u5668\uff01\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fIE\u6d4f\u89c8\u5668\uff0c\u8bf7\u5c1d\u8bd5\u5347\u7ea7 flash \u64ad\u653e\u5668");throw new Error("WebUploader does not support the browser you are using.")}function B(I,H){Ls.log.add(">>> \u6539\u53d8\u6587\u4ef6\u7684\u72b6\u6001\u503c >>> <<< statuschange >>>");Ls.log.add("cur = "+I+" ||| prev = "+H);Ls.log.add("====================================================");if(I==="error"||I==="invalid"){}else{if(I==="interrupt"){}else{if(I==="queued"){}else{if(I==="progress"){}else{if(I==="complete"){}}}}}u.removeClass("state-"+H).addClass("state-"+I)}function A(H){Ls.log.add(" ");Ls.log.add("==================================================");Ls.log.add("File.Status \u6587\u4ef6\u72b6\u6001\u503c >>> ");Ls.log.add("==================================================");Ls.log.add("inited \u521d\u59cb\u72b6\u6001 queued \u5df2\u7ecf\u8fdb\u5165\u961f\u5217, \u7b49\u5f85\u4e0a\u4f20");Ls.log.add("progress \u4e0a\u4f20\u4e2d complete \u4e0a\u4f20\u5b8c\u6210 error \u4e0a\u4f20\u51fa\u9519\uff0c\u53ef\u91cd\u8bd5");Ls.log.add("interrupt \u4e0a\u4f20\u4e2d\u65ad\uff0c\u53ef\u7eed\u4f20 invalid \u6587\u4ef6\u4e0d\u5408\u683c\uff0c\u4e0d\u80fd\u91cd\u8bd5\u4e0a\u4f20\u3002\u4f1a\u81ea\u52a8\u4ece\u961f\u5217\u4e2d\u79fb\u9664");Ls.log.add("cancelled \u6587\u4ef6\u88ab\u79fb\u9664");Ls.log.add("=================================================");Ls.log.add("\u5f53\u524d\u6587\u4ef6\u7684status\u662f:");Ls.log.add("file.getStatus = "+H.getStatus());Ls.log.add(" ");Ls.log.add(" ");Ls.log.add("==================================================");Ls.log.add("file.statusText \u72b6\u6001\u6587\u5b57\u8bf4\u660e\u3002\u5728\u4e0d\u540c\u7684status\u8bed\u5883\u4e0b\u6709\u4e0d\u540c\u7684\u7528\u9014");Ls.log.add("file.statusText = "+H.statusText);Ls.log.add(" ");Ls.log.add(" ");Ls.log.add(" ");Ls.log.add(" ");Ls.log.add("==================================================");Ls.log.add("File.stats \u6587\u4ef6\u961f\u5217, \u7528\u6765\u5b58\u50a8\u5404\u4e2a\u72b6\u6001\u4e2d\u7684\u6587\u4ef6");Ls.log.add("==================================================");Ls.log.add("numOfQueue \u961f\u5217\u4e2d\u7684\u6587\u4ef6\u6570");Ls.log.add("numOfSuccess \u4e0a\u4f20\u6210\u529f\u7684\u6587\u4ef6\u6570");Ls.log.add("numOfCancel \u88ab\u53d6\u6d88\u7684\u6587\u4ef6\u6570");Ls.log.add("numOfProgress \u6b63\u5728\u4e0a\u4f20\u4e2d\u7684\u6587\u4ef6\u6570");Ls.log.add("numOfUploadFailed \u4e0a\u4f20\u9519\u8bef\u7684\u6587\u4ef6\u6570\u3002");Ls.log.add("numOfInvalid \u65e0\u6548\u7684\u6587\u4ef6\u6570\u3002");Ls.log.add("numofDeleted \u88ab\u79fb\u9664\u7684\u6587\u4ef6\u6570");Ls.log.add("==================================================");Ls.log.add("\u5f53\u524d\u6587\u4ef6\u7684stats\u662f:");Ls.log.add(H.stats);Ls.log.add("==================================================");Ls.log.add(" ")}if(p.showList){p.auto=false;if(Ls.isNul(p.conId)){alert("\u6279\u91cf\u4e0a\u4f20\u65f6,\u8bf7\u6307\u5b9a\u5bb9\u5668ID");return}var E=$(p.conId);var G="";if(typeof guidGenerator!="undefined"){G=guidGenerator()}else{G=(((1+Math.random())*65536)|0).toString(16).substring(1)}var m='<ul id="thelist" class="uploader-list"></ul>';var q='<div class="btns fixV"><span id="'+G+'">\u9009\u62e9\u6587\u4ef6</span>';if(!p.auto){q+='<span id="ctlBtn" class="webuploader-btn">\u5f00\u59cb\u4e0a\u4f20</span></div>'}var D='<div class="webuploader">';if(p.listSytle=="up"){D+=m+q}else{D+=q+m}D+="</div>";E.append(D);if(!p.auto){$(".webuploader-btn").hover(function(){$(this).addClass("webuploader-btn-hover")},function(){$(this).removeClass("webuploader-btn-hover")})}var c=E.find("#thelist"),z=E.find("#ctlBtn"),r="pending";var o={fileList:[]};p.pick.id="#"+G;y=WebUploader.create(p);y.on("beforeFileQueued",function(H){Ls.log.add(" ");Ls.log.add(">>> \u5f53\u6587\u4ef6\u88ab\u52a0\u5165\u961f\u5217\u4e4b\u524d\u89e6\u53d1 <<< >>> uploader.beforeFileQueued >>>");var I=this;if($.isFunction(p.beforeFileQueued)){p.beforeFileQueued.call(I,H,y)}});y.on("fileQueued",function(H){Ls.log.add(" ");Ls.log.add(">>> \u5f53\u6587\u4ef6\u88ab\u52a0\u5165\u961f\u5217\u4ee5\u540e\u89e6\u53d1 <<< >>> uploader.fileQueued >>>");A(H);if(p.auto){y.upload()}else{u=$('<li id="'+H.id+'" class="item"><span class="info">'+H.name+'</span><span class="state">\u7b49\u5f85\u4e0a\u4f20...</span><span class="delBtn icon_del6"></span></li>');c.append(u)}H.on("statuschange",B);u.on("click",".delBtn",function(){var K=$(this);var J=K.parent();var I=J.attr("id");if(confirm("\u786e\u5b9a\u8981\u79fb\u9664\u6b64\u6587\u4ef6\u5417\uff1f")){Ls.log.add("\u76f4\u63a5\u4ece\u961f\u5217\u4e2d\u5220\u9664\u6587\u4ef6\u5bf9\u8c61 >>>");Ls.log.add(H);t(I);y.removeFile(H);J.remove();Ls.log.add("\u8f93\u51fa\u5f53\u524d\u961f\u5217\u4e2d\u7684\u6587\u4ef6\u4e2a\u6570 >>>");Ls.log.add(y.getFiles());Ls.log.add(y.getStats());return}});x("ready")});function t(K){var H=o.fileList,I=[];for(var J=H.length-1;J>=0;J--){if(H[J].queueId!=K){I.push(H[J])}}o.fileList=I;Ls.log.add("updateFileList >>>");Ls.log.add(Ls.jsonEncode(o));if(!o.fileList){o.fileList=[]}$(p.hiddenInputId).val(Ls.jsonEncode(o))}y.on("filesQueued",function(J){Ls.log.add(" ");Ls.log.add(">>> \u5f53\u4e00\u6279\u6587\u4ef6\u6dfb\u52a0\u8fdb\u961f\u5217\u4ee5\u540e\u89e6\u53d1 <<< >>> uploader.filesQueued >>>");Ls.log.add(J.length);if(J.length>0){for(var I=J.length-1;I>=0;I--){var H=J[I]}}});y.on("fileDequeued",function(H){Ls.log.add(" ");Ls.log.add(">>> \u5f53\u6587\u4ef6\u88ab\u79fb\u9664\u961f\u5217\u540e\u89e6\u53d1\u3002 >>> <<< uploader.onFileDequeued >>>");p.fileCount--;p.fileSize-=H.size;Ls.log.add("options.fileCount ="+p.fileCount);Ls.log.add("options.fileSize = "+p.fileSize);if(!p.fileCount){x("pedding")}});y.on("startUpload",function(){Ls.log.add(">>> \u5f53\u5f00\u59cb\u4e0a\u4f20\u6d41\u7a0b\u65f6\u89e6\u53d1 <<< >>> uploader.startUpload >>>")});y.on("stopUpload",function(){Ls.log.add(">>> \u5f53\u5f00\u59cb\u4e0a\u4f20\u6d41\u7a0b\u6682\u505c\u65f6\u89e6\u53d1\u3002 <<< >>> uploader.stopUpload >>>")});y.on("uploadFinished",function(){Ls.log.add(">>> \u5f53\u6240\u6709\u6587\u4ef6\u4e0a\u4f20\u7ed3\u675f\u65f6\u89e6\u53d1\u3002 >>> <<< uploader.uploadFinished >>>")});y.on("uploadStart",function(H){Ls.log.add(">>> \u67d0\u4e2a\u6587\u4ef6\u5f00\u59cb\u4e0a\u4f20\u524d\u89e6\u53d1\uff0c\u4e00\u4e2a\u6587\u4ef6\u53ea\u4f1a\u89e6\u53d1\u4e00\u6b21 >>> <<< uploader.uploadStart >>>");A(H)});y.on("uploadBeforeSend",function(H,I,J){Ls.log.add(">>> \u5f53\u67d0\u4e2a\u6587\u4ef6\u7684\u5206\u5757\u5728\u53d1\u9001\u524d\u89e6\u53d1 >>> uploader.uploadBeforeSend >>>")});y.on("uploadAccept",function(I,H){Ls.log.add(">>> \u5f53\u67d0\u4e2a\u6587\u4ef6\u4e0a\u4f20\u5230\u670d\u52a1\u7aef\u54cd\u5e94\u540e\uff0c\u4f1a\u6d3e\u9001\u6b64\u4e8b\u4ef6\u6765\u8be2\u95ee\u670d\u52a1\u7aef\u54cd\u5e94\u662f\u5426\u6709\u6548 >>> <<< uploader.uploadAccept >>>");Ls.log.add(I);Ls.log.add(H);A(I.file);if(H.status){Ls.log.add("upload success!")}else{Ls.log.add("upload error!");return false}});y.on("uploadProgress",function(K,I){var M=E.find("#"+K.id),H=M.find(".progress"),J=H.find(".bar");if(!J.length){var L=$('<span class="progress"><span  class="percentage"><span class="bar" role="progressbar" style="width: 0%"></span></span></span>');J=M.find(".info").after(L).find(".bar")}M.find(".state").text("\u4e0a\u4f20\u4e2d");H.show();J.css("width",I*100+"%")});y.on("uploadSuccess",function(J,I){Ls.log.add(">>> \u5f53\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u65f6\u89e6\u53d1 <<< >>> uploader.uploadSuccess <<<");A(J);Ls.log.add("\u670d\u52a1\u7aef\u8fd4\u56de\u7684\u6570\u636e\u662f:");Ls.log.add(I);Ls.log.add("================================================");if(I.status){var K=I.data&&Ls.isArray(I.data)?I.data[0]:I.data;var H=E.find("#"+J.id);H.find(".state").text("\u5df2\u4e0a\u4f20");K.queueId=J.id;if(!Ls.isArray(o.fileList)){o.fileList=[]}o.fileList.push(K);p.onComplete(K)}else{x("error")}});y.on("uploadError",function(H){Ls.log.add(">>> \u5f53\u6587\u4ef6\u4e0a\u4f20\u51fa\u9519\u65f6\u89e6\u53d1 <<< >>>uploader.uploadError >>>");A(H);E.find("#"+H.id).find(".state").html('<span class="red">\u4e0a\u4f20\u51fa\u9519\uff0c</span><span class="retry">\u91cd\u4f20</span>');E.find("#"+H.id).find(".retry").on("click",function(){y.retry()})});y.on("uploadComplete",function(I){Ls.log.add("\u4e0d\u7ba1\u6210\u529f\u6216\u8005\u5931\u8d25\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u65f6\u89e6\u53d1 >>> <<< uploader.onUploadComplete >>>");A(I);E.find("#"+I.id).find(".progress").fadeOut();var H=$(p.hiddenInputId);H.val(Ls.jsonEncode(o));Ls.log.add(Ls.jsonEncode(o));p.onAllComplete(o.fileList)});y.onError=function(H){Ls.log.add(">>> \u5f53validate\u4e0d\u901a\u8fc7\u65f6 <<< >>>uploader.onError >>>");Ls.log.add("type = "+H);var I="";switch(H){case"Q_EXCEED_NUM_LIMIT":I="\u6587\u4ef6\u6570\u91cf\u8d85\u51fa,\u5355\u6b21\u4e0a\u4f20\u6700\u591a\u5141\u8bb8"+p.fileNumLimit+"\u4e2a\u6587\u4ef6";break;case"Q_EXCEED_SIZE_LIMIT":I="\u6587\u4ef6\u603b\u5927\u5c0f\u8d85\u51fa,\u5355\u6b21\u4e0a\u4f20\u603b\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7"+p.fileSizeLimit/1024+"KB";break;case"Q_TYPE_DENIED":I="\u6587\u4ef6\u7c7b\u578b\u4e0d\u5408\u6cd5,\u5141\u8bb8\u7684\u7c7b\u578b\u662f:"+p.accept.extensions;break;case"F_EXCEED_SIZE":I="\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa,\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\u4e3a:"+p.fileSingleSizeLimit/1024+"KB";break;case"F_DUPLICATE":I="\u6587\u4ef6\u5df2\u7ecf\u9009\u62e9\u8fc7\u4e86";break;default:I="\u672a\u77e5\u7c7b\u578b\u9519\u8bef:"+H;break}if(!Ls.isNul(p.errMsgId)){$(p.errMsgId).text(I)}else{alert(I)}};y.on("all",function(H){if(H==="startUpload"){r="uploading"}else{if(H==="stopUpload"){r="paused"}else{if(H==="uploadFinished"){r="done"}}}if(r==="uploading"){z.text("\u6682\u505c\u4e0a\u4f20")}else{z.text("\u5f00\u59cb\u4e0a\u4f20")}});function x(J){var I,H;if(J===r){return}r=J;switch(r){case"pedding":y.refresh();break;case"ready":y.refresh();break;case"uploading":z.text("\u6682\u505c\u4e0a\u4f20");break;case"paused":z.text("\u7ee7\u7eed\u4e0a\u4f20");break;case"confirm":z.text("\u5f00\u59cb\u4e0a\u4f20");H=y.getStats();if(H.successNum&&!H.uploadFailNum){x("finish");return}break;case"finish":H=y.getStats();if(H.successNum){alert("\u4e0a\u4f20\u6210\u529f")}else{r="done";location.reload()}break}}z.on("click",function(){if(r==="uploading"){y.stop()}else{y.upload()}})}else{p.auto=true;y=WebUploader.create(p);y.on("beforeFileQueued",function(H){Ls.log.add(" ");Ls.log.add(">>> \u5f53\u6587\u4ef6\u88ab\u52a0\u5165\u961f\u5217\u4e4b\u524d\u89e6\u53d1 <<< >>> uploader.beforeFileQueued >>>");var I=this;if($.isFunction(p.beforeFileQueued)){p.beforeFileQueued.call(I,H,y)}});y.onUploadSuccess=function(I,H){Ls.log.add("uploader.onUploadSuccess >>>");if(H.status){var J=H.data&&Ls.isArray(H.data)?H.data[0]:H.data;if($.isFunction(p.onComplete)){F.resolve(J);p.onComplete.call(C,J)}}else{if(p.progress){w.hide()}y.removeFile(I);Ls.tip.error(H.desc)}};y.onUploadError=function(H){Ls.log.add("uploader.onUploadError >>>");Ls.log.add(y);y.removeFile(H);if($.isFunction(p.uploadError)){p.uploadError.call(C,H,y)}else{Ls.tip.error("\u4e0a\u4f20\u5931\u8d25,\u8bf7\u4e0e\u7ba1\u7406\u5458\u8054\u7cfb")}};y.onUploadComplete=function(H){Ls.log.add("uploader.onUploadComplete >>>");y.removeFile(H);if(p.progress){w.hide()}if($.isFunction(p.uploadComplete)){p.uploadComplete.call(C,H,y)}};y.onBeforeFileQueued=function(H){Ls.log.add("uploader.onBeforeFileQueued >>>")};y.onStartUpload=function(H){Ls.log.add("uploader.onStartUpload >>> file.getStats()");if(H){Ls.log.add(H.getStats())}};y.onFileQueued=function(H){Ls.log.add("uploader.onFileQueued >>>");p.fileCount++;p.fileSize+=H.size;Ls.log.add("options.fileCount ="+p.fileCount);Ls.log.add("options.fileSize = "+p.fileSize)};y.onFileDequeued=function(H){Ls.log.add("uploader.onFileDequeued >>>");p.fileCount--;p.fileSize-=H.size;Ls.log.add("options.fileCount ="+p.fileCount);Ls.log.add("options.fileSize = "+p.fileSize);if(!p.fileCount){}};y.onError=function(H){Ls.log.add("uploader.onError >>>");Ls.log.add("uploader.getStats()");Ls.log.add(y.getStats());Ls.log.add("uploader.getFiles('error')");Ls.log.add(y.getFiles("error"));var I="";switch(H){case"Q_EXCEED_NUM_LIMIT":I="\u6587\u4ef6\u6570\u91cf\u8d85\u51fa,\u5355\u6b21\u4e0a\u4f20\u6700\u591a\u5141\u8bb8"+p.fileNumLimit+"\u4e2a\u6587\u4ef6";break;case"Q_EXCEED_SIZE_LIMIT":I="\u6587\u4ef6\u603b\u5927\u5c0f\u8d85\u51fa,\u5355\u6b21\u4e0a\u4f20\u603b\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7"+p.fileSizeLimit/1024+"KB";break;case"Q_TYPE_DENIED":I="\u6587\u4ef6\u5927\u5c0f\u4e3a0\u6216\u6587\u4ef6\u7c7b\u578b\u4e0d\u5408\u6cd5,\u5141\u8bb8\u7684\u7c7b\u578b\u662f:"+p.accept.extensions;break;case"F_EXCEED_SIZE":I="\u6587\u4ef6\u5927\u5c0f\u8d85\u51fa,\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\u4e3a:"+p.fileSingleSizeLimit/1024+"KB";break;case"F_DUPLICATE":I="\u6587\u4ef6\u5df2\u7ecf\u9009\u62e9\u8fc7\u4e86";break;default:I="\u672a\u77e5\u7c7b\u578b\u9519\u8bef:"+H;break}if(!Ls.isNul(p.errMsgId)){$(p.errMsgId).text(I)}else{alert(I)}};if(p.progress){if(!Ls.isNul(p.progressId)){$(p.progressId).html(p.progressHtml)}else{$(p.pick.id).append(p.progressHtml)}y.onUploadProgress=function(I,H){w=$(p.progressId);v=w.find(".bar");if(!v.length){v=$('<span class="progress"><span  class="percentage"><span class="bar" role="progressbar" style="width: 0%"></span></span></span>').appendTo(w).find(".bar")}w.show();v.css("width",H*100+"%")}}}}return d.promise()};Ls.uploader.create=Ls.uploader.webUploader;
