var _Scroller=function(){for(var t,o,i,e,n,s={dom:{},api:{},lockState:!1},l=0,m=arguments.length;l<m;l++)(n=arguments[l])&&n.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&n instanceof jQuery?t=arguments[l]:(e=arguments[l])&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&e instanceof HTMLElement||e&&e.nodeType&&1===e.nodeType?t=$(arguments[l]):"function"==typeof arguments[l]?i=arguments[l]:"object"==typeof arguments[l]&&(o=arguments[l]);t.length&&(s.init=function(){var e=this;e.dom.el=t,e.settings=$.extend({},_Scroller.defaults,o),e.build(),e.api={play:function(){e.settings.auto=!0,e.play()},stop:function(){e.settings.auto=!1,e.stop()},prev:function(t){("number"!=typeof(t=parseInt(t,10))||t<0)&&(t=e.settings.speed),e.goto(e.prevVal,t)},next:function(t){("number"!=typeof(t=parseInt(t,10))||t<0)&&(t=e.settings.speed),e.goto(e.nextVal,t)}},"function"==typeof i&&i(e.api)},s.build=function(){var t=this;if(t.dom.box=t.dom.el.find(".scroll-wrap"),0==t.dom.box.length&&(t.dom.box=t.dom.el.find(".ind_ztimglist")),t.dom.list=t.dom.box.find(".scroll-body"),t.dom.items=t.dom.list.find("li"),t.itemNum=t.dom.items.length,!(t.itemNum<=1)){if(t.dom.prevBtn=t.dom.el.find(".prev"),t.dom.nextBtn=t.dom.el.find(".next"),t.itemWidth=t.settings.customWid?t.dom.el.width():t.dom.items.outerWidth(!0),t.itemHeight=t.dom.items.outerHeight(!0),"left"===t.settings.direction||"right"===t.settings.direction){if(t.itemWidth*t.itemNum<=t.dom.box.outerWidth())return;t.prevVal="left",t.nextVal="right",t.moveVal=t.itemWidth}else{if(t.itemHeight*t.itemNum<=t.dom.box.outerHeight())return;t.prevVal="top",t.nextVal="bottom",t.moveVal=t.itemHeight}t.settings.customWid&&t.dom.items.width(t.dom.el.width()),t.dom.list.width(t.moveVal*t.itemNum*2),t.dom.items.clone().appendTo(t.dom.list),t.settings.prevBtn&&!t.dom.prevBtn.length&&(t.dom.prevBtn=$("<a></a>",{class:"prev"}).prependTo(t.dom.el)),t.settings.nextBtn&&!t.dom.nextBtn.length&&(t.dom.nextBtn=$("<a></a>",{class:"next"}).prependTo(t.dom.el)),t.settings.nextBtn&&t.dom.prevBtn.length&&t.dom.nextBtn.bind("click",function(){t.lockState||t.goto(t.nextVal,t.settings.accel)}),t.settings.prevBtn&&t.dom.prevBtn.length&&t.dom.prevBtn.bind("click",function(){t.lockState||t.goto(t.prevVal,t.settings.accel)}),t.settings.hoverLock&&t.dom.box.on("mouseenter",function(){t.stop()}).on("mouseleave",function(){t.play()}),t.play()}},s.play=function(){var t=this;t.settings.auto&&(t.stop(),t.run=setTimeout(function(){t.goto(null,t.settings.speed)},t.settings.time))},s.stop=function(){void 0!==this.run&&clearTimeout(this.run)},s.goto=function(t,e){var o,i,n=this,s=e||n.settings.speed;switch("string"!=typeof t&&(t=n.settings.direction),n.stop(),n.lockState=!0,t){case"left":case"top":o=0,"left"===t?(0===parseInt(n.dom.box.scrollLeft(),10)&&n.dom.box.scrollLeft(n.itemNum*n.moveVal),0<(i=n.dom.box.scrollLeft()-n.moveVal*n.settings.step)%n.itemWidth&&(i-=i%n.itemWidth-n.itemWidth),i<o&&(i=o),n.dom.box.animate({scrollLeft:i},s,n.settings.easing,function(){parseInt(n.dom.box.scrollLeft(),10)<=o&&n.dom.box.scrollLeft(0)})):(0===parseInt(n.dom.box.scrollTop(),10)&&n.dom.box.scrollTop(n.itemNum*n.moveVal),0<(i=n.dom.box.scrollTop()-n.moveVal*n.settings.step)%n.itemHeight&&(i-=i%n.itemHeight-n.itemHeight),i<o&&(i=o),n.dom.box.animate({scrollTop:i},s,n.settings.easing,function(){parseInt(n.dom.box.scrollTop(),10)<=o&&n.dom.box.scrollTop(0)}));break;case"right":case"bottom":o=n.itemNum*n.moveVal,"right"===t?(0<(i=n.dom.box.scrollLeft()+n.moveVal*n.settings.step)%n.itemWidth&&(i-=i%n.itemWidth),o<i&&(i=o),n.dom.box.animate({scrollLeft:i},s,n.settings.easing,function(){parseInt(n.dom.box.scrollLeft(),10)>=o&&n.dom.box.scrollLeft(0)})):(0<(i=n.dom.box.scrollTop()+n.moveVal*n.settings.step)%n.itemHeight&&(i-=i%n.itemHeight),o<i&&(i=o),n.dom.box.animate({scrollTop:i},s,n.settings.easing,function(){parseInt(n.dom.box.scrollTop(),10)>=o&&n.dom.box.scrollTop(0)}));break;default:return}n.dom.box.queue(function(){n.lockState=!1,n.play(),$(this).dequeue()})},s.init())};_Scroller.defaults={direction:"right",easing:"swing",step:1,accel:200,speed:800,time:4e3,auto:!0,hoverLock:!0,prevBtn:!0,nextBtn:!0},$.fn.cxScroll=function(e,o){return this.each(function(t){_Scroller(this,e,o)}),this};